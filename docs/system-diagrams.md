# System Diagrams - Knowledge Base & Products

**Document Version**: 1.0  
**Date**: 2025-10-19

---

## 1. OVERALL SYSTEM ARCHITECTURE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     MATERIAL KAI VISION PLATFORM                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚   PDF UPLOAD     â”‚         â”‚  XML/SCRAPING    â”‚              â”‚
â”‚  â”‚   (Frontend)     â”‚         â”‚   (External)     â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚           â”‚                            â”‚                         â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                        â–¼                                         â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚        â”‚  PDF PROCESSING PIPELINE     â”‚                         â”‚
â”‚        â”‚  (MIVAA Integration)         â”‚                         â”‚
â”‚        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                         â”‚
â”‚        â”‚ â€¢ Extract text               â”‚                         â”‚
â”‚        â”‚ â€¢ Create chunks              â”‚                         â”‚
â”‚        â”‚ â€¢ Extract images             â”‚                         â”‚
â”‚        â”‚ â€¢ Generate embeddings        â”‚                         â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                     â”‚                                            â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚        â–¼                         â–¼                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚   â”‚  KNOWLEDGE  â”‚         â”‚   PRODUCT    â”‚                     â”‚
â”‚   â”‚    BASE     â”‚         â”‚   BUILDER    â”‚                     â”‚
â”‚   â”‚  (Storage)  â”‚         â”‚  (Service)   â”‚                     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚        â”‚                         â”‚                              â”‚
â”‚        â”‚                         â–¼                              â”‚
â”‚        â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚        â”‚                  â”‚   PRODUCTS   â”‚                     â”‚
â”‚        â”‚                  â”‚  (Database)  â”‚                     â”‚
â”‚        â”‚                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚        â”‚                         â”‚                              â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                     â–¼                                            â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚        â”‚   UNIFIED SEARCH SERVICE     â”‚                         â”‚
â”‚        â”‚  (Embeddings + Keywords)     â”‚                         â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                     â”‚                                            â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚        â–¼                         â–¼                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚   â”‚  MATERIALS  â”‚         â”‚    AGENT     â”‚                     â”‚
â”‚   â”‚    PAGE     â”‚         â”‚ RECOMMENDER  â”‚                     â”‚
â”‚   â”‚ (Discovery) â”‚         â”‚ (AI)         â”‚                     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. DATA FLOW - PDF TO PRODUCT

```
PDF Document
â”‚
â”œâ”€ Metadata
â”‚  â”œâ”€ filename: "materials.pdf"
â”‚  â”œâ”€ upload_date: 2025-10-19
â”‚  â”œâ”€ file_size: 2.5MB
â”‚  â””â”€ page_count: 45
â”‚
â”œâ”€ Chunks (Text Segments)
â”‚  â”œâ”€ Chunk 1: "Ceramic tiles are durable..."
â”‚  â”‚  â”œâ”€ Embedding: [0.234, -0.156, 0.892, ...]
â”‚  â”‚  â”œâ”€ Page: 5
â”‚  â”‚  â””â”€ Position: 1
â”‚  â”‚
â”‚  â”œâ”€ Chunk 2: "Available in red, blue, green..."
â”‚  â”‚  â”œâ”€ Embedding: [0.445, 0.123, -0.234, ...]
â”‚  â”‚  â”œâ”€ Page: 6
â”‚  â”‚  â””â”€ Position: 2
â”‚  â”‚
â”‚  â””â”€ Chunk 3: "Fire resistant properties..."
â”‚     â”œâ”€ Embedding: [0.156, 0.234, 0.567, ...]
â”‚     â”œâ”€ Page: 7
â”‚     â””â”€ Position: 3
â”‚
â”œâ”€ Images (Extracted)
â”‚  â”œâ”€ Image 1: red_tile_1.jpg
â”‚  â”‚  â”œâ”€ Page: 5
â”‚  â”‚  â”œâ”€ Embedding: [0.300, 0.200, 0.500, ...]
â”‚  â”‚  â””â”€ Confidence: 0.95
â”‚  â”‚
â”‚  â””â”€ Image 2: red_tile_2.jpg
â”‚     â”œâ”€ Page: 6
â”‚     â”œâ”€ Embedding: [0.310, 0.210, 0.510, ...]
â”‚     â””â”€ Confidence: 0.92
â”‚
â””â”€ Product (Built from Chunks)
   â”œâ”€ Name: "Fire-Resistant Red Ceramic Tiles"
   â”œâ”€ Description: "Durable ceramic tiles with fire resistance"
   â”œâ”€ Properties:
   â”‚  â”œâ”€ color: "red"
   â”‚  â”œâ”€ material: "ceramic"
   â”‚  â”œâ”€ fireResistant: true
   â”‚  â””â”€ durability: "high"
   â”œâ”€ Images: [red_tile_1.jpg, red_tile_2.jpg]
   â”œâ”€ Embedding: [0.330, 0.190, 0.520, ...] (combined)
   â””â”€ Source Chunks: [Chunk1, Chunk2, Chunk3]
```

---

## 3. KNOWLEDGE BASE UI STRUCTURE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    KNOWLEDGE BASE                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  Tabs: [Overview] [Documents] [Chunks] [Images] [Embeddings]â”‚
â”‚         [Products] [Metadata]                                â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ DOCUMENTS TAB                                           â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  ğŸ“„ materials.pdf                                        â”‚ â”‚
â”‚  â”‚  â”œâ”€ Filename: materials.pdf                             â”‚ â”‚
â”‚  â”‚  â”œâ”€ Upload Date: 2025-10-19                             â”‚ â”‚
â”‚  â”‚  â”œâ”€ File Size: 2.5 MB                                   â”‚ â”‚
â”‚  â”‚  â”œâ”€ Pages: 45                                           â”‚ â”‚
â”‚  â”‚  â”œâ”€ Chunks: 127                                         â”‚ â”‚
â”‚  â”‚  â”œâ”€ Images: 23                                          â”‚ â”‚
â”‚  â”‚  â”œâ”€ Status: âœ… Processed                                â”‚ â”‚
â”‚  â”‚  â””â”€ [View Details Modal]                                â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  ğŸ“„ specifications.pdf                                   â”‚ â”‚
â”‚  â”‚  â”œâ”€ Filename: specifications.pdf                        â”‚ â”‚
â”‚  â”‚  â”œâ”€ Upload Date: 2025-10-18                             â”‚ â”‚
â”‚  â”‚  â”œâ”€ File Size: 1.8 MB                                   â”‚ â”‚
â”‚  â”‚  â”œâ”€ Pages: 32                                           â”‚ â”‚
â”‚  â”‚  â”œâ”€ Chunks: 89                                          â”‚ â”‚
â”‚  â”‚  â”œâ”€ Images: 15                                          â”‚ â”‚
â”‚  â”‚  â”œâ”€ Status: âœ… Processed                                â”‚ â”‚
â”‚  â”‚  â””â”€ [View Details Modal]                                â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ CHUNKS TAB                                              â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  ğŸ“ Chunk #1                                            â”‚ â”‚
â”‚  â”‚  â”œâ”€ Source: materials.pdf (Page 5)                      â”‚ â”‚
â”‚  â”‚  â”œâ”€ Content: "Ceramic tiles are durable..."             â”‚ â”‚
â”‚  â”‚  â”œâ”€ Embedding: âœ… Generated (1536D)                     â”‚ â”‚
â”‚  â”‚  â”œâ”€ Related Chunks: 3 (similarity: 0.92, 0.85, 0.78)   â”‚ â”‚
â”‚  â”‚  â”œâ”€ Related Images: 2                                   â”‚ â”‚
â”‚  â”‚  â””â”€ [View Details Modal]                                â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  ğŸ“ Chunk #2                                            â”‚ â”‚
â”‚  â”‚  â”œâ”€ Source: materials.pdf (Page 6)                      â”‚ â”‚
â”‚  â”‚  â”œâ”€ Content: "Available in red, blue, green..."         â”‚ â”‚
â”‚  â”‚  â”œâ”€ Embedding: âœ… Generated (1536D)                     â”‚ â”‚
â”‚  â”‚  â”œâ”€ Related Chunks: 2 (similarity: 0.88, 0.81)         â”‚ â”‚
â”‚  â”‚  â”œâ”€ Related Images: 3                                   â”‚ â”‚
â”‚  â”‚  â””â”€ [View Details Modal]                                â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ IMAGES TAB                                              â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  [Image Grid]                                           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚ â”‚
â”‚  â”‚  â”‚ Image 1  â”‚  â”‚ Image 2  â”‚  â”‚ Image 3  â”‚              â”‚ â”‚
â”‚  â”‚  â”‚ red_tile â”‚  â”‚ red_tile â”‚  â”‚ blue_tileâ”‚              â”‚ â”‚
â”‚  â”‚  â”‚ Page: 5  â”‚  â”‚ Page: 6  â”‚  â”‚ Page: 8  â”‚              â”‚ â”‚
â”‚  â”‚  â”‚ Conf: 95%â”‚  â”‚ Conf: 92%â”‚  â”‚ Conf: 88%â”‚              â”‚ â”‚
â”‚  â”‚  â”‚ [Details]â”‚  â”‚ [Details]â”‚  â”‚ [Details]â”‚              â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ PRODUCTS TAB (NEW)                                      â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  ğŸ·ï¸ Fire-Resistant Red Ceramic Tiles                    â”‚ â”‚
â”‚  â”‚  â”œâ”€ Status: Published                                   â”‚ â”‚
â”‚  â”‚  â”œâ”€ Source Chunks: 3                                    â”‚ â”‚
â”‚  â”‚  â”œâ”€ Images: 2                                           â”‚ â”‚
â”‚  â”‚  â”œâ”€ Embedding: âœ… Generated                             â”‚ â”‚
â”‚  â”‚  â”œâ”€ Properties: color=red, material=ceramic, ...        â”‚ â”‚
â”‚  â”‚  â””â”€ [Edit] [View] [Delete]                              â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  ğŸ·ï¸ Waterproof Blue Porcelain Tiles                     â”‚ â”‚
â”‚  â”‚  â”œâ”€ Status: Draft                                       â”‚ â”‚
â”‚  â”‚  â”œâ”€ Source Chunks: 2                                    â”‚ â”‚
â”‚  â”‚  â”œâ”€ Images: 1                                           â”‚ â”‚
â”‚  â”‚  â”œâ”€ Embedding: âœ… Generated                             â”‚ â”‚
â”‚  â”‚  â”œâ”€ Properties: color=blue, material=porcelain, ...     â”‚ â”‚
â”‚  â”‚  â””â”€ [Edit] [View] [Delete]                              â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. SEARCH FLOW DIAGRAM

```
User Query: "red waterproof tiles"
â”‚
â”œâ”€ Query Preprocessing
â”‚  â”œâ”€ Normalize: "red waterproof tiles"
â”‚  â”œâ”€ Remove stopwords: "red waterproof tiles"
â”‚  â””â”€ Identify intent: "find material"
â”‚
â”œâ”€ Generate Query Embedding
â”‚  â””â”€ Result: [0.210, -0.145, 0.895, ...] (1536D)
â”‚
â”œâ”€ Parallel Search
â”‚  â”‚
â”‚  â”œâ”€ Search A: Product Embeddings
â”‚  â”‚  â”œâ”€ Query: product_embeddings table
â”‚  â”‚  â”œâ”€ Find similar: cosine_similarity > 0.7
â”‚  â”‚  â””â”€ Results:
â”‚  â”‚     â”œâ”€ Product1 (0.92) - "Fire-Resistant Red Ceramic Tiles"
â”‚  â”‚     â”œâ”€ Product2 (0.85) - "Waterproof Red Porcelain Tiles"
â”‚  â”‚     â””â”€ Product3 (0.78) - "Red Tile Collection"
â”‚  â”‚
â”‚  â”œâ”€ Search B: Chunk Embeddings
â”‚  â”‚  â”œâ”€ Query: document_vectors table
â”‚  â”‚  â”œâ”€ Find similar: cosine_similarity > 0.7
â”‚  â”‚  â””â”€ Results:
â”‚  â”‚     â”œâ”€ Chunk1 (0.88) - "Red tiles are ideal for bathrooms..."
â”‚  â”‚     â”œâ”€ Chunk2 (0.81) - "Waterproof properties ensure durability..."
â”‚  â”‚     â””â”€ Chunk3 (0.75) - "Available in red, blue, green..."
â”‚  â”‚
â”‚  â””â”€ Search C: Keyword Search
â”‚     â”œâ”€ Match: "red", "waterproof", "tiles"
â”‚     â””â”€ Results: [Product4, Chunk4, Chunk5]
â”‚
â”œâ”€ Result Merging & Ranking
â”‚  â”œâ”€ Combine all results
â”‚  â”œâ”€ Remove duplicates
â”‚  â”œâ”€ Calculate final score:
â”‚  â”‚  score = (embedding_similarity * 0.6) + (keyword_match * 0.3) + (popularity * 0.1)
â”‚  â””â”€ Sort by score
â”‚
â””â”€ Return Results
   â”œâ”€ 1. Product1 (0.92) - "Fire-Resistant Red Ceramic Tiles"
   â”œâ”€ 2. Product2 (0.85) - "Waterproof Red Porcelain Tiles"
   â”œâ”€ 3. Chunk1 (0.88) - "Red tiles are ideal for bathrooms..."
   â”œâ”€ 4. Chunk2 (0.81) - "Waterproof properties ensure durability..."
   â””â”€ 5. Product3 (0.78) - "Red Tile Collection"
```

---

## 5. DATABASE RELATIONSHIPS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   documents      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚
â”‚ filename         â”‚
â”‚ file_size        â”‚
â”‚ processing_statusâ”‚
â”‚ created_at       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 1:N
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                        â”‚
    â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ document_chunks  â”‚  â”‚ document_images  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚  â”‚ id (PK)          â”‚
â”‚ document_id (FK) â”‚  â”‚ document_id (FK) â”‚
â”‚ content          â”‚  â”‚ image_url        â”‚
â”‚ chunk_index      â”‚  â”‚ page_number      â”‚
â”‚ metadata         â”‚  â”‚ confidence       â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 1:1                 â”‚ 1:1
     â”‚                     â”‚
     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ document_vectors â”‚  â”‚ image_embeddings â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚  â”‚ id (PK)          â”‚
â”‚ chunk_id (FK)    â”‚  â”‚ image_id (FK)    â”‚
â”‚ embedding        â”‚  â”‚ embedding        â”‚
â”‚ model_name       â”‚  â”‚ embedding_type   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    products      â”‚ (NEW)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚
â”‚ name             â”‚
â”‚ description      â”‚
â”‚ category_id      â”‚
â”‚ embedding        â”‚
â”‚ status           â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 1:N
     â”‚
    â”Œâ”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                        â”‚
    â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ product_images   â”‚  â”‚product_embeddingsâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚  â”‚ id (PK)          â”‚
â”‚ product_id (FK)  â”‚  â”‚ product_id (FK)  â”‚
â”‚ image_url        â”‚  â”‚ embedding        â”‚
â”‚ display_order    â”‚  â”‚ embedding_type   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚product_chunk_relationships   â”‚ (NEW)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                      â”‚
â”‚ product_id (FK)              â”‚
â”‚ chunk_id (FK)                â”‚
â”‚ relationship_type            â”‚
â”‚ relevance_score              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. MATERIALS PAGE LAYOUT

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MATERIALS PAGE                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  Search: [red waterproof tiles          ] [Search]           â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ FILTERS          â”‚  â”‚ PRODUCTS (127 results)          â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ Category         â”‚  â”‚                                 â”‚  â”‚
â”‚  â”‚ â˜‘ Tiles          â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚ â˜‘ Ceramics       â”‚  â”‚  â”‚ Product1 â”‚  â”‚ Product2 â”‚    â”‚  â”‚
â”‚  â”‚ â˜ Stone          â”‚  â”‚  â”‚ Red      â”‚  â”‚ Blue     â”‚    â”‚  â”‚
â”‚  â”‚ â˜ Wood           â”‚  â”‚  â”‚ Ceramic  â”‚  â”‚ Porcelainâ”‚    â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚ Tiles    â”‚  â”‚ Tiles    â”‚    â”‚  â”‚
â”‚  â”‚ Color            â”‚  â”‚  â”‚ $45/mÂ²   â”‚  â”‚ $52/mÂ²   â”‚    â”‚  â”‚
â”‚  â”‚ â˜‘ Red            â”‚  â”‚  â”‚ [Details]â”‚  â”‚ [Details]â”‚    â”‚  â”‚
â”‚  â”‚ â˜ Blue           â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚ â˜ Green          â”‚  â”‚                                 â”‚  â”‚
â”‚  â”‚ â˜ White          â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚ Product3 â”‚  â”‚ Product4 â”‚    â”‚  â”‚
â”‚  â”‚ Properties       â”‚  â”‚  â”‚ Red Tile â”‚  â”‚ Waterproof   â”‚  â”‚
â”‚  â”‚ â˜‘ Waterproof     â”‚  â”‚  â”‚ Collection   â”‚ Tiles    â”‚    â”‚  â”‚
â”‚  â”‚ â˜‘ Fire Resistant â”‚  â”‚  â”‚ $38/mÂ²   â”‚  â”‚ $48/mÂ²   â”‚    â”‚  â”‚
â”‚  â”‚ â˜ Slip Resistant â”‚  â”‚  â”‚ [Details]â”‚  â”‚ [Details]â”‚    â”‚  â”‚
â”‚  â”‚ â˜ Eco-Friendly   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚                                 â”‚  â”‚
â”‚  â”‚ [Clear Filters]  â”‚  â”‚  [Load More Products]           â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. AGENT RECOMMENDATION FLOW

```
User Query: "I need red waterproof tiles for a bathroom"
â”‚
â”œâ”€ Agent Receives
â”‚  â”œâ”€ Search Results: [Product1, Product2, Chunk1, Chunk2]
â”‚  â””â”€ User Context: bathroom, red, waterproof
â”‚
â”œâ”€ Agent Analysis
â”‚  â”œâ”€ Identify Needs:
â”‚  â”‚  â”œâ”€ Color: red
â”‚  â”‚  â”œâ”€ Property: waterproof
â”‚  â”‚  â”œâ”€ Use case: bathroom
â”‚  â”‚  â””â”€ Type: tiles
â”‚  â”‚
â”‚  â”œâ”€ Match Products:
â”‚  â”‚  â”œâ”€ Product1: Matches all (score: 0.95)
â”‚  â”‚  â”œâ”€ Product2: Matches 3/4 (score: 0.85)
â”‚  â”‚  â””â”€ Product3: Matches 2/4 (score: 0.65)
â”‚  â”‚
â”‚  â””â”€ Generate Recommendations:
â”‚     â”œâ”€ Primary: Product1 (perfect match)
â”‚     â”œâ”€ Alternative: Product2 (good alternative)
â”‚     â””â”€ Consider: Product3 (budget option)
â”‚
â””â”€ Agent Response
   â”œâ”€ "I recommend Product1 - it's perfect for your needs"
   â”œâ”€ "It's red, waterproof, and ideal for bathrooms"
   â”œâ”€ "Alternative: Product2 is also excellent"
   â”œâ”€ [Product1 Card with Images]
   â”œâ”€ [Product2 Card with Images]
   â””â”€ [Link to Materials Page]
```

---

## 8. IMPLEMENTATION PHASES

```
Week 1-2: Knowledge Base Fixes
â”œâ”€ Fix UI Issues (12 items)
â”œâ”€ Implement Modals
â””â”€ Add Real-time Updates
    â–¼
Week 2-3: Database & APIs
â”œâ”€ Create Tables
â”œâ”€ Implement CRUD
â””â”€ Set up Relationships
    â–¼
Week 3-4: Product Creation
â”œâ”€ Build ProductBuilderService
â”œâ”€ Implement Embeddings
â””â”€ Create Product UI
    â–¼
Week 4-5: Search & Materials
â”œâ”€ Unified Search
â”œâ”€ Materials Page
â””â”€ Agent Integration
    â–¼
Week 5-6: Testing & Deploy
â”œâ”€ Comprehensive Testing
â”œâ”€ Performance Optimization
â””â”€ Deployment
    â–¼
âœ… COMPLETE SYSTEM LIVE
```

