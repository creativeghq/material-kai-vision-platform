{
  "openapi": "3.1.0",
  "info": {
    "title": "MIVAA - Material Intelligence Vision and Analysis Agent",
    "description": "\n**Production API v2.2.0** - AI-powered material recognition and knowledge management platform serving 5,000+ users.\n\n## üéØ Overview\n\nMIVAA is the core backend service powering the Material Kai Vision Platform, providing comprehensive PDF processing, AI analysis, and multi-vector search capabilities.\n\n## ‚ú® API Organization (v2.2.0)\n\n**Comprehensive API with 106 endpoints organized into 15 categories**\n\n**Key Features:**\n- ‚úÖ **Consolidated Upload**: `/api/rag/documents/upload` with processing modes (quick/standard/deep) and categories\n- ‚úÖ **Unified Search**: `/api/rag/search?strategy={strategy}` with 6 strategies (semantic, vector, multi_vector, hybrid, material, image)\n- ‚úÖ **Comprehensive Health**: `/health` for all services (database, storage, AI models)\n- ‚úÖ **Well-Organized**: 15 endpoint categories covering RAG, documents, search, AI services, admin, and more\n- ‚úÖ **Preserved**: Prompt enhancement system, category extraction, all processing modes\n\n### Key Capabilities\n- **PDF Processing**: 14-stage pipeline with PyMuPDF4LLM extraction\n- **Products + Metadata**: Inseparable extraction (Stage 0A) - all metadata stored in product.metadata JSONB\n- **Document Entities**: Certificates, logos, specifications as separate knowledge base (Stage 0B)\n- **AI Analysis**: 12 AI models across 7 pipeline stages\n- **Multi-Vector Search**: 6 specialized embeddings (text, visual, color, texture, application, multimodal)\n- **Knowledge Base**: Semantic chunking, quality scoring, deduplication\n- **Image Analysis**: CLIP + Llama 4 Scout Vision (69.4% MMMU, #1 OCR)\n- **Agentic Queries**: Factory/group filtering for certificates, logos, specifications\n\n### AI Models\n1. **OpenAI**: text-embedding-3-small (1536D embeddings)\n2. **Anthropic**: Claude Haiku 4.5 (fast classification), Claude Sonnet 4.5 (deep enrichment)\n3. **Together AI**: Llama 4 Scout 17B Vision\n4. **CLIP**: Visual embeddings (512D)\n5. **Custom**: Color, texture, application embeddings\n\n### API Endpoints\n- **Total**: 106 endpoints across 15 categories (18 legacy endpoints removed)\n- **RAG System**: 23 endpoints for document upload, search, query, chat, embeddings\n- **AI Services**: 10 endpoints for classification, validation, boundary detection\n- **Admin**: 10 endpoints for chunk quality, extraction config, prompts\n- **Search**: 8 endpoints for semantic, image, material, multimodal search\n- **Jobs**: 7 endpoints for progress tracking, statistics, status\n- **Document Entities**: 5 endpoints for certificates, logos, specifications\n\n### Performance\n- **Search Accuracy**: 85%+\n- **Processing Success**: 95%+\n- **Response Time**: 200-800ms (search), 1-4s (analysis)\n- **Uptime**: 99.5%+\n\n## üîê Authentication\n\nAll API endpoints require JWT authentication:\n```\nAuthorization: Bearer your-jwt-token\n```\n\nGet your token from the frontend application or Supabase authentication.\n\n## üìä Latest Enhancements (October 2025)\n\n‚úÖ **Product Detection Pipeline** - 60-70% false positive reduction with 4-layer validation\n‚úÖ **Chunk Quality System** - Hash-based + semantic deduplication, quality scoring\n‚úÖ **Two-Stage Classification** - 60% faster, 40% cost reduction\n‚úÖ **Multi-Vector Embeddings** - 6 embedding types for 85%+ accuracy improvement\n‚úÖ **Admin Dashboard** - Chunk quality monitoring and review workflow\n‚úÖ **Metadata Synchronization** - 100% accuracy in job status reporting\n\n## üöÄ API Categories (106 Endpoints)\n\n### üìÑ PDF Processing (`/api/pdf/*`)\n- Extract markdown, tables, images from PDFs\n- PyMuPDF4LLM integration\n- Batch processing support\n\n### üß† RAG System (`/api/rag/*`)\n- Document upload and processing\n- Query and chat interfaces\n- Semantic search\n- Job monitoring with real-time progress\n\n### ü§ñ AI Analysis (`/api/semantic-analysis`)\n- Llama 4 Scout Vision material analysis\n- Multi-modal text + image processing\n- Entity extraction and classification\n\n### üîç Search APIs (`/api/search/*`)\n- Semantic search (text embeddings)\n- Vector search (multi-vector)\n- Hybrid search (combined)\n- Recommendations\n\n### üîó Embedding APIs (`/api/embeddings/*`)\n- Generate text embeddings (1536D)\n- Generate CLIP embeddings (512D)\n- Batch processing\n- Multi-vector generation (6 types)\n\n### üí¨ Chat APIs (`/api/chat/*`)\n- Chat completions\n- Contextual responses\n- Conversation history\n\n### üì¶ Products API (`/api/products/*`)\n- Two-stage product classification\n- Product enrichment\n- Product management\n- Health monitoring\n\n### üë®‚Äçüíº Admin APIs (`/api/admin/*`)\n- Chunk quality dashboard\n- Quality statistics\n- Flagged chunks review\n- Metadata management\n\n### üè• Health & Monitoring\n- `/health` - Service health check\n- `/metrics` - Performance metrics\n- `/performance/summary` - Comprehensive stats\n\n## üìñ Documentation\n\n- **Interactive API Docs**: [/docs](/docs) (Swagger UI)\n- **Alternative Docs**: [/redoc](/redoc) (ReDoc)\n- **OpenAPI Schema**: [/openapi.json](/openapi.json)\n- **Complete Documentation**: https://basilakis.github.io\n\n## üîó Related Services\n\n- **Frontend**: https://materialshub.gr\n- **Documentation Site**: https://basilakis.github.io\n- **GitHub**: https://github.com/creativeghq/material-kai-vision-platform\n\n        ",
    "version": "2.2.0",
    "x-api-features": {
      "api_consolidation": "Consolidated and organized endpoints with clear categorization",
      "consolidated_upload": "/api/rag/documents/upload with modes (quick/standard/deep) + categories",
      "consolidated_search": "/api/rag/search?strategy={strategy} with 6 strategies",
      "consolidated_health": "/health for all services (database, storage, AI models)",
      "pdf_processing": "14-stage AI pipeline with checkpoint recovery",
      "product_discovery": "Products + Metadata extraction (inseparable) - Stage 0A",
      "document_entities": "Certificates, logos, specifications as separate knowledge base - Stage 0B",
      "prompt_enhancement": "Admin templates + agent prompt enhancement (PRESERVED)",
      "category_extraction": "Products, certificates, logos, specifications (PRESERVED)",
      "rag_system": "Retrieval-Augmented Generation with multi-vector search",
      "vector_search": "6 embedding types (text, visual, color, texture, application, multimodal)",
      "search_strategies": "6 strategies (semantic, vector, multi_vector, hybrid, material, image)",
      "ai_models": "12 models: Claude Sonnet 4.5, Haiku 4.5, GPT-5, Llama 4 Scout 17B Vision, CLIP",
      "material_recognition": "Llama 4 Scout 17B Vision (69.4% MMMU, #1 OCR)",
      "embedding_models": "OpenAI text-embedding-3-small (1536D), CLIP ViT-B/32 (512D)",
      "performance": "95%+ product detection, 85%+ search accuracy, 200-800ms response time",
      "scalability": "5,000+ users, 99.5%+ uptime",
      "agentic_queries": "Factory/group filtering for certificates, logos, specifications"
    },
    "x-endpoint-categories": {
      "rag_routes": "/api/rag/* (23 endpoints) - Document upload, search, query, chat, embeddings, jobs",
      "utilities_routes": "/api/bulk/*, /api/data/*, /api/monitoring/*, /api/system/* (12 endpoints)",
      "admin_routes": "/admin/* (10 endpoints) - Chunk quality, extraction config, prompts management",
      "ai_services_routes": "/api/v1/ai-services/* (10 endpoints) - Classification, validation, boundary detection",
      "search_routes": "/api/search/* (8 endpoints) - Semantic, image, material, multimodal search",
      "jobs_routes": "/api/jobs/* (7 endpoints) - Job progress, statistics, status tracking",
      "document_entities_routes": "/api/document-entities/* (5 endpoints) - Certificates, logos, specifications",
      "images_routes": "/api/images/* (5 endpoints) - Image analysis, search, upload",
      "monitoring_routes": "/, /health, /metrics, /performance/summary (4 endpoints)",
      "embeddings_routes": "/api/embeddings/* (4 endpoints) - CLIP text/image, material embeddings",
      "ai_analysis_routes": "/api/semantic-analysis, /api/analyze/* (4 endpoints) - TogetherAI, multimodal analysis",
      "pdf_routes": "/api/pdf/* (4 endpoints) - Extract markdown, tables, images",
      "anthropic_routes": "/api/v1/anthropic/* (3 endpoints) - Claude image validation, product enrichment",
      "products_routes": "/api/products/* (3 endpoints) - Product creation from chunks/layout",
      "ai_metrics_routes": "/api/v1/ai-metrics/* (2 endpoints) - Job metrics, summary"
    },
    "x-platform-stats": {
      "total_endpoints": 106,
      "endpoint_categories": 15,
      "ai_models": 12,
      "processing_stages": 14,
      "embedding_types": 6,
      "search_strategies": 6,
      "users": "5,000+",
      "uptime": "99.5%+",
      "version": "2.2.0",
      "last_updated": "2025-11-02",
      "legacy_removed": "Removed 18 duplicate /api/documents/* endpoints (13 from documents.py + 5 from search.py)"
    }
  },
  "servers": [
    {
      "url": "http://localhost:8000",
      "description": "Development server"
    },
    {
      "url": "https://your-domain.com",
      "description": "Production server"
    }
  ],
  "paths": {
    "/health": {
      "get": {
        "summary": "üè• Unified Health Check - All Services",
        "description": "Comprehensive health check for all system services including database, storage, and AI models",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/metrics": {
      "get": {
        "summary": "Performance Metrics",
        "description": "Get current performance metrics and system status",
        "operationId": "get_metrics_metrics_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Metrics Metrics Get"
                }
              }
            }
          }
        }
      }
    },
    "/performance/summary": {
      "get": {
        "summary": "Performance Summary",
        "description": "Get performance summary with recommendations",
        "operationId": "get_performance_summary_performance_summary_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Performance Summary Performance Summary Get"
                }
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "summary": "Service Information",
        "description": "Get basic information about the PDF2Markdown microservice",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Root  Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/pdf/extract/markdown": {
      "post": {
        "tags": [
          "PDF Processing"
        ],
        "summary": "Extract Markdown from PDF",
        "description": "Convert PDF document to Markdown format with optional page selection",
        "operationId": "extract_markdown_api_pdf_extract_markdown_post",
        "parameters": [
          {
            "name": "page_number",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Page Number"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_extract_markdown_api_pdf_extract_markdown_post"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/pdf/extract/tables": {
      "post": {
        "tags": [
          "PDF Processing"
        ],
        "summary": "Extract Tables from PDF",
        "description": "Extract tables from PDF and return as ZIP file containing CSV files",
        "operationId": "extract_tables_api_pdf_extract_tables_post",
        "parameters": [
          {
            "name": "page_number",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Page Number"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_extract_tables_api_pdf_extract_tables_post"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/pdf/extract/images": {
      "post": {
        "tags": [
          "PDF Processing"
        ],
        "summary": "Extract Images from PDF",
        "description": "Extract images and metadata from PDF and return as ZIP file",
        "operationId": "extract_images_api_pdf_extract_images_post",
        "parameters": [
          {
            "name": "page_number",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Page Number"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_extract_images_api_pdf_extract_images_post"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/pdf/health": {
      "get": {
        "tags": [
          "PDF Processing"
        ],
        "summary": "PDF Service Health Check",
        "description": "Check the health and availability of PDF processing services",
        "operationId": "health_check_api_pdf_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/search/semantic": {
      "post": {
        "tags": [
          "Search",
          "Embeddings",
          "Chat"
        ],
        "summary": "Semantic search across documents",
        "description": "Perform semantic search across multiple documents using vector similarity",
        "operationId": "semantic_search_api_search_semantic_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SemanticSearchRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SemanticSearchResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/search/similarity": {
      "post": {
        "tags": [
          "Search",
          "Embeddings",
          "Chat"
        ],
        "summary": "Vector similarity search",
        "description": "Find documents similar to a given text using vector embeddings",
        "operationId": "similarity_search_api_search_similarity_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SimilaritySearchRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SimilaritySearchResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/search/health": {
      "get": {
        "tags": [
          "Search",
          "Embeddings",
          "Chat"
        ],
        "summary": "Search service health check",
        "description": "Check the health and availability of search and RAG services",
        "operationId": "search_health_check_api_search_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/search/multimodal": {
      "post": {
        "tags": [
          "Search",
          "Embeddings",
          "Chat"
        ],
        "summary": "Multi-modal search across documents",
        "description": "Perform advanced multi-modal search across text and images with OCR support",
        "operationId": "multimodal_search_api_search_multimodal_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/app__schemas__search__SearchRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/app__schemas__search__SearchResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/query/multimodal": {
      "post": {
        "tags": [
          "Search",
          "Embeddings",
          "Chat"
        ],
        "summary": "Multi-modal RAG query",
        "description": "Query documents using multi-modal RAG with text and image context",
        "operationId": "multimodal_query_api_query_multimodal_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/app__schemas__search__QueryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/app__schemas__search__QueryResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/search/images": {
      "post": {
        "tags": [
          "Search",
          "Embeddings",
          "Chat"
        ],
        "summary": "Image-specific search",
        "description": "Search specifically within document images using visual analysis and OCR",
        "operationId": "image_search_api_search_images_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/app__schemas__search__ImageSearchRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/app__schemas__search__ImageSearchResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/analyze/multimodal": {
      "post": {
        "tags": [
          "Search",
          "Embeddings",
          "Chat"
        ],
        "summary": "Comprehensive multi-modal document analysis",
        "description": "Perform comprehensive analysis of document content including text, images, and structure",
        "operationId": "multimodal_analysis_api_analyze_multimodal_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MultiModalAnalysisRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MultiModalAnalysisResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/search/materials/visual": {
      "post": {
        "tags": [
          "Search",
          "Embeddings",
          "Chat"
        ],
        "summary": "Material-specific visual search",
        "description": "Perform visual search with material property filtering and analysis",
        "operationId": "material_visual_search_api_search_materials_visual_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MaterialSearchRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MaterialSearchResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/analyze/materials/image": {
      "post": {
        "tags": [
          "Search",
          "Embeddings",
          "Chat"
        ],
        "summary": "Analyze material image",
        "description": "Analyze a material image using integrated visual analysis",
        "operationId": "analyze_material_image_api_analyze_materials_image_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "title": "Request"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/embeddings/materials/generate": {
      "post": {
        "tags": [
          "Search",
          "Embeddings",
          "Chat"
        ],
        "summary": "Generate material embeddings",
        "description": "Generate CLIP and custom embeddings for material images",
        "operationId": "generate_material_embeddings_api_embeddings_materials_generate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "title": "Request"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/search/materials/{material_id}/similar": {
      "get": {
        "tags": [
          "Search",
          "Embeddings",
          "Chat"
        ],
        "summary": "Find similar materials",
        "description": "Find materials similar to a reference material using visual and property analysis",
        "operationId": "find_similar_materials_api_search_materials__material_id__similar_get",
        "parameters": [
          {
            "name": "material_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Material Id"
            }
          },
          {
            "name": "similarity_threshold",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "maximum": 1,
              "minimum": 0,
              "description": "Minimum similarity threshold",
              "default": 0.75,
              "title": "Similarity Threshold"
            },
            "description": "Minimum similarity threshold"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of results",
              "default": 20,
              "title": "Limit"
            },
            "description": "Maximum number of results"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/search/materials/health": {
      "get": {
        "tags": [
          "Search",
          "Embeddings",
          "Chat"
        ],
        "summary": "Material visual search health check",
        "description": "Check health and availability of material visual search services",
        "operationId": "material_search_health_check_api_search_materials_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/images/analyze": {
      "post": {
        "tags": [
          "Image Analysis"
        ],
        "summary": "Analyze Image",
        "description": "Analyze a single image using Material Kai Vision Platform.\n\nSupports various analysis types including OCR, object detection, and material recognition.",
        "operationId": "analyze_image_api_images_analyze_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ImageAnalysisRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ImageAnalysisResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/images/analyze/batch": {
      "post": {
        "tags": [
          "Image Analysis"
        ],
        "summary": "Analyze Batch Images",
        "description": "Analyze multiple images in batch using Material Kai Vision Platform.\n\nSupports parallel processing for improved performance.",
        "operationId": "analyze_batch_images_api_images_analyze_batch_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ImageBatchRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ImageBatchResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/images/search": {
      "post": {
        "tags": [
          "Image Analysis"
        ],
        "summary": "Search Similar Images",
        "description": "Search for similar images using visual similarity or description matching.\n\nSupports both image-to-image and text-to-image search.",
        "operationId": "search_similar_images_api_images_search_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/app__schemas__images__ImageSearchRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/app__schemas__images__ImageSearchResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/images/upload-and-analyze": {
      "post": {
        "tags": [
          "Image Analysis"
        ],
        "summary": "Upload And Analyze Image",
        "description": "Upload and analyze an image file in a single request.\n\nSupports various analysis types and returns comprehensive results.",
        "operationId": "upload_and_analyze_image_api_images_upload_and_analyze_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_and_analyze_image_api_images_upload_and_analyze_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ImageAnalysisResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/images/health": {
      "get": {
        "tags": [
          "Image Analysis"
        ],
        "summary": "Health Check",
        "description": "Check the health status of the image processing service.\n\nReturns status of Material Kai integration and database connectivity.",
        "operationId": "health_check_api_images_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/jobs": {
      "get": {
        "tags": [
          "Health & Monitoring"
        ],
        "summary": "List Jobs",
        "description": "List all jobs with optional filtering and pagination\n\n- **status**: Filter jobs by status (pending, running, completed, failed, cancelled)\n- **job_type**: Filter jobs by type (document_processing, bulk_processing, etc.)\n- **limit**: Number of jobs to return (default: 50, max: 100)\n- **offset**: Number of jobs to skip for pagination",
        "operationId": "list_jobs_api_jobs_get",
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by job status",
              "title": "Status"
            },
            "description": "Filter by job status"
          },
          {
            "name": "job_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by job type",
              "title": "Job Type"
            },
            "description": "Filter by job type"
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 20,
              "title": "Page Size"
            }
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Sort By"
            }
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "pattern": "^(asc|desc)$"
                },
                {
                  "type": "null"
                }
              ],
              "default": "desc",
              "title": "Sort Order"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/JobListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/jobs/statistics": {
      "get": {
        "tags": [
          "Health & Monitoring"
        ],
        "summary": "Get Job Statistics",
        "description": "Get comprehensive job statistics and metrics",
        "operationId": "get_job_statistics_api_jobs_statistics_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Job Statistics Api Jobs Statistics Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/jobs/{job_id}": {
      "get": {
        "tags": [
          "Health & Monitoring"
        ],
        "summary": "Get Job Status",
        "description": "Get detailed status information for a specific job\n\n- **job_id**: Unique identifier for the job",
        "operationId": "get_job_status_api_jobs__job_id__get",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/JobStatusResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Health & Monitoring"
        ],
        "summary": "Cancel Job",
        "description": "Cancel a running job\n\n- **job_id**: Unique identifier for the job to cancel",
        "operationId": "cancel_job_api_jobs__job_id__delete",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/jobs/{job_id}/status": {
      "get": {
        "tags": [
          "Health & Monitoring"
        ],
        "summary": "Get Job Status Alt",
        "description": "Get detailed status information for a specific job (alternative endpoint)\n\n- **job_id**: Unique identifier for the job",
        "operationId": "get_job_status_alt_api_jobs__job_id__status_get",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/bulk/process": {
      "post": {
        "tags": [
          "Health & Monitoring"
        ],
        "summary": "Bulk Process Documents",
        "operationId": "bulk_process_documents_api_bulk_process_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkProcessingRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/system/health": {
      "get": {
        "tags": [
          "Health & Monitoring"
        ],
        "summary": "Get System Health",
        "description": "Get comprehensive system health status",
        "operationId": "get_system_health_api_system_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/system/metrics": {
      "get": {
        "tags": [
          "Health & Monitoring"
        ],
        "summary": "Get System Metrics",
        "description": "Get detailed system performance metrics",
        "operationId": "get_system_metrics_api_system_metrics_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/data/cleanup": {
      "delete": {
        "tags": [
          "Health & Monitoring"
        ],
        "summary": "Cleanup Old Data",
        "description": "Clean up old data from the system\n\n- **days_old**: Delete data older than this many days (default: 30)\n- **dry_run**: Preview what would be deleted without actually deleting (default: true)",
        "operationId": "cleanup_old_data_api_data_cleanup_delete",
        "parameters": [
          {
            "name": "days_old",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "description": "Delete data older than this many days",
              "default": 30,
              "title": "Days Old"
            },
            "description": "Delete data older than this many days"
          },
          {
            "name": "dry_run",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Preview what would be deleted without actually deleting",
              "default": true,
              "title": "Dry Run"
            },
            "description": "Preview what would be deleted without actually deleting"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/data/backup": {
      "post": {
        "tags": [
          "Health & Monitoring"
        ],
        "summary": "Create Data Backup",
        "description": "Create a backup of system data",
        "operationId": "create_data_backup_api_data_backup_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/data/export": {
      "get": {
        "tags": [
          "Health & Monitoring"
        ],
        "summary": "Export System Data",
        "description": "Export system data in various formats\n\n- **format**: Export format (json, csv)\n- **data_type**: Type of data to export (jobs, metrics)",
        "operationId": "export_system_data_api_data_export_get",
        "parameters": [
          {
            "name": "format",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Export format (json, csv)",
              "default": "json",
              "title": "Format"
            },
            "description": "Export format (json, csv)"
          },
          {
            "name": "data_type",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Type of data to export (jobs, metrics)",
              "default": "jobs",
              "title": "Data Type"
            },
            "description": "Type of data to export (jobs, metrics)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/packages/status": {
      "get": {
        "tags": [
          "Health & Monitoring"
        ],
        "summary": "Get Package Status",
        "description": "Get the status of all system packages and dependencies.\n\nReturns package information for both critical and optional dependencies,\nincluding version information and availability status.",
        "operationId": "get_package_status_api_packages_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/jobs/{job_id}/progress": {
      "get": {
        "tags": [
          "Health & Monitoring"
        ],
        "summary": "Get Job Progress",
        "description": "Get detailed progress information for a specific job.\n\nThis endpoint provides real-time progress tracking including:\n- Current processing stage\n- Page-by-page status\n- OCR progress and confidence scores\n- Database integration status\n- Error and warning details\n- Performance metrics",
        "operationId": "get_job_progress_api_jobs__job_id__progress_get",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/JobProgressDetail"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/jobs/progress/active": {
      "get": {
        "tags": [
          "Health & Monitoring"
        ],
        "summary": "Get All Active Progress",
        "description": "Get progress information for all currently active jobs.\n\nReturns a summary of all jobs currently being processed,\nuseful for monitoring multiple concurrent operations.",
        "operationId": "get_all_active_progress_api_jobs_progress_active_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/jobs/{job_id}/progress/pages": {
      "get": {
        "tags": [
          "Health & Monitoring"
        ],
        "summary": "Get Job Page Progress",
        "description": "Get detailed page-by-page progress for a specific job.\n\nThis endpoint provides granular information about each page:\n- Processing status (pending, processing, success, failed, skipped)\n- Text and image extraction results\n- OCR application and confidence scores\n- Processing time per page\n- Error messages for failed pages\n- Database save status",
        "operationId": "get_job_page_progress_api_jobs__job_id__progress_pages_get",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/jobs/{job_id}/progress/stream": {
      "get": {
        "tags": [
          "Health & Monitoring"
        ],
        "summary": "Stream Job Progress",
        "description": "Stream real-time progress updates for a job.\n\nThis endpoint provides server-sent events (SSE) for real-time monitoring.\nUseful for frontend applications that need live progress updates.",
        "operationId": "stream_job_progress_api_jobs__job_id__progress_stream_get",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/test-product-creation": {
      "post": {
        "tags": [
          "Health & Monitoring"
        ],
        "summary": "Test Product Creation",
        "description": "‚úÖ NEW: Test endpoint for enhanced product creation.\nTests the improved product detection with no limits and better filtering.",
        "operationId": "test_product_creation_api_test_product_creation_post",
        "parameters": [
          {
            "name": "document_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Document Id"
            }
          },
          {
            "name": "workspace_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "ffafc28b-1b8b-4b0d-b226-9f9a6154004e",
              "title": "Workspace Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/admin/images/{image_id}/process-ocr": {
      "post": {
        "tags": [
          "Health & Monitoring"
        ],
        "summary": "Reprocess Image Ocr",
        "description": "Manually reprocess a single image with OCR and update all related entities.\n\nThis endpoint is used when an image was skipped during initial processing\nbut the admin determines it should have OCR applied.\n\nProcess:\n1. Run full EasyOCR on the image\n2. Update image.ocr_extracted_text and ocr_confidence_score\n3. Update related chunks with new OCR text\n4. Regenerate text embeddings for updated chunks\n5. Update product associations based on new OCR text\n6. Update metadata relationships\n\nArgs:\n    image_id: UUID of the image to reprocess\n    workspace_context: Current workspace context\n    current_user: Current admin user\n    \nReturns:\n    Comprehensive results of the reprocessing operation",
        "operationId": "reprocess_image_ocr_api_admin_images__image_id__process_ocr_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "image_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Image Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/rag/documents/upload": {
      "post": {
        "tags": [
          "RAG"
        ],
        "summary": "Upload Document",
        "description": "**üéØ CONSOLIDATED UPLOAD ENDPOINT - Single Entry Point for All Upload Scenarios**\n\nThis endpoint replaces:\n- `/api/documents/process` (simple extraction)\n- `/api/documents/process-url` (URL processing)\n- `/api/documents/upload` (old unified upload)\n\n## üìã Processing Modes\n\n### Quick Mode (`processing_mode=\"quick\"`)\n- Fast extraction without RAG\n- No embeddings generated\n- No product discovery\n- Use for: Simple text/image extraction\n\n### Standard Mode (`processing_mode=\"standard\"`) - DEFAULT\n- Full RAG pipeline\n- Text embeddings generated\n- Product discovery and extraction\n- Use for: Normal document processing\n\n### Deep Mode (`processing_mode=\"deep\"`)\n- Complete analysis with all AI models\n- Image embeddings (CLIP)\n- Advanced product enrichment\n- Quality validation\n- Use for: High-quality catalog processing\n\n## üé® Category-Based Extraction\n\nControl what gets extracted:\n- `categories=\"products\"` - Extract only products\n- `categories=\"certificates\"` - Extract only certificates\n- `categories=\"products,certificates\"` - Extract multiple categories\n- `categories=\"all\"` - Extract everything (default)\n- `categories=\"extract_only\"` - Just extract text/images, no categorization\n\n## üåê URL Processing\n\nUpload from URL instead of file:\n- Set `file_url=\"https://example.com/catalog.pdf\"`\n- Leave `file` parameter empty\n- System downloads and processes automatically\n\n## ü§ñ AI Model Selection\n\nChoose discovery model:\n- `discovery_model=\"claude\"` - Claude Sonnet 4.5 (best quality, default)\n- `discovery_model=\"gpt\"` - GPT-5 (fast, good quality)\n- `discovery_model=\"haiku\"` - Claude Haiku 4.5 (fastest, lower cost)\n\n## üí¨ Agent Prompts\n\nUse natural language instructions:\n- `agent_prompt=\"extract all products\"` - Enhanced with product extraction details\n- `agent_prompt=\"search for NOVA\"` - Enhanced with search context\n- `agent_prompt=\"find certificates\"` - Enhanced with certificate extraction details\n\n## üìä Processing Pipeline\n\n**Stage 0: Discovery (0-15%)**\n- AI analyzes entire PDF\n- Identifies all content by category\n- Maps images to entities\n- Extracts metadata\n\n**Stage 1: Extraction (15-30%)**\n- Extracts content for specified categories\n- Filters pages based on discovery results\n\n**Stage 2: Chunking (30-50%)**\n- Creates semantic chunks\n- Tags chunks with categories\n- Generates text embeddings\n\n**Stage 3: Image Processing (50-70%)**\n- Processes images for specified categories\n- AI analysis (Llama Vision)\n- Generates image embeddings (CLIP)\n\n**Stage 4: Entity Creation (70-90%)**\n- Creates products, certificates, logos, specifications\n- Links chunks and images\n- Attaches metadata\n\n**Stage 5: Quality Enhancement (90-100%)**\n- Async quality validation\n- Advanced embeddings\n- Entity enrichment\n\n## üìù Examples\n\n### Simple Extraction (Quick Mode)\n```bash\ncurl -X POST \"/api/rag/documents/upload\" \\\n  -F \"file=@document.pdf\" \\\n  -F \"processing_mode=quick\" \\\n  -F \"categories=extract_only\"\n```\n\n### Standard Product Extraction\n```bash\ncurl -X POST \"/api/rag/documents/upload\" \\\n  -F \"file=@catalog.pdf\" \\\n  -F \"processing_mode=standard\" \\\n  -F \"categories=products\"\n```\n\n### Deep Analysis with Multiple Categories\n```bash\ncurl -X POST \"/api/rag/documents/upload\" \\\n  -F \"file=@catalog.pdf\" \\\n  -F \"processing_mode=deep\" \\\n  -F \"categories=products,certificates,logos\"\n```\n\n### URL Processing\n```bash\ncurl -X POST \"/api/rag/documents/upload\" \\\n  -F \"file_url=https://example.com/catalog.pdf\" \\\n  -F \"processing_mode=standard\" \\\n  -F \"categories=all\"\n```\n\n### Agent-Driven Extraction\n```bash\ncurl -X POST \"/api/rag/documents/upload\" \\\n  -F \"file=@catalog.pdf\" \\\n  -F \"agent_prompt=search for NOVA product\" \\\n  -F \"categories=products\"\n```\n\n## ‚úÖ Returns\n\nJob ID and status URL for monitoring progress.\nPoll `/api/rag/documents/job/{job_id}` for status updates.\n\n## üîÑ Migration from Old Endpoints\n\n**Old:** `POST /api/documents/process`\n**New:** `POST /api/rag/documents/upload` with `processing_mode=\"quick\"`\n\n**Old:** `POST /api/documents/process-url`\n**New:** `POST /api/rag/documents/upload` with `file_url` parameter\n\n**Old:** `POST /api/documents/upload`\n**New:** `POST /api/rag/documents/upload` (same endpoint, enhanced parameters)",
        "operationId": "upload_document_api_rag_documents_upload_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/Body_upload_document_api_rag_documents_upload_post"
                  }
                ],
                "title": "Body"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/rag/documents/job/{job_id}": {
      "get": {
        "tags": [
          "RAG"
        ],
        "summary": "Get Job Status",
        "description": "Get the status of an async document processing job with checkpoint information.\n\nALWAYS queries the database first as the source of truth, then optionally merges\nwith in-memory data for additional real-time details.\n\nReturns:\n    - Job status and progress (from database)\n    - Latest checkpoint information\n    - Detailed metadata including AI usage, chunks, images, products\n    - In-memory state comparison (if available)",
        "operationId": "get_job_status_api_rag_documents_job__job_id__get",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/rag/jobs/{job_id}/checkpoints": {
      "get": {
        "tags": [
          "RAG"
        ],
        "summary": "Get Job Checkpoints",
        "description": "Get all checkpoints for a job.\n\nReturns:\n    - List of all checkpoints with stage, data, and metadata\n    - Checkpoint count\n    - Processing timeline",
        "operationId": "get_job_checkpoints_api_rag_jobs__job_id__checkpoints_get",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/rag/jobs/{job_id}/restart": {
      "post": {
        "tags": [
          "RAG"
        ],
        "summary": "Restart Job From Checkpoint",
        "description": "Manually restart a job from its last checkpoint.\n\nThis endpoint allows manual recovery of stuck or failed jobs.\nThe job will resume from the last successful checkpoint.",
        "operationId": "restart_job_from_checkpoint_api_rag_jobs__job_id__restart_post",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/rag/documents/job/{job_id}/resume": {
      "post": {
        "tags": [
          "RAG"
        ],
        "summary": "Resume Job",
        "description": "Resume a job from its last checkpoint (alias for restart).\n\nThis endpoint is the same as /jobs/{job_id}/restart but with a more intuitive name.",
        "operationId": "resume_job_api_rag_documents_job__job_id__resume_post",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/rag/documents/jobs": {
      "get": {
        "tags": [
          "RAG"
        ],
        "summary": "List Jobs",
        "description": "List all background jobs with optional filtering and sorting.\n\nArgs:\n    limit: Maximum number of jobs to return (default: 10)\n    offset: Number of jobs to skip (default: 0)\n    status_filter: Filter by status (pending, processing, completed, failed, interrupted)\n    sort: Sort order (created_at:desc, created_at:asc, progress:desc, progress:asc)\n\nReturns:\n    List of jobs with status, progress, and metadata",
        "operationId": "list_jobs_api_rag_documents_jobs_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 10,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "status_filter",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status Filter"
            }
          },
          {
            "name": "sort",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "created_at:desc",
              "title": "Sort"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/rag/chunks": {
      "get": {
        "tags": [
          "RAG"
        ],
        "summary": "Get Chunks",
        "description": "Get chunks for a document.\n\nArgs:\n    document_id: Document ID to filter chunks\n    limit: Maximum number of chunks to return\n    offset: Pagination offset\n\nReturns:\n    List of chunks with metadata and embeddings",
        "operationId": "get_chunks_api_rag_chunks_get",
        "parameters": [
          {
            "name": "document_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by document ID",
              "title": "Document Id"
            },
            "description": "Filter by document ID"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "Maximum number of chunks to return",
              "default": 100,
              "title": "Limit"
            },
            "description": "Maximum number of chunks to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of chunks to skip",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of chunks to skip"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/rag/images": {
      "get": {
        "tags": [
          "RAG"
        ],
        "summary": "Get Images",
        "description": "Get images for a document.\n\nArgs:\n    document_id: Document ID to filter images\n    limit: Maximum number of images to return\n    offset: Pagination offset\n\nReturns:\n    List of images with metadata",
        "operationId": "get_images_api_rag_images_get",
        "parameters": [
          {
            "name": "document_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by document ID",
              "title": "Document Id"
            },
            "description": "Filter by document ID"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "Maximum number of images to return",
              "default": 100,
              "title": "Limit"
            },
            "description": "Maximum number of images to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of images to skip",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of images to skip"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/rag/products": {
      "get": {
        "tags": [
          "RAG"
        ],
        "summary": "Get Products",
        "description": "Get products for a document.\n\nArgs:\n    document_id: Document ID to filter products\n    limit: Maximum number of products to return\n    offset: Pagination offset\n\nReturns:\n    List of products with metadata",
        "operationId": "get_products_api_rag_products_get",
        "parameters": [
          {
            "name": "document_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by document ID",
              "title": "Document Id"
            },
            "description": "Filter by document ID"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "Maximum number of products to return",
              "default": 100,
              "title": "Limit"
            },
            "description": "Maximum number of products to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of products to skip",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of products to skip"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/rag/embeddings": {
      "get": {
        "tags": [
          "RAG"
        ],
        "summary": "Get Embeddings",
        "description": "Get embeddings for a document.\n\nArgs:\n    document_id: Document ID to filter embeddings\n    embedding_type: Type of embedding (text, visual, multimodal, color, texture, application)\n    limit: Maximum number of embeddings to return\n    offset: Pagination offset\n\nReturns:\n    List of embeddings with metadata including:\n    - id: Embedding ID\n    - document_id: Source document\n    - chunk_id: Associated chunk (for text embeddings)\n    - image_id: Associated image (for visual embeddings)\n    - embedding_type: Type of embedding\n    - embedding_model: Model used to generate embedding\n    - embedding_dimensions: Vector dimensions\n    - metadata: Additional metadata (quality scores, confidence, etc.)",
        "operationId": "get_embeddings_api_rag_embeddings_get",
        "parameters": [
          {
            "name": "document_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by document ID",
              "title": "Document Id"
            },
            "description": "Filter by document ID"
          },
          {
            "name": "embedding_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by embedding type (text, visual, multimodal, color, texture, application)",
              "title": "Embedding Type"
            },
            "description": "Filter by embedding type (text, visual, multimodal, color, texture, application)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "Maximum number of embeddings to return",
              "default": 100,
              "title": "Limit"
            },
            "description": "Maximum number of embeddings to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of embeddings to skip",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of embeddings to skip"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/rag/query": {
      "post": {
        "tags": [
          "RAG"
        ],
        "summary": "Query Documents",
        "description": "**ü§ñ CONSOLIDATED QUERY ENDPOINT - Text-Based RAG Query**\n\nThis endpoint replaces:\n- `/api/documents/{id}/query` ‚Üí Use with `document_ids` filter\n- `/api/documents/{id}/summarize` ‚Üí Use with summarization prompt\n\n## üéØ Query Capabilities\n\n### Text Query (Implemented) ‚úÖ\n- Pure text-based RAG with advanced retrieval\n- Semantic search with reranking\n- Best for: Factual questions, information retrieval, summarization\n\n## üìù Examples\n\n### Text Query (Default)\n```bash\ncurl -X POST \"/api/rag/query\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"query\": \"What are the dimensions of the NOVA product?\",\n    \"top_k\": 5\n  }'\n```\n\n### Document-Specific Query\n```bash\ncurl -X POST \"/api/rag/query\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"query\": \"Summarize this document\",\n    \"document_ids\": [\"doc-123\"],\n    \"top_k\": 20\n  }'\n```\n\n## üîÑ Migration from Old Endpoints\n\n**Old:** `POST /api/documents/{id}/query`\n**New:** `POST /api/rag/query` with `document_ids` filter\n\n**Old:** `POST /api/documents/{id}/summarize`\n**New:** `POST /api/rag/query` with summarization prompt",
        "operationId": "query_documents_api_rag_query_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/app__api__rag_routes__QueryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/app__api__rag_routes__QueryResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/rag/chat": {
      "post": {
        "tags": [
          "RAG"
        ],
        "summary": "Chat With Documents",
        "description": "Conversational interface for document Q&A.\n\nThis endpoint maintains conversation context and provides\ncontextual responses based on the document collection.",
        "operationId": "chat_with_documents_api_rag_chat_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/rag/search": {
      "post": {
        "tags": [
          "RAG"
        ],
        "summary": "Search Documents",
        "description": "**üîç CONSOLIDATED SEARCH ENDPOINT - Single Entry Point for All Search Strategies**\n\nThis endpoint replaces:\n- `/api/search/semantic` ‚Üí Use `strategy=\"semantic\"`\n- `/api/search/similarity` ‚Üí Use `strategy=\"vector\"`\n- `/api/unified-search` ‚Üí Use this endpoint\n\n## üéØ Search Strategies (Implemented)\n\n### Semantic Search (`strategy=\"semantic\"`) - DEFAULT ‚úÖ\n- Natural language understanding with MMR (Maximal Marginal Relevance)\n- Context-aware matching with diversity\n- Best for: Text queries, conceptual search, diverse results\n\n### Vector Search (`strategy=\"vector\"`) ‚úÖ\n- Pure vector similarity (cosine distance)\n- Fast and efficient, no diversity filtering\n- Best for: Finding most similar documents, precise matching\n\n## üìù Examples\n\n### Semantic Search (Default)\n```bash\ncurl -X POST \"/api/rag/search\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"query\": \"modern minimalist furniture\", \"top_k\": 10}'\n```\n\n### Vector Similarity Search\n```bash\ncurl -X POST \"/api/rag/search?strategy=vector\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"query\": \"oak wood flooring\", \"top_k\": 5}'\n```\n\n## üîÑ Migration from Old Endpoints\n\n**Old:** `POST /api/search/semantic`\n**New:** `POST /api/rag/search?strategy=semantic`\n\n**Old:** `POST /api/search/similarity`\n**New:** `POST /api/rag/search?strategy=vector`\n\n**Old:** `POST /api/unified-search`\n**New:** `POST /api/rag/search` (same functionality, clearer naming)",
        "operationId": "search_documents_api_rag_search_post",
        "parameters": [
          {
            "name": "strategy",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Search strategy: 'semantic' (default), 'vector'",
              "default": "semantic",
              "title": "Strategy"
            },
            "description": "Search strategy: 'semantic' (default), 'vector'"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/app__api__rag_routes__SearchRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/app__api__rag_routes__SearchResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/rag/documents/documents/{document_id}/content": {
      "get": {
        "tags": [
          "RAG"
        ],
        "summary": "Get Document Content",
        "description": "Get complete document content with all AI analysis results.\n\nReturns comprehensive document data including:\n- Document metadata\n- All chunks with embeddings\n- All images with AI analysis (CLIP, Llama, Claude)\n- All products created from the document\n- Complete AI model usage statistics",
        "operationId": "get_document_content_api_rag_documents_documents__document_id__content_get",
        "parameters": [
          {
            "name": "document_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Document Id"
            }
          },
          {
            "name": "include_chunks",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include document chunks",
              "default": true,
              "title": "Include Chunks"
            },
            "description": "Include document chunks"
          },
          {
            "name": "include_images",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include document images",
              "default": true,
              "title": "Include Images"
            },
            "description": "Include document images"
          },
          {
            "name": "include_products",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include products created from document",
              "default": false,
              "title": "Include Products"
            },
            "description": "Include products created from document"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/rag/documents": {
      "get": {
        "tags": [
          "RAG"
        ],
        "summary": "List Documents",
        "description": "List and filter documents in the collection.\n\nThis endpoint provides paginated access to the document collection\nwith optional filtering by search terms and tags.",
        "operationId": "list_documents_api_rag_documents_get",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Page number",
              "default": 1,
              "title": "Page"
            },
            "description": "Page number"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Page size",
              "default": 20,
              "title": "Page Size"
            },
            "description": "Page size"
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Search term for filtering",
              "title": "Search"
            },
            "description": "Search term for filtering"
          },
          {
            "name": "tags",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Comma-separated tags for filtering",
              "title": "Tags"
            },
            "description": "Comma-separated tags for filtering"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DocumentListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/rag/documents/{document_id}": {
      "delete": {
        "tags": [
          "RAG"
        ],
        "summary": "Delete Document",
        "description": "Delete a document and its associated embeddings.\n\nThis endpoint removes a document from the collection and\ncleans up all associated data including embeddings and chunks.",
        "operationId": "delete_document_api_rag_documents__document_id__delete",
        "parameters": [
          {
            "name": "document_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Document Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/rag/health": {
      "get": {
        "tags": [
          "RAG"
        ],
        "summary": "Rag Health Check",
        "description": "Health check for RAG services.\n\nThis endpoint checks the health of all RAG-related services\nincluding LlamaIndex, embedding service, and vector store.",
        "operationId": "rag_health_check_api_rag_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthCheckResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/rag/stats": {
      "get": {
        "tags": [
          "RAG"
        ],
        "summary": "Get Rag Statistics",
        "description": "Get RAG system statistics.\n\nThis endpoint provides statistics about the RAG system including\ndocument counts, embedding statistics, and performance metrics.",
        "operationId": "get_rag_statistics_api_rag_stats_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/rag/search/mmr": {
      "post": {
        "tags": [
          "RAG"
        ],
        "summary": "Mmr Search",
        "description": "Perform MMR (Maximal Marginal Relevance) search for diverse results.\n\nThis endpoint implements MMR search to provide diverse, non-redundant results\nby balancing relevance and diversity using the lambda parameter.",
        "operationId": "mmr_search_api_rag_search_mmr_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MMRSearchRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MMRSearchResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/rag/search/advanced": {
      "post": {
        "tags": [
          "RAG"
        ],
        "summary": "Advanced Query Search",
        "description": "Perform advanced query search with optimization and expansion.\n\nThis endpoint provides advanced query processing including query expansion,\nrewriting, and optimization based on query type and search parameters.",
        "operationId": "advanced_query_search_api_rag_search_advanced_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdvancedQueryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdvancedQueryResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/rag/job/{job_id}/ai-tracking": {
      "get": {
        "tags": [
          "RAG"
        ],
        "summary": "Get Job Ai Tracking",
        "description": "Get detailed AI model tracking information for a job.\n\nReturns comprehensive metrics on:\n- Which AI models were used (LLAMA, Anthropic, CLIP, OpenAI)\n- Confidence scores and results\n- Token usage and processing time\n- Success/failure rates\n- Per-stage breakdown",
        "operationId": "get_job_ai_tracking_api_rag_job__job_id__ai_tracking_get",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/rag/job/{job_id}/ai-tracking/stage/{stage}": {
      "get": {
        "tags": [
          "RAG"
        ],
        "summary": "Get Job Ai Tracking By Stage",
        "description": "Get AI model tracking information for a specific processing stage.\n\nArgs:\n    job_id: Job identifier\n    stage: Processing stage (classification, boundary_detection, embedding, etc.)\n\nReturns:\n    Detailed metrics for the specified stage",
        "operationId": "get_job_ai_tracking_by_stage_api_rag_job__job_id__ai_tracking_stage__stage__get",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          },
          {
            "name": "stage",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Stage"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/rag/job/{job_id}/ai-tracking/model/{model_name}": {
      "get": {
        "tags": [
          "RAG"
        ],
        "summary": "Get Job Ai Tracking By Model",
        "description": "Get AI model tracking information for a specific AI model.\n\nArgs:\n    job_id: Job identifier\n    model_name: AI model name (LLAMA, Anthropic, CLIP, OpenAI)\n\nReturns:\n    Statistics for the specified AI model",
        "operationId": "get_job_ai_tracking_by_model_api_rag_job__job_id__ai_tracking_model__model_name__get",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          },
          {
            "name": "model_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Model Name"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/semantic-analysis": {
      "post": {
        "tags": [
          "AI Analysis"
        ],
        "summary": "Perform semantic analysis on material images",
        "description": "Analyze material images using TogetherAI's LLaMA Vision model for semantic descriptions and material identification.",
        "operationId": "semantic_analysis_api_semantic_analysis_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SemanticAnalysisAPIRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SemanticAnalysisAPIResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/health": {
      "get": {
        "tags": [
          "AI Analysis"
        ],
        "summary": "Health check for TogetherAI service",
        "description": "Check the health and availability of the TogetherAI service.",
        "operationId": "health_check_api_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/models": {
      "get": {
        "tags": [
          "AI Analysis"
        ],
        "summary": "Get available TogetherAI models",
        "description": "Retrieve information about available TogetherAI models and their capabilities.",
        "operationId": "get_models_api_models_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/anthropic/images/validate": {
      "post": {
        "tags": [
          "Anthropic Claude"
        ],
        "summary": "Validate Image With Claude",
        "description": "Validate an image using Claude 3.5 Sonnet Vision.\n\nAnalyzes image quality, content, and matches to product groups.",
        "operationId": "validate_image_with_claude_api_v1_anthropic_images_validate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ImageValidationRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ImageValidationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/anthropic/products/enrich": {
      "post": {
        "tags": [
          "Anthropic Claude"
        ],
        "summary": "Enrich Product With Claude",
        "description": "Enrich product data using Claude 3.5 Sonnet.\n\nGenerates descriptions, extracts specifications, and identifies related products.",
        "operationId": "enrich_product_with_claude_api_v1_anthropic_products_enrich_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductEnrichmentRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductEnrichmentResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/anthropic/test/claude-integration": {
      "post": {
        "tags": [
          "Anthropic Claude"
        ],
        "summary": "Test Claude Integration",
        "description": "Test Claude Vision API integration.",
        "operationId": "test_claude_integration_api_v1_anthropic_test_claude_integration_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/products/create-from-chunks": {
      "post": {
        "tags": [
          "products"
        ],
        "summary": "Create Products From Chunks",
        "description": "Create products from document chunks using two-stage classification.\n\nThis endpoint uses an advanced two-stage classification system:\n- Stage 1: Fast text-only classification using Claude 4.5 Haiku for initial filtering\n- Stage 2: Deep enrichment using Claude 4.5 Sonnet for confirmed products\n\nThe system provides significant performance improvements:\n- 60% faster processing through intelligent model selection\n- Reduced API costs by using Haiku for initial filtering\n- Higher accuracy through Sonnet enrichment of confirmed candidates\n- Batch processing reduces API call overhead\n\nArgs:\n    request: Product creation request parameters\n    supabase_client: Supabase client dependency\n    \nReturns:\n    ProductCreationResponse: Detailed results including timing metrics\n    \nRaises:\n    HTTPException: If the operation fails",
        "operationId": "create_products_from_chunks_api_products_create_from_chunks_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductCreationRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductCreationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/products/create-from-layout": {
      "post": {
        "tags": [
          "products"
        ],
        "summary": "Create Products From Layout",
        "description": "Create products from layout-based candidates (legacy method).\n\nThis endpoint uses the original layout-based product detection method\nfor comparison with the new two-stage classification system.\n\nArgs:\n    request: Product creation request parameters\n    supabase_client: Supabase client dependency\n    \nReturns:\n    ProductCreationResponse: Results from layout-based creation\n    \nRaises:\n    HTTPException: If the operation fails",
        "operationId": "create_products_from_layout_api_products_create_from_layout_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductCreationRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductCreationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/products/health": {
      "get": {
        "tags": [
          "products"
        ],
        "summary": "Products Health Check",
        "description": "Health check endpoint for the products API.\n\nReturns:\n    Dict[str, Any]: Health status information",
        "operationId": "products_health_check_api_products_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Products Health Check Api Products Health Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/document-entities/": {
      "get": {
        "tags": [
          "document-entities"
        ],
        "summary": "Get Document Entities",
        "description": "Get all document entities for a workspace.\n\nSupports filtering by:\n- entity_type: certificate, logo, specification, marketing, bank_statement\n- factory_name: Filter by specific factory\n- factory_group: Filter by factory group\n\nExample agentic query: \"Get all certifications for Castell√≥n Factory\"\n‚Üí GET /api/document-entities?workspace_id=xxx&entity_type=certificate&factory_name=Castell√≥n Factory",
        "operationId": "get_document_entities_api_document_entities__get",
        "parameters": [
          {
            "name": "workspace_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Workspace ID",
              "title": "Workspace Id"
            },
            "description": "Workspace ID"
          },
          {
            "name": "entity_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by entity type (certificate, logo, specification, etc.)",
              "title": "Entity Type"
            },
            "description": "Filter by entity type (certificate, logo, specification, etc.)"
          },
          {
            "name": "factory_name",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by factory name",
              "title": "Factory Name"
            },
            "description": "Filter by factory name"
          },
          {
            "name": "factory_group",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by factory group",
              "title": "Factory Group"
            },
            "description": "Filter by factory group"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "description": "Maximum number of entities to return",
              "default": 100,
              "title": "Limit"
            },
            "description": "Maximum number of entities to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "description": "Number of entities to skip",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of entities to skip"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/DocumentEntityResponse"
                  },
                  "title": "Response Get Document Entities Api Document Entities  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/document-entities/{entity_id}": {
      "get": {
        "tags": [
          "document-entities"
        ],
        "summary": "Get Document Entity",
        "description": "Get a specific document entity by ID.",
        "operationId": "get_document_entity_api_document_entities__entity_id__get",
        "parameters": [
          {
            "name": "entity_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Entity Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DocumentEntityResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/document-entities/product/{product_id}": {
      "get": {
        "tags": [
          "document-entities"
        ],
        "summary": "Get Entities For Product",
        "description": "Get all document entities linked to a specific product.\n\nExample agentic query: \"Get certifications for product NOVA\"\n‚Üí First get product ID for NOVA, then:\n‚Üí GET /api/document-entities/product/{product_id}?entity_type=certificate",
        "operationId": "get_entities_for_product_api_document_entities_product__product_id__get",
        "parameters": [
          {
            "name": "product_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Product Id"
            }
          },
          {
            "name": "entity_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by entity type",
              "title": "Entity Type"
            },
            "description": "Filter by entity type"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/DocumentEntityResponse"
                  },
                  "title": "Response Get Entities For Product Api Document Entities Product  Product Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/document-entities/factory/{factory_name}": {
      "get": {
        "tags": [
          "document-entities"
        ],
        "summary": "Get Entities By Factory",
        "description": "Get all document entities for a specific factory.\n\nExample agentic query: \"Get all certifications for Castell√≥n Factory\"\n‚Üí GET /api/document-entities/factory/Castell√≥n Factory?entity_type=certificate",
        "operationId": "get_entities_by_factory_api_document_entities_factory__factory_name__get",
        "parameters": [
          {
            "name": "factory_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Factory Name"
            }
          },
          {
            "name": "entity_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by entity type",
              "title": "Entity Type"
            },
            "description": "Filter by entity type"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/DocumentEntityResponse"
                  },
                  "title": "Response Get Entities By Factory Api Document Entities Factory  Factory Name  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/document-entities/relationships/product/{product_id}": {
      "get": {
        "tags": [
          "document-entities"
        ],
        "summary": "Get Product Document Relationships",
        "description": "Get all document entity relationships for a specific product.",
        "operationId": "get_product_document_relationships_api_document_entities_relationships_product__product_id__get",
        "parameters": [
          {
            "name": "product_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Product Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProductDocumentRelationshipResponse"
                  },
                  "title": "Response Get Product Document Relationships Api Document Entities Relationships Product  Product Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/embeddings/clip-image": {
      "post": {
        "tags": [
          "Embeddings"
        ],
        "summary": "Generate Clip Image Embedding",
        "description": "Generate CLIP embedding for an image.\n\nThis endpoint:\n- Accepts base64 encoded image data\n- Generates 512-dimensional CLIP embedding\n- Returns normalized embedding vector",
        "operationId": "generate_clip_image_embedding_api_embeddings_clip_image_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ClipImageRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EmbeddingResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/embeddings/clip-text": {
      "post": {
        "tags": [
          "Embeddings"
        ],
        "summary": "Generate Clip Text Embedding",
        "description": "Generate CLIP embedding for text.\n\nThis endpoint:\n- Accepts text input\n- Generates 512-dimensional CLIP text embedding\n- Returns normalized embedding vector",
        "operationId": "generate_clip_text_embedding_api_embeddings_clip_text_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ClipTextRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EmbeddingResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/embeddings/health": {
      "get": {
        "tags": [
          "Embeddings"
        ],
        "summary": "Health Check",
        "description": "Health check endpoint for embeddings service.",
        "operationId": "health_check_api_embeddings_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/monitoring/supabase-status": {
      "get": {
        "tags": [
          "monitoring"
        ],
        "summary": "Get Supabase Status",
        "description": "Get current Supabase resource usage and status.\n\nReturns:\n    - Database statistics (row counts per table)\n    - Storage statistics (size per bucket)\n    - Resource limits and usage percentages\n    - Warnings if approaching limits",
        "operationId": "get_supabase_status_api_monitoring_supabase_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Supabase Status Api Monitoring Supabase Status Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/monitoring/health": {
      "get": {
        "tags": [
          "monitoring"
        ],
        "summary": "Health Check",
        "description": "Quick health check for monitoring systems.\n\nReturns:\n    - Overall system health\n    - Database connectivity\n    - Storage connectivity",
        "operationId": "health_check_api_monitoring_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Health Check Api Monitoring Health Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/monitoring/storage-estimate": {
      "get": {
        "tags": [
          "monitoring"
        ],
        "summary": "Estimate Storage For Upload",
        "description": "Estimate if there's enough storage for a PDF upload.\n\nArgs:\n    file_size_mb: Size of PDF file in MB\n    estimated_images: Estimated number of images to extract\n    \nReturns:\n    - Whether upload is safe\n    - Estimated storage needed\n    - Current available storage",
        "operationId": "estimate_storage_for_upload_api_monitoring_storage_estimate_get",
        "parameters": [
          {
            "name": "file_size_mb",
            "in": "query",
            "required": true,
            "schema": {
              "type": "number",
              "title": "File Size Mb"
            }
          },
          {
            "name": "estimated_images",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "title": "Estimated Images"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Estimate Storage For Upload Api Monitoring Storage Estimate Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/admin/chunk-quality/metrics": {
      "get": {
        "tags": [
          "admin",
          "chunk-quality"
        ],
        "summary": "Get Chunk Quality Metrics",
        "description": "Get comprehensive chunk quality metrics.\n\nReturns statistics about:\n- Total chunks created\n- Duplicates prevented (exact and semantic)\n- Quality rejections\n- Quality score distribution\n- Flagged chunks status",
        "operationId": "get_chunk_quality_metrics_admin_chunk_quality_metrics_get",
        "parameters": [
          {
            "name": "workspace_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Workspace Id"
            }
          },
          {
            "name": "document_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Document Id"
            }
          },
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "description": "Number of days to analyze",
              "default": 30,
              "title": "Days"
            },
            "description": "Number of days to analyze"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChunkQualityMetrics"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/admin/chunk-quality/flagged": {
      "get": {
        "tags": [
          "admin",
          "chunk-quality"
        ],
        "summary": "Get Flagged Chunks",
        "description": "Get list of flagged chunks for review.\n\nFilters:\n- workspace_id: Filter by workspace\n- document_id: Filter by document\n- reviewed: Filter by review status (None = all, True = reviewed, False = pending)\n- limit: Maximum number of results",
        "operationId": "get_flagged_chunks_admin_chunk_quality_flagged_get",
        "parameters": [
          {
            "name": "workspace_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Workspace Id"
            }
          },
          {
            "name": "document_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Document Id"
            }
          },
          {
            "name": "reviewed",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Reviewed"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "default": 50,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/FlaggedChunk"
                  },
                  "title": "Response Get Flagged Chunks Admin Chunk Quality Flagged Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/admin/chunk-quality/flagged/{flag_id}/review": {
      "post": {
        "tags": [
          "admin",
          "chunk-quality"
        ],
        "summary": "Review Flagged Chunk",
        "description": "Review a flagged chunk.\n\nActions:\n- approve: Mark chunk as acceptable, clear flag\n- reject: Keep flag, mark as reviewed\n- delete_chunk: Delete the chunk and clear flag",
        "operationId": "review_flagged_chunk_admin_chunk_quality_flagged__flag_id__review_post",
        "parameters": [
          {
            "name": "flag_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Flag Id"
            }
          },
          {
            "name": "reviewer_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Reviewer Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReviewAction"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/admin/chunk-quality/distribution": {
      "get": {
        "tags": [
          "admin",
          "chunk-quality"
        ],
        "summary": "Get Quality Distribution",
        "description": "Get detailed quality score distribution with histogram data.",
        "operationId": "get_quality_distribution_admin_chunk_quality_distribution_get",
        "parameters": [
          {
            "name": "workspace_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Workspace Id"
            }
          },
          {
            "name": "document_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Document Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai-metrics/summary": {
      "get": {
        "tags": [
          "AI Metrics"
        ],
        "summary": "Get Ai Metrics Summary",
        "description": "Get comprehensive AI metrics summary.\n\nReturns:\n- Summary statistics (total calls, cost, tokens, latency, confidence, fallback rate)\n- Model usage breakdown\n- Task breakdown\n- Confidence score distribution\n- Recent AI calls",
        "operationId": "get_ai_metrics_summary_api_v1_ai_metrics_summary_get",
        "parameters": [
          {
            "name": "time_period",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Time period: 1h, 24h, 7d, 30d, all",
              "default": "24h",
              "title": "Time Period"
            },
            "description": "Time period: 1h, 24h, 7d, 30d, all"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AIMetricsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai-metrics/job/{job_id}": {
      "get": {
        "tags": [
          "AI Metrics"
        ],
        "summary": "Get Job Ai Metrics",
        "description": "Get AI metrics for a specific job (PDF processing, etc.).",
        "operationId": "get_job_ai_metrics_api_v1_ai_metrics_job__job_id__get",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai-services/classify-document": {
      "post": {
        "tags": [
          "AI Services"
        ],
        "summary": "Classify Document",
        "description": "Classify document content into categories.\n\nCategories:\n- product: Product information, specifications, features\n- supporting: Technical details, certifications, guides\n- administrative: Company info, legal, contact\n- transitional: TOC, headers, footers, navigation",
        "operationId": "classify_document_api_v1_ai_services_classify_document_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ClassifyRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai-services/classify-batch": {
      "post": {
        "tags": [
          "AI Services"
        ],
        "summary": "Classify Batch",
        "description": "Classify multiple document contents in parallel.\n\nEfficient for processing multiple sections at once.",
        "operationId": "classify_batch_api_v1_ai_services_classify_batch_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ClassifyBatchRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai-services/detect-boundaries": {
      "post": {
        "tags": [
          "AI Services"
        ],
        "summary": "Detect Boundaries",
        "description": "Detect product boundaries in document chunks.\n\nUses semantic similarity, structural markers, and page breaks\nto identify where one product ends and another begins.",
        "operationId": "detect_boundaries_api_v1_ai_services_detect_boundaries_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DetectBoundariesRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai-services/group-by-product": {
      "post": {
        "tags": [
          "AI Services"
        ],
        "summary": "Group By Product",
        "description": "Detect boundaries and group chunks into products.\n\nReturns product groups ready for extraction.",
        "operationId": "group_by_product_api_v1_ai_services_group_by_product_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DetectBoundariesRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai-services/validate-product": {
      "post": {
        "tags": [
          "AI Services"
        ],
        "summary": "Validate Product",
        "description": "Validate product extraction quality.\n\nChecks:\n- Minimum content requirements\n- Substantive content (not just headers/footers)\n- Distinguishing features\n- Associated assets (images, specs)\n- Semantic coherence",
        "operationId": "validate_product_api_v1_ai_services_validate_product_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ValidateProductRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai-services/consensus-validate": {
      "post": {
        "tags": [
          "AI Services"
        ],
        "summary": "Consensus Validate",
        "description": "Validate extraction using multi-model consensus.\n\nRuns 2-3 models in parallel and uses weighted voting\nto determine the most accurate result.\n\nCritical for:\n- Product name extraction\n- Material classification\n- Safety information\n- Compliance data\n- Technical specifications\n- Pricing data",
        "operationId": "consensus_validate_api_v1_ai_services_consensus_validate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConsensusValidateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai-services/consensus/is-critical/{task_type}": {
      "get": {
        "tags": [
          "AI Services"
        ],
        "summary": "Check If Critical",
        "description": "Check if a task type requires consensus validation.\n\nReturns True for critical tasks like product_name_extraction,\nmaterial_classification, safety_information, etc.",
        "operationId": "check_if_critical_api_v1_ai_services_consensus_is_critical__task_type__get",
        "parameters": [
          {
            "name": "task_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Type"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai-services/escalation/stats": {
      "get": {
        "tags": [
          "AI Services"
        ],
        "summary": "Get Escalation Stats",
        "description": "Get escalation engine statistics.\n\nReturns metrics on:\n- Total escalations\n- Successful escalations\n- Failed escalations\n- Cost saved/spent",
        "operationId": "get_escalation_stats_api_v1_ai_services_escalation_stats_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/ai-services/process-pdf-enhanced": {
      "post": {
        "tags": [
          "AI Services"
        ],
        "summary": "Process Pdf Enhanced",
        "description": "Process PDF with all enhanced AI services.\n\nThis endpoint is for testing the full integration.\nIn production, use the main PDF processing endpoint.",
        "operationId": "process_pdf_enhanced_api_v1_ai_services_process_pdf_enhanced_post",
        "parameters": [
          {
            "name": "document_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Document Id"
            }
          },
          {
            "name": "job_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai-services/health": {
      "get": {
        "tags": [
          "AI Services"
        ],
        "summary": "Health Check",
        "description": "Health check for AI services.",
        "operationId": "health_check_api_v1_ai_services_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/admin/extraction-prompts": {
      "get": {
        "tags": [
          "Admin - Prompts"
        ],
        "summary": "List Prompts",
        "description": "List all prompts for workspace\n\nQuery Parameters:\n- workspace_id: Workspace ID (required)\n- stage: Filter by stage (optional)\n- category: Filter by category (optional)",
        "operationId": "list_prompts_admin_extraction_prompts_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "workspace_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Workspace Id"
            }
          },
          {
            "name": "stage",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Stage"
            }
          },
          {
            "name": "category",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Category"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PromptResponse"
                  },
                  "title": "Response List Prompts Admin Extraction Prompts Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/admin/extraction-prompts/{stage}/{category}": {
      "get": {
        "tags": [
          "Admin - Prompts"
        ],
        "summary": "Get Prompt",
        "description": "Get specific prompt by stage and category",
        "operationId": "get_prompt_admin_extraction_prompts__stage___category__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "stage",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Stage"
            }
          },
          {
            "name": "category",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Category"
            }
          },
          {
            "name": "workspace_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Workspace Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PromptResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Admin - Prompts"
        ],
        "summary": "Update Prompt",
        "description": "Update prompt with audit trail\n\nPath Parameters:\n- stage: Extraction stage (discovery, chunking, image_analysis, entity_creation)\n- category: Content category (products, certificates, logos, specifications)\n\nQuery Parameters:\n- workspace_id: Workspace ID\n\nBody:\n- prompt_template: New prompt template\n- system_prompt: Optional system prompt\n- change_reason: Reason for the change",
        "operationId": "update_prompt_admin_extraction_prompts__stage___category__put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "stage",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Stage"
            }
          },
          {
            "name": "category",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Category"
            }
          },
          {
            "name": "workspace_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Workspace Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePromptRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PromptResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/admin/extraction-prompts/history/{prompt_id}": {
      "get": {
        "tags": [
          "Admin - Prompts"
        ],
        "summary": "Get Prompt History",
        "description": "Get change history for a prompt",
        "operationId": "get_prompt_history_admin_extraction_prompts_history__prompt_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "prompt_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Prompt Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PromptHistoryResponse"
                  },
                  "title": "Response Get Prompt History Admin Extraction Prompts History  Prompt Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/admin/extraction-prompts/test": {
      "post": {
        "tags": [
          "Admin - Prompts"
        ],
        "summary": "Test Prompt",
        "description": "Test a prompt before saving\n\nBody:\n- stage: Extraction stage\n- category: Content category\n- prompt_template: Prompt to test\n- test_content: Sample content to test with",
        "operationId": "test_prompt_admin_extraction_prompts_test_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TestPromptRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TestPromptResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/admin/extraction-config": {
      "get": {
        "tags": [
          "Admin - Config"
        ],
        "summary": "Get Extraction Config",
        "description": "Get extraction configuration for workspace",
        "operationId": "get_extraction_config_admin_extraction_config_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "workspace_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Workspace Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExtractionConfigResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Admin - Config"
        ],
        "summary": "Update Extraction Config",
        "description": "Update extraction configuration\n\nQuery Parameters:\n- workspace_id: Workspace ID\n\nBody: Configuration fields to update",
        "operationId": "update_extraction_config_admin_extraction_config_put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "workspace_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Workspace Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateExtractionConfigRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExtractionConfigResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AIMetricsResponse": {
        "properties": {
          "summary": {
            "$ref": "#/components/schemas/AIMetricsSummary"
          },
          "model_usage": {
            "items": {
              "$ref": "#/components/schemas/ModelUsageStats"
            },
            "type": "array",
            "title": "Model Usage"
          },
          "task_breakdown": {
            "items": {
              "$ref": "#/components/schemas/TaskBreakdown"
            },
            "type": "array",
            "title": "Task Breakdown"
          },
          "confidence_distribution": {
            "items": {
              "$ref": "#/components/schemas/ConfidenceDistribution"
            },
            "type": "array",
            "title": "Confidence Distribution"
          },
          "recent_calls": {
            "items": {
              "type": "object"
            },
            "type": "array",
            "title": "Recent Calls"
          }
        },
        "type": "object",
        "required": [
          "summary",
          "model_usage",
          "task_breakdown",
          "confidence_distribution",
          "recent_calls"
        ],
        "title": "AIMetricsResponse"
      },
      "AIMetricsSummary": {
        "properties": {
          "total_calls": {
            "type": "integer",
            "title": "Total Calls"
          },
          "total_cost": {
            "type": "number",
            "title": "Total Cost"
          },
          "total_tokens": {
            "type": "integer",
            "title": "Total Tokens"
          },
          "average_latency_ms": {
            "type": "number",
            "title": "Average Latency Ms"
          },
          "average_confidence": {
            "type": "number",
            "title": "Average Confidence"
          },
          "fallback_rate": {
            "type": "number",
            "title": "Fallback Rate"
          },
          "time_period": {
            "type": "string",
            "title": "Time Period"
          }
        },
        "type": "object",
        "required": [
          "total_calls",
          "total_cost",
          "total_tokens",
          "average_latency_ms",
          "average_confidence",
          "fallback_rate",
          "time_period"
        ],
        "title": "AIMetricsSummary"
      },
      "AdvancedQueryRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 2000,
            "minLength": 1,
            "title": "Query",
            "description": "Query text"
          },
          "query_type": {
            "type": "string",
            "pattern": "^(factual|analytical|conversational|boolean|fuzzy|semantic)$",
            "title": "Query Type",
            "description": "Type of query",
            "default": "semantic"
          },
          "top_k": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 50,
                "minimum": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Top K",
            "description": "Number of results to retrieve",
            "default": 10
          },
          "enable_expansion": {
            "type": "boolean",
            "title": "Enable Expansion",
            "description": "Enable query expansion",
            "default": true
          },
          "enable_rewriting": {
            "type": "boolean",
            "title": "Enable Rewriting",
            "description": "Enable query rewriting",
            "default": true
          },
          "similarity_threshold": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1,
                "minimum": 0
              },
              {
                "type": "null"
              }
            ],
            "title": "Similarity Threshold",
            "description": "Similarity threshold",
            "default": 0.6
          },
          "document_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Document Ids",
            "description": "Filter by specific document IDs"
          },
          "metadata_filters": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata Filters",
            "description": "Metadata-based filters"
          },
          "search_operator": {
            "type": "string",
            "pattern": "^(AND|OR|NOT)$",
            "title": "Search Operator",
            "description": "Search operator for multiple terms",
            "default": "AND"
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "AdvancedQueryRequest",
        "description": "Request model for advanced query with optimization."
      },
      "AdvancedQueryResponse": {
        "properties": {
          "original_query": {
            "type": "string",
            "title": "Original Query",
            "description": "Original query text"
          },
          "optimized_query": {
            "type": "string",
            "title": "Optimized Query",
            "description": "Optimized/expanded query"
          },
          "query_type": {
            "type": "string",
            "title": "Query Type",
            "description": "Type of query processed"
          },
          "results": {
            "items": {
              "type": "object"
            },
            "type": "array",
            "title": "Results",
            "description": "Search results with relevance scores"
          },
          "total_results": {
            "type": "integer",
            "title": "Total Results",
            "description": "Total number of results"
          },
          "expansion_terms": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Expansion Terms",
            "description": "Terms added during query expansion"
          },
          "processing_time": {
            "type": "number",
            "title": "Processing Time",
            "description": "Query processing time in seconds"
          },
          "confidence_score": {
            "type": "number",
            "title": "Confidence Score",
            "description": "Overall confidence score"
          }
        },
        "type": "object",
        "required": [
          "original_query",
          "optimized_query",
          "query_type",
          "results",
          "total_results",
          "expansion_terms",
          "processing_time",
          "confidence_score"
        ],
        "title": "AdvancedQueryResponse",
        "description": "Response model for advanced query."
      },
      "BaseResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Indicates if the request was successful",
            "default": true
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Optional message or description"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Response timestamp"
          }
        },
        "type": "object",
        "title": "BaseResponse",
        "description": "Base response model with common fields."
      },
      "Body_extract_images_api_pdf_extract_images_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File",
            "description": "PDF file to process"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_extract_images_api_pdf_extract_images_post"
      },
      "Body_extract_markdown_api_pdf_extract_markdown_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File",
            "description": "PDF file to process"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_extract_markdown_api_pdf_extract_markdown_post"
      },
      "Body_extract_tables_api_pdf_extract_tables_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File",
            "description": "PDF file to process"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_extract_tables_api_pdf_extract_tables_post"
      },
      "Body_upload_and_analyze_image_api_images_upload_and_analyze_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          },
          "analysis_types": {
            "type": "string",
            "title": "Analysis Types",
            "default": "description,ocr"
          },
          "confidence_threshold": {
            "type": "number",
            "title": "Confidence Threshold",
            "default": 0.5
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_upload_and_analyze_image_api_images_upload_and_analyze_post"
      },
      "Body_upload_document_api_rag_documents_upload_post": {
        "properties": {
          "file": {
            "anyOf": [
              {
                "type": "string",
                "format": "binary"
              },
              {
                "type": "null"
              }
            ],
            "title": "File",
            "description": "PDF file to upload (required unless file_url is provided)"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title",
            "description": "Document title"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Document description"
          },
          "tags": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tags",
            "description": "Comma-separated tags"
          },
          "processing_mode": {
            "type": "string",
            "title": "Processing Mode",
            "description": "Processing mode: 'quick' (extract only), 'standard' (full RAG), 'deep' (complete analysis)",
            "default": "standard"
          },
          "categories": {
            "type": "string",
            "title": "Categories",
            "description": "Categories to extract: 'products', 'certificates', 'logos', 'specifications', 'all', 'extract_only'. Comma-separated.",
            "default": "all"
          },
          "file_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "File Url",
            "description": "URL to download PDF from (alternative to file upload)"
          },
          "discovery_model": {
            "type": "string",
            "title": "Discovery Model",
            "description": "AI model for discovery: 'claude' (default), 'gpt', 'haiku'",
            "default": "claude"
          },
          "chunk_size": {
            "type": "integer",
            "maximum": 4000,
            "minimum": 100,
            "title": "Chunk Size",
            "description": "Chunk size for text processing",
            "default": 1000
          },
          "chunk_overlap": {
            "type": "integer",
            "maximum": 1000,
            "minimum": 0,
            "title": "Chunk Overlap",
            "description": "Chunk overlap",
            "default": 200
          },
          "enable_prompt_enhancement": {
            "type": "boolean",
            "title": "Enable Prompt Enhancement",
            "description": "Enable AI prompt enhancement with admin customizations",
            "default": true
          },
          "agent_prompt": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Agent Prompt",
            "description": "Natural language instruction (e.g., 'extract products', 'search for NOVA')"
          },
          "workspace_id": {
            "type": "string",
            "title": "Workspace Id",
            "description": "Workspace ID",
            "default": "ffafc28b-1b8b-4b0d-b226-9f9a6154004e"
          }
        },
        "type": "object",
        "title": "Body_upload_document_api_rag_documents_upload_post"
      },
      "BoundingBox": {
        "properties": {
          "x": {
            "type": "number",
            "title": "X",
            "description": "X coordinate (normalized 0-1)"
          },
          "y": {
            "type": "number",
            "title": "Y",
            "description": "Y coordinate (normalized 0-1)"
          },
          "width": {
            "type": "number",
            "title": "Width",
            "description": "Width (normalized 0-1)"
          },
          "height": {
            "type": "number",
            "title": "Height",
            "description": "Height (normalized 0-1)"
          }
        },
        "type": "object",
        "required": [
          "x",
          "y",
          "width",
          "height"
        ],
        "title": "BoundingBox",
        "description": "Bounding box coordinates for detected objects."
      },
      "BulkProcessingRequest": {
        "properties": {
          "urls": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "maxItems": 100,
            "minItems": 1,
            "title": "Urls",
            "description": "List of document URLs to process"
          },
          "batch_size": {
            "type": "integer",
            "maximum": 20,
            "minimum": 1,
            "title": "Batch Size",
            "description": "Number of documents to process concurrently",
            "default": 5
          },
          "options": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Options",
            "description": "Processing options"
          }
        },
        "type": "object",
        "required": [
          "urls"
        ],
        "title": "BulkProcessingRequest",
        "description": "Request model for bulk document processing.",
        "example": {
          "batch_size": 5,
          "options": {
            "extract_images": true,
            "extract_text": true,
            "generate_summary": true
          },
          "urls": [
            "https://example.com/doc1.pdf",
            "https://example.com/doc2.pdf"
          ]
        }
      },
      "ChatRequest": {
        "properties": {
          "message": {
            "type": "string",
            "maxLength": 2000,
            "minLength": 1,
            "title": "Message",
            "description": "Chat message"
          },
          "conversation_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Conversation Id",
            "description": "Conversation ID for context"
          },
          "top_k": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 20,
                "minimum": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Top K",
            "description": "Number of context chunks to retrieve",
            "default": 5
          },
          "include_history": {
            "type": "boolean",
            "title": "Include History",
            "description": "Include conversation history in context",
            "default": true
          },
          "document_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Document Ids",
            "description": "Filter by specific document IDs"
          }
        },
        "type": "object",
        "required": [
          "message"
        ],
        "title": "ChatRequest",
        "description": "Request model for conversational RAG."
      },
      "ChatResponse": {
        "properties": {
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Original message"
          },
          "response": {
            "type": "string",
            "title": "Response",
            "description": "AI response"
          },
          "conversation_id": {
            "type": "string",
            "title": "Conversation Id",
            "description": "Conversation ID"
          },
          "sources": {
            "items": {
              "type": "object"
            },
            "type": "array",
            "title": "Sources",
            "description": "Source documents used"
          },
          "processing_time": {
            "type": "number",
            "title": "Processing Time",
            "description": "Response generation time"
          }
        },
        "type": "object",
        "required": [
          "message",
          "response",
          "conversation_id",
          "sources",
          "processing_time"
        ],
        "title": "ChatResponse",
        "description": "Response model for conversational RAG."
      },
      "ChunkQualityMetrics": {
        "properties": {
          "total_chunks": {
            "type": "integer",
            "title": "Total Chunks"
          },
          "total_documents": {
            "type": "integer",
            "title": "Total Documents"
          },
          "exact_duplicates_prevented": {
            "type": "integer",
            "title": "Exact Duplicates Prevented"
          },
          "semantic_duplicates_prevented": {
            "type": "integer",
            "title": "Semantic Duplicates Prevented"
          },
          "low_quality_rejected": {
            "type": "integer",
            "title": "Low Quality Rejected"
          },
          "borderline_quality_flagged": {
            "type": "integer",
            "title": "Borderline Quality Flagged"
          },
          "average_quality_score": {
            "type": "number",
            "title": "Average Quality Score"
          },
          "quality_distribution": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Quality Distribution"
          },
          "flagged_chunks_pending_review": {
            "type": "integer",
            "title": "Flagged Chunks Pending Review"
          },
          "flagged_chunks_reviewed": {
            "type": "integer",
            "title": "Flagged Chunks Reviewed"
          }
        },
        "type": "object",
        "required": [
          "total_chunks",
          "total_documents",
          "exact_duplicates_prevented",
          "semantic_duplicates_prevented",
          "low_quality_rejected",
          "borderline_quality_flagged",
          "average_quality_score",
          "quality_distribution",
          "flagged_chunks_pending_review",
          "flagged_chunks_reviewed"
        ],
        "title": "ChunkQualityMetrics",
        "description": "Chunk quality metrics response model."
      },
      "ClassifyBatchRequest": {
        "properties": {
          "contents": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Contents",
            "description": "List of text contents to classify"
          },
          "contexts": {
            "anyOf": [
              {
                "items": {
                  "type": "object"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Contexts",
            "description": "Optional contexts for each content"
          },
          "job_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Job Id",
            "description": "Optional job ID for tracking"
          }
        },
        "type": "object",
        "required": [
          "contents"
        ],
        "title": "ClassifyBatchRequest",
        "description": "Request for batch document classification."
      },
      "ClassifyRequest": {
        "properties": {
          "content": {
            "type": "string",
            "title": "Content",
            "description": "Text content to classify"
          },
          "context": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Context",
            "description": "Optional context (page number, images, etc.)"
          },
          "job_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Job Id",
            "description": "Optional job ID for tracking"
          }
        },
        "type": "object",
        "required": [
          "content"
        ],
        "title": "ClassifyRequest",
        "description": "Request for document classification."
      },
      "ClipImageRequest": {
        "properties": {
          "image_data": {
            "type": "string",
            "title": "Image Data",
            "description": "Base64 encoded image data"
          },
          "model": {
            "type": "string",
            "title": "Model",
            "description": "CLIP model to use",
            "default": "clip-vit-base-patch32"
          },
          "normalize": {
            "type": "boolean",
            "title": "Normalize",
            "description": "Whether to normalize the embedding vector",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "image_data"
        ],
        "title": "ClipImageRequest",
        "description": "Request model for CLIP image embedding generation."
      },
      "ClipTextRequest": {
        "properties": {
          "text": {
            "type": "string",
            "title": "Text",
            "description": "Text to generate embedding for"
          },
          "model": {
            "type": "string",
            "title": "Model",
            "description": "CLIP model to use",
            "default": "clip-vit-base-patch32"
          },
          "normalize": {
            "type": "boolean",
            "title": "Normalize",
            "description": "Whether to normalize the embedding vector",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "text"
        ],
        "title": "ClipTextRequest",
        "description": "Request model for CLIP text embedding generation."
      },
      "ConfidenceDistribution": {
        "properties": {
          "range": {
            "type": "string",
            "title": "Range"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          },
          "percentage": {
            "type": "number",
            "title": "Percentage"
          }
        },
        "type": "object",
        "required": [
          "range",
          "count",
          "percentage"
        ],
        "title": "ConfidenceDistribution"
      },
      "ConsensusValidateRequest": {
        "properties": {
          "content": {
            "type": "string",
            "title": "Content",
            "description": "Content to validate"
          },
          "extraction_type": {
            "type": "string",
            "title": "Extraction Type",
            "description": "Type of extraction (e.g., 'product_name', 'material_type')"
          },
          "job_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Job Id",
            "description": "Optional job ID for tracking"
          }
        },
        "type": "object",
        "required": [
          "content",
          "extraction_type"
        ],
        "title": "ConsensusValidateRequest",
        "description": "Request for consensus validation."
      },
      "DetectBoundariesRequest": {
        "properties": {
          "chunks": {
            "items": {
              "type": "object"
            },
            "type": "array",
            "title": "Chunks",
            "description": "List of document chunks"
          },
          "job_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Job Id",
            "description": "Optional job ID for tracking"
          }
        },
        "type": "object",
        "required": [
          "chunks"
        ],
        "title": "DetectBoundariesRequest",
        "description": "Request for boundary detection."
      },
      "DetectedObject": {
        "properties": {
          "label": {
            "type": "string",
            "title": "Label",
            "description": "Object label/class"
          },
          "confidence": {
            "type": "number",
            "title": "Confidence",
            "description": "Detection confidence (0-1)"
          },
          "bounding_box": {
            "allOf": [
              {
                "$ref": "#/components/schemas/BoundingBox"
              }
            ],
            "description": "Object location"
          },
          "attributes": {
            "type": "object",
            "title": "Attributes",
            "description": "Additional object attributes"
          }
        },
        "type": "object",
        "required": [
          "label",
          "confidence",
          "bounding_box"
        ],
        "title": "DetectedObject",
        "description": "Detected object in image."
      },
      "DetectedText": {
        "properties": {
          "text": {
            "type": "string",
            "title": "Text",
            "description": "Extracted text"
          },
          "confidence": {
            "type": "number",
            "title": "Confidence",
            "description": "OCR confidence (0-1)"
          },
          "bounding_box": {
            "allOf": [
              {
                "$ref": "#/components/schemas/BoundingBox"
              }
            ],
            "description": "Text location"
          },
          "language": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Language",
            "description": "Detected language"
          },
          "font_info": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Font Info",
            "description": "Font characteristics"
          }
        },
        "type": "object",
        "required": [
          "text",
          "confidence",
          "bounding_box"
        ],
        "title": "DetectedText",
        "description": "Detected text in image (OCR result)."
      },
      "DocumentEntityResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "entity_type": {
            "type": "string",
            "title": "Entity Type"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "page_range": {
            "items": {
              "type": "integer"
            },
            "type": "array",
            "title": "Page Range"
          },
          "factory_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Factory Name"
          },
          "factory_group": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Factory Group"
          },
          "manufacturer": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Manufacturer"
          },
          "metadata": {
            "type": "object",
            "title": "Metadata",
            "default": {}
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "entity_type",
          "name",
          "page_range",
          "created_at"
        ],
        "title": "DocumentEntityResponse",
        "description": "Response model for a document entity."
      },
      "DocumentListResponse": {
        "properties": {
          "documents": {
            "items": {
              "type": "object"
            },
            "type": "array",
            "title": "Documents",
            "description": "List of documents"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count",
            "description": "Total number of documents"
          },
          "page": {
            "type": "integer",
            "title": "Page",
            "description": "Current page number"
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size",
            "description": "Page size"
          }
        },
        "type": "object",
        "required": [
          "documents",
          "total_count",
          "page",
          "page_size"
        ],
        "title": "DocumentListResponse",
        "description": "Response model for document listing."
      },
      "EmbeddingResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the operation succeeded"
          },
          "embedding": {
            "anyOf": [
              {
                "items": {
                  "type": "number"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Embedding",
            "description": "Generated embedding vector"
          },
          "dimensions": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Dimensions",
            "description": "Embedding dimensions"
          },
          "model": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Model",
            "description": "Model used"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if failed"
          }
        },
        "type": "object",
        "required": [
          "success"
        ],
        "title": "EmbeddingResponse",
        "description": "Response model for embedding generation."
      },
      "ExtractionConfigResponse": {
        "properties": {
          "id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Id"
          },
          "workspace_id": {
            "type": "string",
            "title": "Workspace Id"
          },
          "enabled_categories": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Enabled Categories"
          },
          "default_categories": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Default Categories"
          },
          "discovery_model": {
            "type": "string",
            "title": "Discovery Model"
          },
          "chunk_size": {
            "type": "integer",
            "title": "Chunk Size"
          },
          "chunk_overlap": {
            "type": "integer",
            "title": "Chunk Overlap"
          },
          "enable_prompt_enhancement": {
            "type": "boolean",
            "title": "Enable Prompt Enhancement"
          },
          "quality_threshold": {
            "type": "number",
            "title": "Quality Threshold"
          }
        },
        "type": "object",
        "required": [
          "workspace_id",
          "enabled_categories",
          "default_categories",
          "discovery_model",
          "chunk_size",
          "chunk_overlap",
          "enable_prompt_enhancement",
          "quality_threshold"
        ],
        "title": "ExtractionConfigResponse",
        "description": "Extraction config response"
      },
      "FaceDetection": {
        "properties": {
          "confidence": {
            "type": "number",
            "title": "Confidence",
            "description": "Face detection confidence"
          },
          "bounding_box": {
            "allOf": [
              {
                "$ref": "#/components/schemas/BoundingBox"
              }
            ],
            "description": "Face location"
          },
          "landmarks": {
            "anyOf": [
              {
                "items": {
                  "additionalProperties": {
                    "type": "number"
                  },
                  "type": "object"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Landmarks",
            "description": "Facial landmarks"
          },
          "attributes": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Attributes",
            "description": "Face attributes (age, emotion, etc.)"
          }
        },
        "type": "object",
        "required": [
          "confidence",
          "bounding_box"
        ],
        "title": "FaceDetection",
        "description": "Detected face in image."
      },
      "FlaggedChunk": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "chunk_id": {
            "type": "string",
            "title": "Chunk Id"
          },
          "document_id": {
            "type": "string",
            "title": "Document Id"
          },
          "flag_type": {
            "type": "string",
            "title": "Flag Type"
          },
          "flag_reason": {
            "type": "string",
            "title": "Flag Reason"
          },
          "quality_score": {
            "type": "number",
            "title": "Quality Score"
          },
          "content_preview": {
            "type": "string",
            "title": "Content Preview"
          },
          "flagged_at": {
            "type": "string",
            "format": "date-time",
            "title": "Flagged At"
          },
          "reviewed": {
            "type": "boolean",
            "title": "Reviewed"
          },
          "reviewed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reviewed At"
          },
          "reviewed_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reviewed By"
          },
          "review_action": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Review Action"
          }
        },
        "type": "object",
        "required": [
          "id",
          "chunk_id",
          "document_id",
          "flag_type",
          "flag_reason",
          "quality_score",
          "content_preview",
          "flagged_at",
          "reviewed",
          "reviewed_at",
          "reviewed_by",
          "review_action"
        ],
        "title": "FlaggedChunk",
        "description": "Flagged chunk model."
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "HealthCheckResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Health status"
          },
          "services": {
            "additionalProperties": {
              "type": "object"
            },
            "type": "object",
            "title": "Services",
            "description": "Service health details"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Health check timestamp"
          }
        },
        "type": "object",
        "required": [
          "status",
          "services",
          "timestamp"
        ],
        "title": "HealthCheckResponse",
        "description": "Response model for RAG health check."
      },
      "HealthResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          },
          "version": {
            "type": "string",
            "title": "Version"
          },
          "service": {
            "type": "string",
            "title": "Service"
          },
          "services": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Services"
          }
        },
        "type": "object",
        "required": [
          "status",
          "timestamp",
          "version",
          "service"
        ],
        "title": "HealthResponse",
        "description": "Health check response model."
      },
      "ImageAnalysisRequest": {
        "properties": {
          "image_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Image Id",
            "description": "ID of extracted image from document"
          },
          "image_url": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 2083,
                "minLength": 1,
                "format": "uri"
              },
              {
                "type": "null"
              }
            ],
            "title": "Image Url",
            "description": "URL to external image"
          },
          "analysis_types": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Analysis Types",
            "description": "Types of analysis to perform",
            "default": [
              "description",
              "ocr",
              "objects"
            ]
          },
          "quality": {
            "type": "string",
            "pattern": "^(fast|standard|high)$",
            "title": "Quality",
            "description": "Analysis quality",
            "default": "standard"
          },
          "language": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Language",
            "description": "Language hint for OCR",
            "default": "auto"
          },
          "confidence_threshold": {
            "type": "number",
            "maximum": 1,
            "minimum": 0,
            "title": "Confidence Threshold",
            "description": "Minimum confidence for results",
            "default": 0.7
          },
          "document_context": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Document Context",
            "description": "Document context for better analysis"
          },
          "page_context": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Page Context",
            "description": "Page context around the image"
          }
        },
        "type": "object",
        "title": "ImageAnalysisRequest",
        "description": "Request model for image analysis using Material Kai Vision Platform.",
        "example": {
          "analysis_types": [
            "description",
            "ocr",
            "objects"
          ],
          "confidence_threshold": 0.8,
          "document_context": "Research paper about machine learning",
          "image_id": "img_123e4567-e89b-12d3-a456-426614174000",
          "language": "en",
          "quality": "standard"
        }
      },
      "ImageAnalysisResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Indicates if the request was successful",
            "default": true
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Optional message or description"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Response timestamp"
          },
          "image_id": {
            "type": "string",
            "title": "Image Id",
            "description": "Image identifier"
          },
          "status": {
            "allOf": [
              {
                "$ref": "#/components/schemas/ProcessingStatus"
              }
            ],
            "description": "Analysis status"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "AI-generated image description"
          },
          "detected_objects": {
            "items": {
              "$ref": "#/components/schemas/DetectedObject"
            },
            "type": "array",
            "title": "Detected Objects",
            "description": "Detected objects"
          },
          "detected_text": {
            "items": {
              "$ref": "#/components/schemas/DetectedText"
            },
            "type": "array",
            "title": "Detected Text",
            "description": "OCR results"
          },
          "detected_faces": {
            "items": {
              "$ref": "#/components/schemas/FaceDetection"
            },
            "type": "array",
            "title": "Detected Faces",
            "description": "Face detection results"
          },
          "categories": {
            "items": {
              "additionalProperties": {
                "type": "number"
              },
              "type": "object"
            },
            "type": "array",
            "title": "Categories",
            "description": "Image categories with confidence"
          },
          "tags": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Tags",
            "description": "Automatically generated tags"
          },
          "metadata": {
            "allOf": [
              {
                "$ref": "#/components/schemas/ImageMetadata"
              }
            ],
            "description": "Image metadata and properties"
          },
          "analysis_types_performed": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Analysis Types Performed",
            "description": "Types of analysis completed"
          },
          "processing_time_ms": {
            "type": "number",
            "title": "Processing Time Ms",
            "description": "Analysis processing time"
          },
          "model_versions": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Model Versions",
            "description": "AI model versions used"
          },
          "error_details": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Details",
            "description": "Error details if analysis failed"
          }
        },
        "type": "object",
        "required": [
          "image_id",
          "status",
          "metadata",
          "analysis_types_performed",
          "processing_time_ms"
        ],
        "title": "ImageAnalysisResponse",
        "description": "Response model for image analysis.",
        "example": {
          "analysis_types_performed": [
            "description",
            "ocr",
            "objects"
          ],
          "categories": [
            {
              "technical_diagram": 0.92
            },
            {
              "educational_content": 0.87
            }
          ],
          "description": "A diagram showing a neural network architecture with multiple layers",
          "detected_objects": [
            {
              "bounding_box": {
                "height": 0.6,
                "width": 0.8,
                "x": 0.1,
                "y": 0.2
              },
              "confidence": 0.95,
              "label": "diagram"
            }
          ],
          "detected_text": [
            {
              "bounding_box": {
                "height": 0.05,
                "width": 0.4,
                "x": 0.3,
                "y": 0.1
              },
              "confidence": 0.98,
              "language": "en",
              "text": "Neural Network"
            }
          ],
          "image_id": "img_123e4567-e89b-12d3-a456-426614174000",
          "metadata": {
            "format": "PNG",
            "height": 768,
            "quality_score": 0.89,
            "size_bytes": 245760,
            "width": 1024
          },
          "processing_time_ms": 1250.5,
          "status": "completed",
          "success": true,
          "tags": [
            "neural network",
            "diagram",
            "ai",
            "machine learning"
          ],
          "timestamp": "2024-07-26T18:00:00Z"
        }
      },
      "ImageBatchRequest": {
        "properties": {
          "image_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "maxItems": 50,
            "minItems": 1,
            "title": "Image Ids",
            "description": "List of image IDs to analyze"
          },
          "analysis_types": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Analysis Types",
            "description": "Types of analysis to perform on all images",
            "default": [
              "description",
              "ocr"
            ]
          },
          "parallel_processing": {
            "type": "boolean",
            "title": "Parallel Processing",
            "description": "Process images in parallel",
            "default": true
          },
          "priority": {
            "type": "string",
            "pattern": "^(low|normal|high)$",
            "title": "Priority",
            "description": "Processing priority",
            "default": "normal"
          },
          "quality": {
            "type": "string",
            "pattern": "^(fast|standard|high)$",
            "title": "Quality",
            "description": "Analysis quality",
            "default": "standard"
          },
          "confidence_threshold": {
            "type": "number",
            "maximum": 1,
            "minimum": 0,
            "title": "Confidence Threshold",
            "description": "Minimum confidence threshold",
            "default": 0.7
          }
        },
        "type": "object",
        "required": [
          "image_ids"
        ],
        "title": "ImageBatchRequest",
        "description": "Request model for batch image analysis.",
        "example": {
          "analysis_types": [
            "description",
            "ocr",
            "objects"
          ],
          "image_ids": [
            "img_123e4567-e89b-12d3-a456-426614174000",
            "img_456e7890-e89b-12d3-a456-426614174001"
          ],
          "parallel_processing": true,
          "priority": "normal",
          "quality": "standard"
        }
      },
      "ImageBatchResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Indicates if the request was successful",
            "default": true
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Optional message or description"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Response timestamp"
          },
          "batch_id": {
            "type": "string",
            "title": "Batch Id",
            "description": "Batch processing identifier"
          },
          "total_images": {
            "type": "integer",
            "title": "Total Images",
            "description": "Total number of images in batch"
          },
          "completed_count": {
            "type": "integer",
            "title": "Completed Count",
            "description": "Number of successfully processed images"
          },
          "failed_count": {
            "type": "integer",
            "title": "Failed Count",
            "description": "Number of failed images"
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/ImageBatchResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Individual image results"
          },
          "total_processing_time_ms": {
            "type": "number",
            "title": "Total Processing Time Ms",
            "description": "Total batch processing time"
          },
          "average_time_per_image_ms": {
            "type": "number",
            "title": "Average Time Per Image Ms",
            "description": "Average processing time per image"
          }
        },
        "type": "object",
        "required": [
          "batch_id",
          "total_images",
          "completed_count",
          "failed_count",
          "results",
          "total_processing_time_ms",
          "average_time_per_image_ms"
        ],
        "title": "ImageBatchResponse",
        "description": "Response model for batch image analysis.",
        "example": {
          "average_time_per_image_ms": 1115.35,
          "batch_id": "batch_789e0123-e89b-12d3-a456-426614174000",
          "completed_count": 2,
          "failed_count": 0,
          "results": [
            {
              "image_id": "img_123",
              "processing_time_ms": 1250.5,
              "status": "completed"
            },
            {
              "image_id": "img_456",
              "processing_time_ms": 980.2,
              "status": "completed"
            }
          ],
          "success": true,
          "timestamp": "2024-07-26T18:00:00Z",
          "total_images": 2,
          "total_processing_time_ms": 2230.7
        }
      },
      "ImageBatchResult": {
        "properties": {
          "image_id": {
            "type": "string",
            "title": "Image Id",
            "description": "Image identifier"
          },
          "status": {
            "allOf": [
              {
                "$ref": "#/components/schemas/ProcessingStatus"
              }
            ],
            "description": "Processing status for this image"
          },
          "result": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ImageAnalysisResponse"
              },
              {
                "type": "null"
              }
            ],
            "description": "Analysis result if successful"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if failed"
          },
          "processing_time_ms": {
            "type": "number",
            "title": "Processing Time Ms",
            "description": "Processing time for this image"
          }
        },
        "type": "object",
        "required": [
          "image_id",
          "status",
          "processing_time_ms"
        ],
        "title": "ImageBatchResult",
        "description": "Individual result in batch processing."
      },
      "ImageMetadata": {
        "properties": {
          "width": {
            "type": "integer",
            "title": "Width",
            "description": "Image width in pixels"
          },
          "height": {
            "type": "integer",
            "title": "Height",
            "description": "Image height in pixels"
          },
          "format": {
            "type": "string",
            "title": "Format",
            "description": "Image format (JPEG, PNG, etc.)"
          },
          "size_bytes": {
            "type": "integer",
            "title": "Size Bytes",
            "description": "File size in bytes"
          },
          "color_mode": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Color Mode",
            "description": "Color mode (RGB, CMYK, etc.)"
          },
          "resolution_dpi": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolution Dpi",
            "description": "Image resolution in DPI"
          },
          "quality_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Quality Score",
            "description": "Overall image quality (0-1)"
          },
          "sharpness_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sharpness Score",
            "description": "Image sharpness (0-1)"
          },
          "dominant_colors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Dominant Colors",
            "description": "Dominant color palette"
          },
          "brightness": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Brightness",
            "description": "Average brightness (0-1)"
          },
          "contrast": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Contrast",
            "description": "Image contrast (0-1)"
          },
          "exif_data": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Exif Data",
            "description": "EXIF metadata"
          },
          "creation_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Creation Date",
            "description": "Image creation date"
          }
        },
        "type": "object",
        "required": [
          "width",
          "height",
          "format",
          "size_bytes"
        ],
        "title": "ImageMetadata",
        "description": "Comprehensive image metadata and analysis results."
      },
      "ImageSearchResult": {
        "properties": {
          "document_id": {
            "type": "string",
            "title": "Document Id",
            "description": "Source document ID"
          },
          "document_name": {
            "type": "string",
            "title": "Document Name",
            "description": "Document name"
          },
          "image_id": {
            "type": "string",
            "title": "Image Id",
            "description": "Image identifier"
          },
          "page_number": {
            "type": "integer",
            "title": "Page Number",
            "description": "Source page number"
          },
          "image_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Image Path",
            "description": "Path to image file"
          },
          "image_dimensions": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "integer"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Image Dimensions",
            "description": "Image width and height"
          },
          "image_format": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Image Format",
            "description": "Image format (PNG, JPEG, etc.)"
          },
          "visual_description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Visual Description",
            "description": "AI-generated visual description"
          },
          "ocr_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ocr Text",
            "description": "OCR-extracted text from image"
          },
          "ocr_confidence": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ocr Confidence",
            "description": "OCR extraction confidence"
          },
          "similarity_score": {
            "type": "number",
            "title": "Similarity Score",
            "description": "Visual similarity score (0-1)"
          },
          "ocr_relevance_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ocr Relevance Score",
            "description": "OCR text relevance score"
          },
          "combined_score": {
            "type": "number",
            "title": "Combined Score",
            "description": "Final combined relevance score"
          },
          "visual_features": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Visual Features",
            "description": "Extracted visual features"
          },
          "detected_objects": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Detected Objects",
            "description": "Detected objects in image"
          },
          "material_analysis": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Material Analysis",
            "description": "Material property analysis results"
          },
          "clip_embedding": {
            "anyOf": [
              {
                "items": {
                  "type": "number"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Clip Embedding",
            "description": "CLIP embedding vector for visual similarity"
          },
          "llama_analysis": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llama Analysis",
            "description": "LLaMA Vision material analysis"
          },
          "material_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Material Type",
            "description": "Identified material type"
          },
          "material_confidence": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Material Confidence",
            "description": "Material identification confidence"
          },
          "spectral_properties": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Spectral Properties",
            "description": "Spectral analysis properties"
          },
          "chemical_composition": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chemical Composition",
            "description": "Chemical composition analysis"
          },
          "mechanical_properties": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mechanical Properties",
            "description": "Mechanical property analysis"
          }
        },
        "type": "object",
        "required": [
          "document_id",
          "document_name",
          "image_id",
          "page_number",
          "similarity_score",
          "combined_score"
        ],
        "title": "ImageSearchResult",
        "description": "Individual image search result."
      },
      "ImageValidationRequest": {
        "properties": {
          "image_id": {
            "type": "string",
            "title": "Image Id"
          },
          "image_url": {
            "type": "string",
            "title": "Image Url"
          },
          "product_groups": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Product Groups"
          },
          "workspace_id": {
            "type": "string",
            "title": "Workspace Id"
          }
        },
        "type": "object",
        "required": [
          "image_id",
          "image_url",
          "workspace_id"
        ],
        "title": "ImageValidationRequest"
      },
      "ImageValidationResponse": {
        "properties": {
          "image_id": {
            "type": "string",
            "title": "Image Id"
          },
          "validation_status": {
            "type": "string",
            "title": "Validation Status"
          },
          "quality_score": {
            "type": "number",
            "title": "Quality Score"
          },
          "product_associations": {
            "items": {
              "type": "object"
            },
            "type": "array",
            "title": "Product Associations"
          },
          "issues": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Issues"
          },
          "recommendations": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Recommendations"
          },
          "processing_time_ms": {
            "type": "number",
            "title": "Processing Time Ms"
          }
        },
        "type": "object",
        "required": [
          "image_id",
          "validation_status",
          "quality_score",
          "product_associations",
          "issues",
          "recommendations",
          "processing_time_ms"
        ],
        "title": "ImageValidationResponse"
      },
      "JobListItem": {
        "properties": {
          "job_id": {
            "type": "string",
            "title": "Job Id",
            "description": "Job identifier"
          },
          "job_type": {
            "allOf": [
              {
                "$ref": "#/components/schemas/JobType"
              }
            ],
            "description": "Job type"
          },
          "status": {
            "allOf": [
              {
                "$ref": "#/components/schemas/JobStatus"
              }
            ],
            "description": "Job status"
          },
          "priority": {
            "allOf": [
              {
                "$ref": "#/components/schemas/JobPriority"
              }
            ],
            "description": "Job priority"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Creation timestamp"
          },
          "started_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Started At",
            "description": "Start timestamp"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At",
            "description": "Completion timestamp"
          },
          "progress_percentage": {
            "type": "number",
            "title": "Progress Percentage",
            "description": "Progress percentage",
            "default": 0
          },
          "current_step": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Current Step",
            "description": "Current processing step"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Job description"
          },
          "tags": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Tags",
            "description": "Job tags"
          },
          "success": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Success",
            "description": "Success status if completed"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message",
            "description": "Error message if failed"
          }
        },
        "type": "object",
        "required": [
          "job_id",
          "job_type",
          "status",
          "priority",
          "created_at"
        ],
        "title": "JobListItem",
        "description": "Simplified job information for list responses."
      },
      "JobListResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Indicates if the request was successful",
            "default": true
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Optional message or description"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Response timestamp"
          },
          "jobs": {
            "items": {
              "$ref": "#/components/schemas/JobListItem"
            },
            "type": "array",
            "title": "Jobs",
            "description": "List of jobs"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count",
            "description": "Total number of jobs"
          },
          "page": {
            "type": "integer",
            "title": "Page",
            "description": "Current page number"
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size",
            "description": "Items per page"
          },
          "status_counts": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Status Counts",
            "description": "Count by status"
          },
          "type_counts": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Type Counts",
            "description": "Count by type"
          }
        },
        "type": "object",
        "required": [
          "jobs",
          "total_count",
          "page",
          "page_size"
        ],
        "title": "JobListResponse",
        "description": "Response model for job listing.",
        "example": {
          "jobs": [
            {
              "completed_at": "2024-07-26T18:05:00Z",
              "created_at": "2024-07-26T18:00:00Z",
              "description": "Process research paper",
              "job_id": "job_123",
              "job_type": "document_processing",
              "priority": "normal",
              "progress_percentage": 100,
              "status": "completed",
              "success": true
            }
          ],
          "page": 1,
          "page_size": 20,
          "status_counts": {
            "completed": 1,
            "failed": 0,
            "running": 0
          },
          "success": true,
          "timestamp": "2024-07-26T18:00:00Z",
          "total_count": 1,
          "type_counts": {
            "document_processing": 1
          }
        }
      },
      "JobPriority": {
        "type": "string",
        "enum": [
          "low",
          "normal",
          "high",
          "urgent"
        ],
        "title": "JobPriority",
        "description": "Job priority levels."
      },
      "JobProgress": {
        "properties": {
          "current_step": {
            "type": "string",
            "title": "Current Step",
            "description": "Current processing step"
          },
          "total_steps": {
            "type": "integer",
            "title": "Total Steps",
            "description": "Total number of steps"
          },
          "completed_steps": {
            "type": "integer",
            "title": "Completed Steps",
            "description": "Number of completed steps"
          },
          "progress_percentage": {
            "type": "number",
            "maximum": 100,
            "minimum": 0,
            "title": "Progress Percentage",
            "description": "Progress percentage"
          },
          "step_details": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Step Details",
            "description": "Step-specific details"
          },
          "estimated_remaining_seconds": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Estimated Remaining Seconds",
            "description": "Estimated time remaining"
          }
        },
        "type": "object",
        "required": [
          "current_step",
          "total_steps",
          "completed_steps",
          "progress_percentage"
        ],
        "title": "JobProgress",
        "description": "Job progress information."
      },
      "JobProgressDetail": {
        "properties": {
          "job_id": {
            "type": "string",
            "title": "Job Id",
            "description": "Job identifier"
          },
          "document_id": {
            "type": "string",
            "title": "Document Id",
            "description": "Document being processed"
          },
          "current_stage": {
            "allOf": [
              {
                "$ref": "#/components/schemas/ProcessingStage"
              }
            ],
            "description": "Current overall processing stage"
          },
          "total_pages": {
            "type": "integer",
            "title": "Total Pages",
            "description": "Total number of pages in document"
          },
          "pages_completed": {
            "type": "integer",
            "title": "Pages Completed",
            "description": "Number of pages completed",
            "default": 0
          },
          "pages_failed": {
            "type": "integer",
            "title": "Pages Failed",
            "description": "Number of pages that failed",
            "default": 0
          },
          "pages_skipped": {
            "type": "integer",
            "title": "Pages Skipped",
            "description": "Number of pages skipped",
            "default": 0
          },
          "current_page": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Current Page",
            "description": "Currently processing page number"
          },
          "page_statuses": {
            "items": {
              "$ref": "#/components/schemas/PageProcessingStatus"
            },
            "type": "array",
            "title": "Page Statuses",
            "description": "Status of each page"
          },
          "progress_percentage": {
            "type": "number",
            "title": "Progress Percentage",
            "description": "Overall progress percentage (0-100)",
            "default": 0
          },
          "estimated_completion_time": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Estimated Completion Time",
            "description": "Estimated completion time"
          },
          "processing_start_time": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Processing Start Time",
            "description": "When processing started"
          },
          "database_records_created": {
            "type": "integer",
            "title": "Database Records Created",
            "description": "Number of database records created",
            "default": 0
          },
          "knowledge_base_entries": {
            "type": "integer",
            "title": "Knowledge Base Entries",
            "description": "Number of knowledge base entries created",
            "default": 0
          },
          "images_stored": {
            "type": "integer",
            "title": "Images Stored",
            "description": "Number of images stored",
            "default": 0
          },
          "errors": {
            "items": {
              "type": "object"
            },
            "type": "array",
            "title": "Errors",
            "description": "List of errors encountered"
          },
          "warnings": {
            "items": {
              "type": "object"
            },
            "type": "array",
            "title": "Warnings",
            "description": "List of warnings"
          },
          "average_page_processing_time": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Average Page Processing Time",
            "description": "Average time per page in seconds"
          },
          "ocr_pages_processed": {
            "type": "integer",
            "title": "Ocr Pages Processed",
            "description": "Number of pages processed with OCR",
            "default": 0
          },
          "total_text_extracted": {
            "type": "integer",
            "title": "Total Text Extracted",
            "description": "Total characters of text extracted",
            "default": 0
          },
          "total_images_extracted": {
            "type": "integer",
            "title": "Total Images Extracted",
            "description": "Total number of images extracted",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "job_id",
          "document_id",
          "current_stage",
          "total_pages"
        ],
        "title": "JobProgressDetail",
        "description": "Detailed progress information for a job."
      },
      "JobResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Indicates if the request was successful",
            "default": true
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Optional message or description"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Response timestamp"
          },
          "job_id": {
            "type": "string",
            "title": "Job Id",
            "description": "Unique job identifier"
          },
          "job_type": {
            "allOf": [
              {
                "$ref": "#/components/schemas/JobType"
              }
            ],
            "description": "Type of job"
          },
          "status": {
            "allOf": [
              {
                "$ref": "#/components/schemas/JobStatus"
              }
            ],
            "description": "Current job status"
          },
          "priority": {
            "allOf": [
              {
                "$ref": "#/components/schemas/JobPriority"
              }
            ],
            "description": "Job priority"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Job creation timestamp"
          },
          "started_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Started At",
            "description": "Job start timestamp"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At",
            "description": "Job completion timestamp"
          },
          "progress": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/JobProgress"
              },
              {
                "type": "null"
              }
            ],
            "description": "Job progress information"
          },
          "parameters": {
            "type": "object",
            "title": "Parameters",
            "description": "Job parameters"
          },
          "retry_count": {
            "type": "integer",
            "title": "Retry Count",
            "description": "Maximum retry attempts"
          },
          "current_retry": {
            "type": "integer",
            "title": "Current Retry",
            "description": "Current retry attempt",
            "default": 0
          },
          "result": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/JobResult"
              },
              {
                "type": "null"
              }
            ],
            "description": "Job result if completed"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Job description"
          },
          "tags": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Tags",
            "description": "Job tags"
          }
        },
        "type": "object",
        "required": [
          "job_id",
          "job_type",
          "status",
          "priority",
          "created_at",
          "parameters",
          "retry_count"
        ],
        "title": "JobResponse",
        "description": "Response model for job operations.",
        "example": {
          "created_at": "2024-07-26T18:00:00Z",
          "current_retry": 0,
          "description": "Process research paper",
          "job_id": "job_123e4567-e89b-12d3-a456-426614174000",
          "job_type": "document_processing",
          "parameters": {
            "document_url": "https://example.com/doc.pdf",
            "extract_images": true
          },
          "priority": "normal",
          "progress": {
            "completed_steps": 2,
            "current_step": "Extracting text",
            "estimated_remaining_seconds": 120,
            "progress_percentage": 40,
            "total_steps": 5
          },
          "retry_count": 3,
          "started_at": "2024-07-26T18:00:05Z",
          "status": "running",
          "success": true,
          "tags": [
            "research"
          ],
          "timestamp": "2024-07-26T18:00:00Z"
        }
      },
      "JobResult": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether job completed successfully"
          },
          "result_data": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Result Data",
            "description": "Job result data"
          },
          "output_files": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Output Files",
            "description": "Generated output files"
          },
          "artifacts": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Artifacts",
            "description": "Generated artifacts"
          },
          "processing_time_seconds": {
            "type": "number",
            "title": "Processing Time Seconds",
            "description": "Total processing time"
          },
          "memory_usage_mb": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Memory Usage Mb",
            "description": "Peak memory usage"
          },
          "cpu_time_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cpu Time Seconds",
            "description": "CPU time used"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message",
            "description": "Error message if failed"
          },
          "error_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Code",
            "description": "Machine-readable error code"
          },
          "error_details": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Details",
            "description": "Detailed error information"
          }
        },
        "type": "object",
        "required": [
          "success",
          "processing_time_seconds"
        ],
        "title": "JobResult",
        "description": "Job execution result."
      },
      "JobStatus": {
        "type": "string",
        "enum": [
          "pending",
          "queued",
          "running",
          "paused",
          "retrying",
          "completed",
          "failed",
          "cancelled"
        ],
        "title": "JobStatus",
        "description": "Extended job status enumeration."
      },
      "JobStatusResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Indicates if the request was successful",
            "default": true
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Optional message or description"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Response timestamp"
          },
          "data": {
            "allOf": [
              {
                "$ref": "#/components/schemas/JobResponse"
              }
            ],
            "description": "Job details"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "JobStatusResponse",
        "description": "Response model for job status queries.",
        "example": {
          "data": {
            "job_id": "job_123",
            "job_type": "document_processing",
            "priority": "normal",
            "progress": {
              "completed_steps": 5,
              "current_step": "Processing page 5",
              "progress_percentage": 50,
              "total_steps": 10
            },
            "status": "running"
          },
          "message": "Job status retrieved successfully",
          "success": true,
          "timestamp": "2024-07-26T18:00:00Z"
        }
      },
      "JobType": {
        "type": "string",
        "enum": [
          "document_processing",
          "image_analysis",
          "batch_processing",
          "bulk_processing",
          "embedding_generation",
          "search_indexing",
          "data_export",
          "cleanup"
        ],
        "title": "JobType",
        "description": "Types of background jobs."
      },
      "MMRSearchRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 2000,
            "minLength": 1,
            "title": "Query",
            "description": "Search query"
          },
          "top_k": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 50,
                "minimum": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Top K",
            "description": "Number of initial results to retrieve",
            "default": 10
          },
          "diversity_threshold": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1,
                "minimum": 0
              },
              {
                "type": "null"
              }
            ],
            "title": "Diversity Threshold",
            "description": "MMR diversity threshold",
            "default": 0.7
          },
          "lambda_param": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1,
                "minimum": 0
              },
              {
                "type": "null"
              }
            ],
            "title": "Lambda Param",
            "description": "MMR lambda parameter for relevance vs diversity balance",
            "default": 0.5
          },
          "document_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Document Ids",
            "description": "Filter by specific document IDs"
          },
          "include_metadata": {
            "type": "boolean",
            "title": "Include Metadata",
            "description": "Include document metadata in response",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "MMRSearchRequest",
        "description": "Request model for MMR (Maximal Marginal Relevance) search."
      },
      "MMRSearchResponse": {
        "properties": {
          "query": {
            "type": "string",
            "title": "Query",
            "description": "Original search query"
          },
          "results": {
            "items": {
              "type": "object"
            },
            "type": "array",
            "title": "Results",
            "description": "MMR search results with diversity scores"
          },
          "total_results": {
            "type": "integer",
            "title": "Total Results",
            "description": "Total number of results"
          },
          "diversity_score": {
            "type": "number",
            "title": "Diversity Score",
            "description": "Overall diversity score of results"
          },
          "processing_time": {
            "type": "number",
            "title": "Processing Time",
            "description": "Search processing time in seconds"
          }
        },
        "type": "object",
        "required": [
          "query",
          "results",
          "total_results",
          "diversity_score",
          "processing_time"
        ],
        "title": "MMRSearchResponse",
        "description": "Response model for MMR search."
      },
      "MaterialSearchRequest": {
        "properties": {
          "query_image": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Query Image",
            "description": "Base64 encoded image or image URL"
          },
          "query_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Query Text",
            "description": "Text description for hybrid search"
          },
          "query_embedding": {
            "anyOf": [
              {
                "items": {
                  "type": "number"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Query Embedding",
            "description": "Pre-computed CLIP embedding"
          },
          "search_type": {
            "type": "string",
            "title": "Search Type",
            "description": "Type of search: visual_similarity, semantic_analysis, hybrid, material_properties",
            "default": "hybrid"
          },
          "search_strategy": {
            "type": "string",
            "title": "Search Strategy",
            "description": "Search strategy: comprehensive, fast, accurate",
            "default": "comprehensive"
          },
          "material_types": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Material Types",
            "description": "Filter by material types"
          },
          "confidence_threshold": {
            "type": "number",
            "maximum": 1,
            "minimum": 0,
            "title": "Confidence Threshold",
            "description": "Minimum confidence threshold",
            "default": 0.75
          },
          "similarity_threshold": {
            "type": "number",
            "maximum": 1,
            "minimum": 0,
            "title": "Similarity Threshold",
            "description": "Minimum similarity threshold",
            "default": 0.7
          },
          "spectral_filters": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Spectral Filters",
            "description": "Spectral property filters"
          },
          "chemical_filters": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chemical Filters",
            "description": "Chemical composition filters"
          },
          "mechanical_filters": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mechanical Filters",
            "description": "Mechanical property filters"
          },
          "thermal_filters": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thermal Filters",
            "description": "Thermal property filters"
          },
          "fusion_weights": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "number"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fusion Weights",
            "description": "Weights for combining analysis types"
          },
          "limit": {
            "type": "integer",
            "maximum": 100,
            "minimum": 1,
            "title": "Limit",
            "description": "Maximum number of results",
            "default": 20
          },
          "offset": {
            "type": "integer",
            "minimum": 0,
            "title": "Offset",
            "description": "Result offset for pagination",
            "default": 0
          },
          "include_analytics": {
            "type": "boolean",
            "title": "Include Analytics",
            "description": "Include search analytics",
            "default": false
          },
          "include_embeddings": {
            "type": "boolean",
            "title": "Include Embeddings",
            "description": "Include embedding vectors in response",
            "default": false
          },
          "enable_clip_embeddings": {
            "type": "boolean",
            "title": "Enable Clip Embeddings",
            "description": "Generate CLIP embeddings",
            "default": true
          },
          "enable_llama_analysis": {
            "type": "boolean",
            "title": "Enable Llama Analysis",
            "description": "Enable LLaMA Vision analysis",
            "default": false
          },
          "user_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Id",
            "description": "User identifier"
          },
          "workspace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Workspace Id",
            "description": "Workspace identifier"
          },
          "session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id",
            "description": "Session identifier"
          }
        },
        "type": "object",
        "title": "MaterialSearchRequest",
        "description": "Request model for material-specific visual search."
      },
      "MaterialSearchResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Request success status"
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/MaterialSearchResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Search results"
          },
          "total_results": {
            "type": "integer",
            "title": "Total Results",
            "description": "Total number of results"
          },
          "search_metadata": {
            "type": "object",
            "title": "Search Metadata",
            "description": "Search execution metadata"
          },
          "analytics": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Analytics",
            "description": "Search analytics if requested"
          }
        },
        "type": "object",
        "required": [
          "success",
          "results",
          "total_results",
          "search_metadata"
        ],
        "title": "MaterialSearchResponse",
        "description": "Response model for material visual search."
      },
      "MaterialSearchResult": {
        "properties": {
          "material_id": {
            "type": "string",
            "title": "Material Id",
            "description": "Material identifier"
          },
          "material_name": {
            "type": "string",
            "title": "Material Name",
            "description": "Material name"
          },
          "material_type": {
            "type": "string",
            "title": "Material Type",
            "description": "Material type/category"
          },
          "visual_similarity_score": {
            "type": "number",
            "title": "Visual Similarity Score",
            "description": "Visual similarity score"
          },
          "semantic_relevance_score": {
            "type": "number",
            "title": "Semantic Relevance Score",
            "description": "Semantic relevance score"
          },
          "material_property_score": {
            "type": "number",
            "title": "Material Property Score",
            "description": "Material property matching score"
          },
          "combined_score": {
            "type": "number",
            "title": "Combined Score",
            "description": "Final combined score"
          },
          "confidence_score": {
            "type": "number",
            "title": "Confidence Score",
            "description": "Overall confidence"
          },
          "visual_analysis": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Visual Analysis",
            "description": "Visual analysis results"
          },
          "material_properties": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Material Properties",
            "description": "Material property analysis"
          },
          "clip_embedding": {
            "anyOf": [
              {
                "items": {
                  "type": "number"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Clip Embedding",
            "description": "CLIP embedding vector"
          },
          "llama_analysis": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llama Analysis",
            "description": "LLaMA Vision analysis"
          },
          "source": {
            "type": "string",
            "title": "Source",
            "description": "Data source"
          },
          "created_at": {
            "type": "string",
            "title": "Created At",
            "description": "Creation timestamp"
          },
          "processing_method": {
            "type": "string",
            "title": "Processing Method",
            "description": "Processing method used"
          },
          "search_rank": {
            "type": "integer",
            "title": "Search Rank",
            "description": "Result ranking"
          }
        },
        "type": "object",
        "required": [
          "material_id",
          "material_name",
          "material_type",
          "visual_similarity_score",
          "semantic_relevance_score",
          "material_property_score",
          "combined_score",
          "confidence_score",
          "source",
          "created_at",
          "processing_method",
          "search_rank"
        ],
        "title": "MaterialSearchResult",
        "description": "Material-specific search result."
      },
      "ModelUsageStats": {
        "properties": {
          "model": {
            "type": "string",
            "title": "Model"
          },
          "call_count": {
            "type": "integer",
            "title": "Call Count"
          },
          "total_cost": {
            "type": "number",
            "title": "Total Cost"
          },
          "total_tokens": {
            "type": "integer",
            "title": "Total Tokens"
          },
          "average_latency_ms": {
            "type": "number",
            "title": "Average Latency Ms"
          },
          "average_confidence": {
            "type": "number",
            "title": "Average Confidence"
          },
          "fallback_count": {
            "type": "integer",
            "title": "Fallback Count"
          }
        },
        "type": "object",
        "required": [
          "model",
          "call_count",
          "total_cost",
          "total_tokens",
          "average_latency_ms",
          "average_confidence",
          "fallback_count"
        ],
        "title": "ModelUsageStats"
      },
      "MultiModalAnalysisRequest": {
        "properties": {
          "document_id": {
            "type": "string",
            "title": "Document Id",
            "description": "Document ID to analyze"
          },
          "analysis_types": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Analysis Types",
            "description": "Types of analysis to perform"
          },
          "include_text_analysis": {
            "type": "boolean",
            "title": "Include Text Analysis",
            "description": "Include text content analysis",
            "default": true
          },
          "include_image_analysis": {
            "type": "boolean",
            "title": "Include Image Analysis",
            "description": "Include image content analysis",
            "default": true
          },
          "include_ocr_analysis": {
            "type": "boolean",
            "title": "Include Ocr Analysis",
            "description": "Include OCR text analysis",
            "default": true
          },
          "include_structure_analysis": {
            "type": "boolean",
            "title": "Include Structure Analysis",
            "description": "Include document structure analysis",
            "default": false
          },
          "ocr_language": {
            "type": "string",
            "title": "Ocr Language",
            "description": "OCR language code",
            "default": "en"
          },
          "ocr_confidence_threshold": {
            "type": "number",
            "maximum": 1,
            "minimum": 0,
            "title": "Ocr Confidence Threshold",
            "description": "Minimum OCR confidence",
            "default": 0.5
          },
          "image_analysis_depth": {
            "type": "string",
            "pattern": "^(basic|standard|detailed)$",
            "title": "Image Analysis Depth",
            "description": "Image analysis depth",
            "default": "standard"
          },
          "detect_objects": {
            "type": "boolean",
            "title": "Detect Objects",
            "description": "Detect objects in images",
            "default": true
          },
          "extract_visual_features": {
            "type": "boolean",
            "title": "Extract Visual Features",
            "description": "Extract visual features",
            "default": true
          },
          "enable_material_analysis": {
            "type": "boolean",
            "title": "Enable Material Analysis",
            "description": "Enable material property analysis",
            "default": false
          },
          "material_analysis_types": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Material Analysis Types",
            "description": "Types of material analysis (spectral, chemical, mechanical, thermal)"
          },
          "enable_clip_embeddings": {
            "type": "boolean",
            "title": "Enable Clip Embeddings",
            "description": "Generate CLIP embeddings for visual similarity",
            "default": false
          },
          "enable_llama_vision": {
            "type": "boolean",
            "title": "Enable Llama Vision",
            "description": "Use LLaMA Vision for material understanding",
            "default": false
          },
          "spectral_analysis": {
            "type": "boolean",
            "title": "Spectral Analysis",
            "description": "Perform spectral analysis on materials",
            "default": false
          },
          "chemical_analysis": {
            "type": "boolean",
            "title": "Chemical Analysis",
            "description": "Perform chemical composition analysis",
            "default": false
          },
          "mechanical_analysis": {
            "type": "boolean",
            "title": "Mechanical Analysis",
            "description": "Perform mechanical property analysis",
            "default": false
          },
          "thermal_analysis": {
            "type": "boolean",
            "title": "Thermal Analysis",
            "description": "Perform thermal property analysis",
            "default": false
          },
          "multimodal_llm_model": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Multimodal Llm Model",
            "description": "Specific multi-modal LLM model to use"
          },
          "cross_modal_analysis": {
            "type": "boolean",
            "title": "Cross Modal Analysis",
            "description": "Analyze relationships between different modalities",
            "default": false
          },
          "analysis_depth": {
            "type": "string",
            "pattern": "^(basic|standard|detailed|comprehensive)$",
            "title": "Analysis Depth",
            "description": "Overall analysis depth",
            "default": "standard"
          },
          "prioritize_materials": {
            "type": "boolean",
            "title": "Prioritize Materials",
            "description": "Prioritize material-related content in analysis",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "document_id",
          "analysis_types"
        ],
        "title": "MultiModalAnalysisRequest",
        "description": "Request model for multi-modal document analysis with material-specific capabilities."
      },
      "MultiModalAnalysisResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Indicates if the request was successful",
            "default": true
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Optional message or description"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Response timestamp"
          },
          "document_id": {
            "type": "string",
            "title": "Document Id",
            "description": "Analyzed document ID"
          },
          "document_name": {
            "type": "string",
            "title": "Document Name",
            "description": "Document name"
          },
          "text_analysis": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Text Analysis",
            "description": "Text analysis results"
          },
          "image_analysis": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Image Analysis",
            "description": "Image analysis results"
          },
          "ocr_analysis": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ocr Analysis",
            "description": "OCR analysis results"
          },
          "structure_analysis": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Structure Analysis",
            "description": "Document structure analysis"
          },
          "material_analysis": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Material Analysis",
            "description": "Comprehensive material analysis results"
          },
          "spectral_analysis": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Spectral Analysis",
            "description": "Spectral analysis results"
          },
          "chemical_analysis": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chemical Analysis",
            "description": "Chemical composition analysis"
          },
          "mechanical_analysis": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mechanical Analysis",
            "description": "Mechanical property analysis"
          },
          "thermal_analysis": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thermal Analysis",
            "description": "Thermal property analysis"
          },
          "clip_embeddings": {
            "anyOf": [
              {
                "items": {
                  "items": {
                    "type": "number"
                  },
                  "type": "array"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Clip Embeddings",
            "description": "Generated CLIP embeddings for visual similarity"
          },
          "llama_vision_analysis": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llama Vision Analysis",
            "description": "LLaMA Vision material understanding results"
          },
          "multimodal_insights": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Multimodal Insights",
            "description": "Combined multi-modal insights"
          },
          "cross_modal_insights": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cross Modal Insights",
            "description": "Cross-modal relationship insights"
          },
          "content_summary": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content Summary",
            "description": "Overall content summary"
          },
          "material_summary": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Material Summary",
            "description": "Material-focused analysis summary"
          },
          "analysis_time_ms": {
            "type": "number",
            "title": "Analysis Time Ms",
            "description": "Total analysis time"
          },
          "models_used": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Models Used",
            "description": "Models used for analysis"
          },
          "material_analysis_enabled": {
            "type": "boolean",
            "title": "Material Analysis Enabled",
            "description": "Whether material analysis was performed",
            "default": false
          },
          "total_pages": {
            "type": "integer",
            "title": "Total Pages",
            "description": "Total pages analyzed"
          },
          "total_images": {
            "type": "integer",
            "title": "Total Images",
            "description": "Total images analyzed"
          },
          "total_text_chunks": {
            "type": "integer",
            "title": "Total Text Chunks",
            "description": "Total text chunks analyzed"
          },
          "total_materials_identified": {
            "type": "integer",
            "title": "Total Materials Identified",
            "description": "Total materials identified in analysis",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "document_id",
          "document_name",
          "analysis_time_ms",
          "total_pages",
          "total_images",
          "total_text_chunks"
        ],
        "title": "MultiModalAnalysisResponse",
        "description": "Response model for multi-modal analysis."
      },
      "PageProcessingStatus": {
        "properties": {
          "page_number": {
            "type": "integer",
            "title": "Page Number",
            "description": "Page number being processed"
          },
          "stage": {
            "allOf": [
              {
                "$ref": "#/components/schemas/ProcessingStage"
              }
            ],
            "description": "Current processing stage for this page"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Status: success, failed, skipped, processing"
          },
          "text_extracted": {
            "type": "boolean",
            "title": "Text Extracted",
            "description": "Whether text was extracted",
            "default": false
          },
          "images_extracted": {
            "type": "integer",
            "title": "Images Extracted",
            "description": "Number of images extracted from this page",
            "default": 0
          },
          "ocr_applied": {
            "type": "boolean",
            "title": "Ocr Applied",
            "description": "Whether OCR was applied to this page",
            "default": false
          },
          "ocr_confidence": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ocr Confidence",
            "description": "OCR confidence score (0-1)"
          },
          "processing_time_ms": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Processing Time Ms",
            "description": "Time taken to process this page"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message",
            "description": "Error message if processing failed"
          },
          "database_saved": {
            "type": "boolean",
            "title": "Database Saved",
            "description": "Whether page data was saved to database",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "page_number",
          "stage",
          "status"
        ],
        "title": "PageProcessingStatus",
        "description": "Status of individual page processing."
      },
      "ProcessingStage": {
        "type": "string",
        "enum": [
          "initializing",
          "downloading",
          "analyzing_structure",
          "extracting_text",
          "extracting_images",
          "ocr_processing",
          "saving_to_database",
          "generating_embeddings",
          "finalizing",
          "completed",
          "failed"
        ],
        "title": "ProcessingStage",
        "description": "Processing stage enumeration for detailed progress tracking."
      },
      "ProcessingStatus": {
        "type": "string",
        "enum": [
          "pending",
          "processing",
          "completed",
          "failed",
          "cancelled"
        ],
        "title": "ProcessingStatus",
        "description": "Status enumeration for processing jobs."
      },
      "ProductCreationRequest": {
        "properties": {
          "document_id": {
            "type": "string",
            "title": "Document Id",
            "description": "UUID of the processed document"
          },
          "workspace_id": {
            "type": "string",
            "title": "Workspace Id",
            "description": "UUID of the workspace",
            "default": "ffafc28b-1b8b-4b0d-b226-9f9a6154004e"
          },
          "max_products": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Products",
            "description": "Maximum number of products to create (None = unlimited)"
          },
          "min_chunk_length": {
            "type": "integer",
            "title": "Min Chunk Length",
            "description": "Minimum chunk content length to consider for products",
            "default": 100
          }
        },
        "type": "object",
        "required": [
          "document_id"
        ],
        "title": "ProductCreationRequest",
        "description": "Request model for creating products from chunks."
      },
      "ProductCreationResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the operation was successful"
          },
          "products_created": {
            "type": "integer",
            "title": "Products Created",
            "description": "Number of products created"
          },
          "products_failed": {
            "type": "integer",
            "title": "Products Failed",
            "description": "Number of products that failed to create"
          },
          "chunks_processed": {
            "type": "integer",
            "title": "Chunks Processed",
            "description": "Number of chunks processed"
          },
          "total_chunks": {
            "type": "integer",
            "title": "Total Chunks",
            "description": "Total number of chunks available"
          },
          "eligible_chunks": {
            "type": "integer",
            "title": "Eligible Chunks",
            "description": "Number of chunks that met criteria"
          },
          "stage1_candidates": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Stage1 Candidates",
            "description": "Number of candidates from Stage 1"
          },
          "stage1_time": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Stage1 Time",
            "description": "Time spent in Stage 1 (seconds)"
          },
          "stage2_time": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Stage2 Time",
            "description": "Time spent in Stage 2 (seconds)"
          },
          "total_time": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Time",
            "description": "Total AI processing time (seconds)"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable result message"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if operation failed"
          }
        },
        "type": "object",
        "required": [
          "success",
          "products_created",
          "products_failed",
          "chunks_processed",
          "total_chunks",
          "eligible_chunks",
          "message"
        ],
        "title": "ProductCreationResponse",
        "description": "Response model for product creation results."
      },
      "ProductDocumentRelationshipResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "product_id": {
            "type": "string",
            "title": "Product Id"
          },
          "document_entity_id": {
            "type": "string",
            "title": "Document Entity Id"
          },
          "relationship_type": {
            "type": "string",
            "title": "Relationship Type"
          },
          "relevance_score": {
            "type": "number",
            "title": "Relevance Score"
          },
          "metadata": {
            "type": "object",
            "title": "Metadata",
            "default": {}
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "product_id",
          "document_entity_id",
          "relationship_type",
          "relevance_score",
          "created_at"
        ],
        "title": "ProductDocumentRelationshipResponse",
        "description": "Response model for product-document relationship."
      },
      "ProductEnrichmentRequest": {
        "properties": {
          "chunk_id": {
            "type": "string",
            "title": "Chunk Id"
          },
          "chunk_content": {
            "type": "string",
            "title": "Chunk Content"
          },
          "workspace_id": {
            "type": "string",
            "title": "Workspace Id"
          }
        },
        "type": "object",
        "required": [
          "chunk_id",
          "chunk_content",
          "workspace_id"
        ],
        "title": "ProductEnrichmentRequest"
      },
      "ProductEnrichmentResponse": {
        "properties": {
          "chunk_id": {
            "type": "string",
            "title": "Chunk Id"
          },
          "enrichment_status": {
            "type": "string",
            "title": "Enrichment Status"
          },
          "product_name": {
            "type": "string",
            "title": "Product Name"
          },
          "product_category": {
            "type": "string",
            "title": "Product Category"
          },
          "product_description": {
            "type": "string",
            "title": "Product Description"
          },
          "specifications": {
            "type": "object",
            "title": "Specifications"
          },
          "related_products": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Related Products"
          },
          "confidence_score": {
            "type": "number",
            "title": "Confidence Score"
          },
          "processing_time_ms": {
            "type": "number",
            "title": "Processing Time Ms"
          }
        },
        "type": "object",
        "required": [
          "chunk_id",
          "enrichment_status",
          "product_name",
          "product_category",
          "product_description",
          "specifications",
          "related_products",
          "confidence_score",
          "processing_time_ms"
        ],
        "title": "ProductEnrichmentResponse"
      },
      "PromptHistoryResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "prompt_id": {
            "type": "string",
            "title": "Prompt Id"
          },
          "old_prompt": {
            "type": "string",
            "title": "Old Prompt"
          },
          "new_prompt": {
            "type": "string",
            "title": "New Prompt"
          },
          "changed_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Changed By"
          },
          "change_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Change Reason"
          },
          "changed_at": {
            "type": "string",
            "title": "Changed At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "prompt_id",
          "old_prompt",
          "new_prompt",
          "changed_by",
          "change_reason",
          "changed_at"
        ],
        "title": "PromptHistoryResponse",
        "description": "Prompt history response"
      },
      "PromptResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "workspace_id": {
            "type": "string",
            "title": "Workspace Id"
          },
          "stage": {
            "type": "string",
            "title": "Stage"
          },
          "category": {
            "type": "string",
            "title": "Category"
          },
          "prompt_template": {
            "type": "string",
            "title": "Prompt Template"
          },
          "system_prompt": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "System Prompt"
          },
          "is_custom": {
            "type": "boolean",
            "title": "Is Custom"
          },
          "version": {
            "type": "integer",
            "title": "Version"
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "workspace_id",
          "stage",
          "category",
          "prompt_template",
          "is_custom",
          "version",
          "created_at",
          "updated_at"
        ],
        "title": "PromptResponse",
        "description": "Prompt response model"
      },
      "ReviewAction": {
        "properties": {
          "action": {
            "type": "string",
            "title": "Action"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          }
        },
        "type": "object",
        "required": [
          "action"
        ],
        "title": "ReviewAction",
        "description": "Review action request model."
      },
      "SearchResult": {
        "properties": {
          "document_id": {
            "type": "string",
            "title": "Document Id",
            "description": "Source document ID"
          },
          "document_name": {
            "type": "string",
            "title": "Document Name",
            "description": "Document name"
          },
          "chunk_id": {
            "type": "string",
            "title": "Chunk Id",
            "description": "Matching chunk ID"
          },
          "content": {
            "type": "string",
            "title": "Content",
            "description": "Matching content snippet"
          },
          "similarity_score": {
            "type": "number",
            "title": "Similarity Score",
            "description": "Similarity score (0-1)"
          },
          "keyword_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Keyword Score",
            "description": "Keyword matching score"
          },
          "combined_score": {
            "type": "number",
            "title": "Combined Score",
            "description": "Final combined relevance score"
          },
          "multimodal_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Multimodal Score",
            "description": "Multi-modal relevance score (0-1)"
          },
          "ocr_confidence": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ocr Confidence",
            "description": "OCR extraction confidence (0-1)"
          },
          "page_number": {
            "type": "integer",
            "title": "Page Number",
            "description": "Source page number"
          },
          "context_before": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Context Before",
            "description": "Text before the match"
          },
          "context_after": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Context After",
            "description": "Text after the match"
          },
          "content_type": {
            "type": "string",
            "title": "Content Type",
            "description": "Content type (text, image, mixed)",
            "default": "text"
          },
          "ocr_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ocr Text",
            "description": "OCR-extracted text content"
          },
          "associated_images": {
            "items": {
              "type": "object"
            },
            "type": "array",
            "title": "Associated Images",
            "description": "Associated image information"
          },
          "image_analysis": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Image Analysis",
            "description": "Image analysis results"
          },
          "highlighted_content": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Highlighted Content",
            "description": "Content with search terms highlighted"
          },
          "document_tags": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Document Tags",
            "description": "Document tags"
          },
          "chunk_metadata": {
            "type": "object",
            "title": "Chunk Metadata",
            "description": "Chunk metadata"
          },
          "filename": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Filename",
            "description": "Original filename of the document"
          },
          "processing_status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Processing Status",
            "description": "Document processing status"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "description": "Document creation timestamp"
          },
          "source_metadata": {
            "type": "object",
            "title": "Source Metadata",
            "description": "Complete document metadata including file info"
          }
        },
        "type": "object",
        "required": [
          "document_id",
          "document_name",
          "chunk_id",
          "content",
          "similarity_score",
          "combined_score",
          "page_number"
        ],
        "title": "SearchResult",
        "description": "Individual search result."
      },
      "SemanticAnalysisAPIRequest": {
        "properties": {
          "image_data": {
            "type": "string",
            "minLength": 1,
            "title": "Image Data",
            "description": "Base64 encoded image data or image URL"
          },
          "analysis_type": {
            "type": "string",
            "title": "Analysis Type",
            "description": "Type of analysis to perform",
            "default": "material_identification"
          },
          "prompt": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Prompt",
            "description": "Custom analysis prompt (optional)"
          },
          "options": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Options",
            "description": "Additional analysis options"
          }
        },
        "type": "object",
        "required": [
          "image_data"
        ],
        "title": "SemanticAnalysisAPIRequest",
        "description": "API request model for semantic analysis endpoint."
      },
      "SemanticAnalysisAPIResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Indicates if the request was successful",
            "default": true
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Optional message or description"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Response timestamp"
          },
          "analysis": {
            "type": "string",
            "title": "Analysis",
            "description": "Generated semantic description"
          },
          "confidence": {
            "type": "number",
            "title": "Confidence",
            "description": "Analysis confidence score (0.0-1.0)"
          },
          "model_used": {
            "type": "string",
            "title": "Model Used",
            "description": "AI model used for analysis"
          },
          "processing_time_ms": {
            "type": "integer",
            "title": "Processing Time Ms",
            "description": "Processing time in milliseconds"
          },
          "metadata": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata",
            "description": "Additional analysis metadata"
          }
        },
        "type": "object",
        "required": [
          "analysis",
          "confidence",
          "model_used",
          "processing_time_ms"
        ],
        "title": "SemanticAnalysisAPIResponse",
        "description": "API response model for semantic analysis endpoint."
      },
      "SemanticSearchRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 1000,
            "minLength": 1,
            "title": "Query",
            "description": "Search query for semantic matching"
          },
          "document_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Document Ids",
            "description": "Specific document IDs to search (if None, searches all)"
          },
          "similarity_threshold": {
            "type": "number",
            "maximum": 1,
            "minimum": 0,
            "title": "Similarity Threshold",
            "description": "Minimum similarity score threshold",
            "default": 0.7
          },
          "max_results": {
            "type": "integer",
            "maximum": 100,
            "minimum": 1,
            "title": "Max Results",
            "description": "Maximum number of results to return",
            "default": 20
          },
          "include_metadata": {
            "type": "boolean",
            "title": "Include Metadata",
            "description": "Whether to include result metadata",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "SemanticSearchRequest",
        "description": "Request model for semantic search across documents.",
        "example": {
          "document_ids": [
            "doc_123",
            "doc_456"
          ],
          "include_metadata": true,
          "max_results": 10,
          "query": "machine learning algorithms",
          "similarity_threshold": 0.75
        }
      },
      "SemanticSearchResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Indicates if the request was successful",
            "default": true
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Optional message or description"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Response timestamp"
          },
          "query": {
            "type": "string",
            "title": "Query",
            "description": "Original search query"
          },
          "results": {
            "items": {
              "type": "object"
            },
            "type": "array",
            "title": "Results",
            "description": "Search results with similarity scores"
          },
          "total_results": {
            "type": "integer",
            "title": "Total Results",
            "description": "Total number of results found"
          },
          "metadata": {
            "type": "object",
            "title": "Metadata",
            "description": "Search metadata and statistics"
          }
        },
        "type": "object",
        "required": [
          "query",
          "total_results"
        ],
        "title": "SemanticSearchResponse",
        "description": "Response model for semantic search operations.",
        "example": {
          "metadata": {
            "search_time": 1.2,
            "searched_documents": 10,
            "similarity_threshold": 0.75
          },
          "query": "machine learning algorithms",
          "results": [
            {
              "content": "Machine learning algorithms are...",
              "document_id": "doc_123",
              "metadata": {
                "page": 1,
                "section": "Introduction"
              },
              "score": 0.85
            }
          ],
          "success": true,
          "timestamp": "2024-07-26T18:00:00Z",
          "total_results": 5
        }
      },
      "SimilarDocument": {
        "properties": {
          "document_id": {
            "type": "string",
            "title": "Document Id",
            "description": "Document ID"
          },
          "document_name": {
            "type": "string",
            "title": "Document Name",
            "description": "Document name"
          },
          "similarity_score": {
            "type": "number",
            "title": "Similarity Score",
            "description": "Similarity score (0-1)"
          },
          "page_count": {
            "type": "integer",
            "title": "Page Count",
            "description": "Number of pages"
          },
          "word_count": {
            "type": "integer",
            "title": "Word Count",
            "description": "Word count"
          },
          "tags": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Tags",
            "description": "Document tags"
          },
          "created_at": {
            "type": "string",
            "title": "Created At",
            "description": "Creation timestamp"
          },
          "matching_topics": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Matching Topics",
            "description": "Common topics/themes"
          },
          "content_overlap": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content Overlap",
            "description": "Content overlap percentage"
          }
        },
        "type": "object",
        "required": [
          "document_id",
          "document_name",
          "similarity_score",
          "page_count",
          "word_count",
          "created_at"
        ],
        "title": "SimilarDocument",
        "description": "Similar document result."
      },
      "SimilarImage": {
        "properties": {
          "image_id": {
            "type": "string",
            "title": "Image Id",
            "description": "Image identifier"
          },
          "document_id": {
            "type": "string",
            "title": "Document Id",
            "description": "Source document ID"
          },
          "document_name": {
            "type": "string",
            "title": "Document Name",
            "description": "Source document name"
          },
          "page_number": {
            "type": "integer",
            "title": "Page Number",
            "description": "Page number where image appears"
          },
          "similarity_score": {
            "type": "number",
            "title": "Similarity Score",
            "description": "Visual similarity score (0-1)"
          },
          "content_similarity": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content Similarity",
            "description": "Content/description similarity"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Image description"
          },
          "tags": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Tags",
            "description": "Image tags"
          },
          "dimensions": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Dimensions",
            "description": "Image dimensions"
          },
          "image_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Image Url",
            "description": "URL to access the image"
          }
        },
        "type": "object",
        "required": [
          "image_id",
          "document_id",
          "document_name",
          "page_number",
          "similarity_score",
          "dimensions"
        ],
        "title": "SimilarImage",
        "description": "Similar image search result."
      },
      "SimilaritySearchRequest": {
        "properties": {
          "reference_document_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reference Document Id",
            "description": "Find documents similar to this one"
          },
          "reference_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reference Text",
            "description": "Find documents similar to this text"
          },
          "limit": {
            "type": "integer",
            "maximum": 50,
            "minimum": 1,
            "title": "Limit",
            "description": "Maximum number of similar documents",
            "default": 10
          },
          "similarity_threshold": {
            "type": "number",
            "maximum": 1,
            "minimum": 0,
            "title": "Similarity Threshold",
            "description": "Minimum similarity score",
            "default": 0.5
          },
          "exclude_self": {
            "type": "boolean",
            "title": "Exclude Self",
            "description": "Exclude reference document from results",
            "default": true
          },
          "tags": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tags",
            "description": "Filter by document tags"
          },
          "document_types": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Document Types",
            "description": "Filter by document types"
          }
        },
        "type": "object",
        "title": "SimilaritySearchRequest",
        "description": "Request model for similarity-based document search."
      },
      "SimilaritySearchResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Indicates if the request was successful",
            "default": true
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Optional message or description"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Response timestamp"
          },
          "reference_info": {
            "type": "object",
            "title": "Reference Info",
            "description": "Information about the reference"
          },
          "similar_documents": {
            "items": {
              "$ref": "#/components/schemas/SimilarDocument"
            },
            "type": "array",
            "title": "Similar Documents",
            "description": "Similar documents found"
          },
          "total_found": {
            "type": "integer",
            "title": "Total Found",
            "description": "Total number of similar documents"
          },
          "search_time_ms": {
            "type": "number",
            "title": "Search Time Ms",
            "description": "Search execution time"
          }
        },
        "type": "object",
        "required": [
          "reference_info",
          "similar_documents",
          "total_found",
          "search_time_ms"
        ],
        "title": "SimilaritySearchResponse",
        "description": "Response model for similarity search."
      },
      "SourceCitation": {
        "properties": {
          "document_id": {
            "type": "string",
            "title": "Document Id",
            "description": "Source document ID"
          },
          "document_name": {
            "type": "string",
            "title": "Document Name",
            "description": "Document name"
          },
          "chunk_id": {
            "type": "string",
            "title": "Chunk Id",
            "description": "Source chunk ID"
          },
          "page_number": {
            "type": "integer",
            "title": "Page Number",
            "description": "Page number"
          },
          "relevance_score": {
            "type": "number",
            "title": "Relevance Score",
            "description": "Relevance to the question"
          },
          "excerpt": {
            "type": "string",
            "title": "Excerpt",
            "description": "Relevant text excerpt"
          },
          "content_type": {
            "type": "string",
            "title": "Content Type",
            "description": "Content type (text, image, mixed)",
            "default": "text"
          },
          "ocr_excerpt": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ocr Excerpt",
            "description": "OCR-extracted text excerpt"
          },
          "image_reference": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Image Reference",
            "description": "Associated image information"
          },
          "multimodal_confidence": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Multimodal Confidence",
            "description": "Multi-modal analysis confidence"
          }
        },
        "type": "object",
        "required": [
          "document_id",
          "document_name",
          "chunk_id",
          "page_number",
          "relevance_score",
          "excerpt"
        ],
        "title": "SourceCitation",
        "description": "Source citation for RAG responses."
      },
      "SuccessResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Always true for success responses",
            "default": true
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Optional message or description"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Response timestamp"
          },
          "data": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data",
            "description": "Response data payload"
          }
        },
        "type": "object",
        "title": "SuccessResponse",
        "description": "Success response model with optional data payload.",
        "example": {
          "data": {
            "count": 42,
            "result": "example_value"
          },
          "message": "Operation completed successfully",
          "success": true,
          "timestamp": "2024-07-26T18:00:00Z"
        }
      },
      "TaskBreakdown": {
        "properties": {
          "task": {
            "type": "string",
            "title": "Task"
          },
          "call_count": {
            "type": "integer",
            "title": "Call Count"
          },
          "total_cost": {
            "type": "number",
            "title": "Total Cost"
          },
          "average_confidence": {
            "type": "number",
            "title": "Average Confidence"
          },
          "models_used": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Models Used"
          }
        },
        "type": "object",
        "required": [
          "task",
          "call_count",
          "total_cost",
          "average_confidence",
          "models_used"
        ],
        "title": "TaskBreakdown"
      },
      "TestPromptRequest": {
        "properties": {
          "stage": {
            "type": "string",
            "title": "Stage"
          },
          "category": {
            "type": "string",
            "title": "Category"
          },
          "prompt_template": {
            "type": "string",
            "title": "Prompt Template"
          },
          "test_content": {
            "type": "string",
            "title": "Test Content"
          }
        },
        "type": "object",
        "required": [
          "stage",
          "category",
          "prompt_template",
          "test_content"
        ],
        "title": "TestPromptRequest",
        "description": "Test prompt request"
      },
      "TestPromptResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "result": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Result"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          },
          "execution_time_ms": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Execution Time Ms"
          }
        },
        "type": "object",
        "required": [
          "success"
        ],
        "title": "TestPromptResponse",
        "description": "Test prompt response"
      },
      "UpdateExtractionConfigRequest": {
        "properties": {
          "enabled_categories": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Enabled Categories"
          },
          "default_categories": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Default Categories"
          },
          "discovery_model": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Discovery Model"
          },
          "chunk_size": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chunk Size"
          },
          "chunk_overlap": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chunk Overlap"
          },
          "enable_prompt_enhancement": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Enable Prompt Enhancement"
          },
          "quality_threshold": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Quality Threshold"
          }
        },
        "type": "object",
        "title": "UpdateExtractionConfigRequest",
        "description": "Update extraction config request"
      },
      "UpdatePromptRequest": {
        "properties": {
          "prompt_template": {
            "type": "string",
            "title": "Prompt Template",
            "description": "New prompt template"
          },
          "system_prompt": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "System Prompt",
            "description": "Optional system prompt"
          },
          "change_reason": {
            "type": "string",
            "title": "Change Reason",
            "description": "Reason for the change"
          }
        },
        "type": "object",
        "required": [
          "prompt_template",
          "change_reason"
        ],
        "title": "UpdatePromptRequest",
        "description": "Update prompt request"
      },
      "ValidateProductRequest": {
        "properties": {
          "product_data": {
            "type": "object",
            "title": "Product Data",
            "description": "Product metadata"
          },
          "chunks": {
            "items": {
              "type": "object"
            },
            "type": "array",
            "title": "Chunks",
            "description": "Associated chunks"
          },
          "images": {
            "anyOf": [
              {
                "items": {
                  "type": "object"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Images",
            "description": "Associated images"
          }
        },
        "type": "object",
        "required": [
          "product_data",
          "chunks"
        ],
        "title": "ValidateProductRequest",
        "description": "Request for product validation."
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "app__api__rag_routes__QueryRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 2000,
            "minLength": 1,
            "title": "Query",
            "description": "Query text"
          },
          "top_k": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 20,
                "minimum": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Top K",
            "description": "Number of top results to retrieve",
            "default": 5
          },
          "similarity_threshold": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1,
                "minimum": 0
              },
              {
                "type": "null"
              }
            ],
            "title": "Similarity Threshold",
            "description": "Similarity threshold",
            "default": 0.7
          },
          "include_metadata": {
            "type": "boolean",
            "title": "Include Metadata",
            "description": "Include document metadata in response",
            "default": true
          },
          "enable_reranking": {
            "type": "boolean",
            "title": "Enable Reranking",
            "description": "Enable result reranking",
            "default": true
          },
          "document_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Document Ids",
            "description": "Filter by specific document IDs"
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "QueryRequest",
        "description": "Request model for RAG queries."
      },
      "app__api__rag_routes__QueryResponse": {
        "properties": {
          "query": {
            "type": "string",
            "title": "Query",
            "description": "Original query"
          },
          "answer": {
            "type": "string",
            "title": "Answer",
            "description": "Generated answer"
          },
          "sources": {
            "items": {
              "type": "object"
            },
            "type": "array",
            "title": "Sources",
            "description": "Source documents and chunks"
          },
          "confidence_score": {
            "type": "number",
            "title": "Confidence Score",
            "description": "Confidence score for the answer"
          },
          "processing_time": {
            "type": "number",
            "title": "Processing Time",
            "description": "Query processing time in seconds"
          },
          "retrieved_chunks": {
            "type": "integer",
            "title": "Retrieved Chunks",
            "description": "Number of chunks retrieved"
          }
        },
        "type": "object",
        "required": [
          "query",
          "answer",
          "sources",
          "confidence_score",
          "processing_time",
          "retrieved_chunks"
        ],
        "title": "QueryResponse",
        "description": "Response model for RAG queries."
      },
      "app__api__rag_routes__SearchRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 1000,
            "minLength": 1,
            "title": "Query",
            "description": "Search query"
          },
          "search_type": {
            "type": "string",
            "pattern": "^(semantic|hybrid|keyword)$",
            "title": "Search Type",
            "description": "Search type",
            "default": "semantic"
          },
          "top_k": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 50,
                "minimum": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Top K",
            "description": "Number of results to return",
            "default": 10
          },
          "similarity_threshold": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1,
                "minimum": 0
              },
              {
                "type": "null"
              }
            ],
            "title": "Similarity Threshold",
            "description": "Similarity threshold",
            "default": 0.6
          },
          "document_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Document Ids",
            "description": "Filter by document IDs"
          },
          "include_content": {
            "type": "boolean",
            "title": "Include Content",
            "description": "Include chunk content in results",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "SearchRequest",
        "description": "Request model for semantic search."
      },
      "app__api__rag_routes__SearchResponse": {
        "properties": {
          "query": {
            "type": "string",
            "title": "Query",
            "description": "Original search query"
          },
          "results": {
            "items": {
              "type": "object"
            },
            "type": "array",
            "title": "Results",
            "description": "Search results"
          },
          "total_results": {
            "type": "integer",
            "title": "Total Results",
            "description": "Total number of results"
          },
          "search_type": {
            "type": "string",
            "title": "Search Type",
            "description": "Type of search performed"
          },
          "processing_time": {
            "type": "number",
            "title": "Processing Time",
            "description": "Search processing time"
          }
        },
        "type": "object",
        "required": [
          "query",
          "results",
          "total_results",
          "search_type",
          "processing_time"
        ],
        "title": "SearchResponse",
        "description": "Response model for semantic search."
      },
      "app__schemas__images__ImageSearchRequest": {
        "properties": {
          "query_image_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Query Image Id",
            "description": "Find images similar to this one"
          },
          "query_description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Query Description",
            "description": "Find images matching this description"
          },
          "limit": {
            "type": "integer",
            "maximum": 50,
            "minimum": 1,
            "title": "Limit",
            "description": "Maximum number of results",
            "default": 10
          },
          "similarity_threshold": {
            "type": "number",
            "maximum": 1,
            "minimum": 0,
            "title": "Similarity Threshold",
            "description": "Minimum similarity score",
            "default": 0.7
          },
          "document_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Document Ids",
            "description": "Limit search to specific documents"
          },
          "image_types": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Image Types",
            "description": "Filter by image types (diagram, photo, etc.)"
          },
          "tags": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tags",
            "description": "Filter by image tags"
          }
        },
        "type": "object",
        "title": "ImageSearchRequest",
        "description": "Request model for image similarity search.",
        "example": {
          "image_types": [
            "diagram",
            "chart"
          ],
          "limit": 15,
          "query_description": "neural network diagram",
          "similarity_threshold": 0.8,
          "tags": [
            "ai",
            "machine learning"
          ]
        }
      },
      "app__schemas__images__ImageSearchResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Indicates if the request was successful",
            "default": true
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Optional message or description"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Response timestamp"
          },
          "query_info": {
            "type": "object",
            "title": "Query Info",
            "description": "Information about the search query"
          },
          "similar_images": {
            "items": {
              "$ref": "#/components/schemas/SimilarImage"
            },
            "type": "array",
            "title": "Similar Images",
            "description": "Similar images found"
          },
          "total_found": {
            "type": "integer",
            "title": "Total Found",
            "description": "Total number of similar images"
          },
          "search_time_ms": {
            "type": "number",
            "title": "Search Time Ms",
            "description": "Search execution time"
          }
        },
        "type": "object",
        "required": [
          "query_info",
          "similar_images",
          "total_found",
          "search_time_ms"
        ],
        "title": "ImageSearchResponse",
        "description": "Response model for image search.",
        "example": {
          "query_info": {
            "query": "neural network diagram",
            "type": "description"
          },
          "search_time_ms": 245.7,
          "similar_images": [
            {
              "description": "Convolutional neural network architecture diagram",
              "dimensions": {
                "height": 600,
                "width": 800
              },
              "document_id": "doc_123",
              "document_name": "Deep Learning Paper",
              "image_id": "img_789",
              "page_number": 5,
              "similarity_score": 0.92,
              "tags": [
                "cnn",
                "architecture",
                "diagram"
              ]
            }
          ],
          "success": true,
          "timestamp": "2024-07-26T18:00:00Z",
          "total_found": 8
        }
      },
      "app__schemas__search__ImageSearchRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 1000,
            "minLength": 1,
            "title": "Query",
            "description": "Image search query"
          },
          "document_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Document Ids",
            "description": "Limit search to specific documents"
          },
          "limit": {
            "type": "integer",
            "maximum": 50,
            "minimum": 1,
            "title": "Limit",
            "description": "Maximum number of results",
            "default": 10
          },
          "similarity_threshold": {
            "type": "number",
            "maximum": 1,
            "minimum": 0,
            "title": "Similarity Threshold",
            "description": "Minimum similarity score",
            "default": 0.6
          },
          "include_ocr_text": {
            "type": "boolean",
            "title": "Include Ocr Text",
            "description": "Include OCR-extracted text in search",
            "default": true
          },
          "ocr_confidence_threshold": {
            "type": "number",
            "maximum": 1,
            "minimum": 0,
            "title": "Ocr Confidence Threshold",
            "description": "Minimum OCR confidence threshold",
            "default": 0.5
          },
          "visual_similarity_threshold": {
            "type": "number",
            "maximum": 1,
            "minimum": 0,
            "title": "Visual Similarity Threshold",
            "description": "Minimum visual similarity threshold",
            "default": 0.75
          },
          "search_type": {
            "type": "string",
            "pattern": "^(visual_similarity|semantic_analysis|hybrid|material_properties)$",
            "title": "Search Type",
            "description": "Type of visual search",
            "default": "visual_similarity"
          },
          "analysis_depth": {
            "type": "string",
            "pattern": "^(basic|standard|detailed)$",
            "title": "Analysis Depth",
            "description": "Level of image analysis",
            "default": "standard"
          },
          "include_visual_features": {
            "type": "boolean",
            "title": "Include Visual Features",
            "description": "Include visual feature analysis",
            "default": true
          },
          "image_analysis_model": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Image Analysis Model",
            "description": "Specific image analysis model to use"
          },
          "material_filters": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Material Filters",
            "description": "Material property filters"
          },
          "material_types": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Material Types",
            "description": "Filter by specific material types"
          },
          "confidence_threshold": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1,
                "minimum": 0
              },
              {
                "type": "null"
              }
            ],
            "title": "Confidence Threshold",
            "description": "Minimum material analysis confidence"
          },
          "spectral_filters": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Spectral Filters",
            "description": "Spectral analysis filters"
          },
          "chemical_filters": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chemical Filters",
            "description": "Chemical composition filters"
          },
          "mechanical_filters": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mechanical Filters",
            "description": "Mechanical property filters"
          },
          "fusion_weights": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "number"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fusion Weights",
            "description": "Weights for combining different analysis types"
          },
          "enable_clip_embeddings": {
            "type": "boolean",
            "title": "Enable Clip Embeddings",
            "description": "Enable CLIP embedding generation for visual similarity",
            "default": true
          },
          "enable_llama_analysis": {
            "type": "boolean",
            "title": "Enable Llama Analysis",
            "description": "Enable LLaMA Vision analysis for material properties",
            "default": false
          },
          "include_analytics": {
            "type": "boolean",
            "title": "Include Analytics",
            "description": "Include search analytics in response",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "ImageSearchRequest",
        "description": "Request model for image-based search with material-specific filtering."
      },
      "app__schemas__search__ImageSearchResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Indicates if the request was successful",
            "default": true
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Optional message or description"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Response timestamp"
          },
          "query": {
            "type": "string",
            "title": "Query",
            "description": "Original search query"
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/ImageSearchResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Image search results"
          },
          "total_found": {
            "type": "integer",
            "title": "Total Found",
            "description": "Total number of matching images"
          },
          "search_time_ms": {
            "type": "number",
            "title": "Search Time Ms",
            "description": "Search execution time in milliseconds"
          },
          "analysis_depth": {
            "type": "string",
            "title": "Analysis Depth",
            "description": "Level of analysis performed"
          },
          "ocr_enabled": {
            "type": "boolean",
            "title": "Ocr Enabled",
            "description": "Whether OCR was enabled"
          }
        },
        "type": "object",
        "required": [
          "query",
          "results",
          "total_found",
          "search_time_ms",
          "analysis_depth",
          "ocr_enabled"
        ],
        "title": "ImageSearchResponse",
        "description": "Response model for image search operations."
      },
      "app__schemas__search__QueryRequest": {
        "properties": {
          "question": {
            "type": "string",
            "maxLength": 2000,
            "minLength": 1,
            "title": "Question",
            "description": "Question to answer"
          },
          "context_documents": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Context Documents",
            "description": "Specific documents to use as context"
          },
          "context_tags": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Context Tags",
            "description": "Filter context by tags"
          },
          "max_context_chunks": {
            "type": "integer",
            "maximum": 20,
            "minimum": 1,
            "title": "Max Context Chunks",
            "description": "Maximum context chunks to retrieve",
            "default": 5
          },
          "temperature": {
            "type": "number",
            "maximum": 2,
            "minimum": 0,
            "title": "Temperature",
            "description": "Response creativity (0=focused, 2=creative)",
            "default": 0.7
          },
          "max_tokens": {
            "type": "integer",
            "maximum": 2000,
            "minimum": 50,
            "title": "Max Tokens",
            "description": "Maximum response length",
            "default": 500
          },
          "include_image_context": {
            "type": "boolean",
            "title": "Include Image Context",
            "description": "Include image analysis in context retrieval",
            "default": false
          },
          "include_ocr_context": {
            "type": "boolean",
            "title": "Include Ocr Context",
            "description": "Include OCR-extracted text in context",
            "default": true
          },
          "multimodal_llm_model": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Multimodal Llm Model",
            "description": "Specific multi-modal LLM model to use"
          },
          "image_analysis_depth": {
            "type": "string",
            "pattern": "^(basic|standard|detailed)$",
            "title": "Image Analysis Depth",
            "description": "Level of image analysis",
            "default": "standard"
          },
          "include_sources": {
            "type": "boolean",
            "title": "Include Sources",
            "description": "Include source citations in response",
            "default": true
          },
          "include_confidence": {
            "type": "boolean",
            "title": "Include Confidence",
            "description": "Include confidence score",
            "default": true
          },
          "include_image_references": {
            "type": "boolean",
            "title": "Include Image References",
            "description": "Include image references in response",
            "default": false
          },
          "response_format": {
            "type": "string",
            "pattern": "^(text|markdown|json)$",
            "title": "Response Format",
            "description": "Response format",
            "default": "markdown"
          }
        },
        "type": "object",
        "required": [
          "question"
        ],
        "title": "QueryRequest",
        "description": "Request model for RAG-based question answering."
      },
      "app__schemas__search__QueryResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Indicates if the request was successful",
            "default": true
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Optional message or description"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Response timestamp"
          },
          "question": {
            "type": "string",
            "title": "Question",
            "description": "Original question"
          },
          "answer": {
            "type": "string",
            "title": "Answer",
            "description": "Generated answer"
          },
          "confidence_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Confidence Score",
            "description": "Answer confidence (0-1)"
          },
          "completeness_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completeness Score",
            "description": "Answer completeness (0-1)"
          },
          "multimodal_confidence": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Multimodal Confidence",
            "description": "Multi-modal analysis confidence (0-1)"
          },
          "sources": {
            "items": {
              "$ref": "#/components/schemas/SourceCitation"
            },
            "type": "array",
            "title": "Sources",
            "description": "Source citations"
          },
          "context_used": {
            "type": "integer",
            "title": "Context Used",
            "description": "Number of context chunks used"
          },
          "image_context_used": {
            "type": "integer",
            "title": "Image Context Used",
            "description": "Number of image contexts used",
            "default": 0
          },
          "image_references": {
            "items": {
              "type": "object"
            },
            "type": "array",
            "title": "Image References",
            "description": "Referenced images in response"
          },
          "multimodal_analysis": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Multimodal Analysis",
            "description": "Multi-modal analysis results"
          },
          "processing_time_ms": {
            "type": "number",
            "title": "Processing Time Ms",
            "description": "Query processing time"
          },
          "model_used": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Model Used",
            "description": "AI model used for generation"
          },
          "multimodal_model_used": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Multimodal Model Used",
            "description": "Multi-modal model used for analysis"
          }
        },
        "type": "object",
        "required": [
          "question",
          "answer",
          "context_used",
          "processing_time_ms"
        ],
        "title": "QueryResponse",
        "description": "Response model for RAG-based queries.",
        "example": {
          "answer": "Transformer architectures offer several key benefits:\n\n1. **Parallel Processing**: Unlike RNNs...",
          "completeness_score": 0.88,
          "confidence_score": 0.92,
          "context_used": 5,
          "processing_time_ms": 1250.5,
          "question": "What are the main benefits of transformer architectures?",
          "sources": [
            {
              "chunk_id": "chunk_456",
              "document_id": "doc_123",
              "document_name": "Attention Is All You Need",
              "excerpt": "The Transformer allows for significantly more parallelization...",
              "page_number": 3,
              "relevance_score": 0.95
            }
          ],
          "success": true,
          "timestamp": "2024-07-26T18:00:00Z"
        }
      },
      "app__schemas__search__SearchRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 1000,
            "minLength": 1,
            "title": "Query",
            "description": "Search query"
          },
          "document_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Document Ids",
            "description": "Limit search to specific documents"
          },
          "tags": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tags",
            "description": "Filter by document tags"
          },
          "limit": {
            "type": "integer",
            "maximum": 100,
            "minimum": 1,
            "title": "Limit",
            "description": "Maximum number of results",
            "default": 10
          },
          "similarity_threshold": {
            "type": "number",
            "maximum": 1,
            "minimum": 0,
            "title": "Similarity Threshold",
            "description": "Minimum similarity score",
            "default": 0.7
          },
          "search_type": {
            "type": "string",
            "pattern": "^(semantic|keyword|hybrid|multimodal)$",
            "title": "Search Type",
            "description": "Type of search",
            "default": "hybrid"
          },
          "include_images": {
            "type": "boolean",
            "title": "Include Images",
            "description": "Include image analysis in search results",
            "default": false
          },
          "include_ocr_text": {
            "type": "boolean",
            "title": "Include Ocr Text",
            "description": "Include OCR-extracted text in search",
            "default": true
          },
          "content_types": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content Types",
            "description": "Filter by content types (text, image, mixed)"
          },
          "ocr_confidence_threshold": {
            "type": "number",
            "maximum": 1,
            "minimum": 0,
            "title": "Ocr Confidence Threshold",
            "description": "Minimum OCR confidence threshold",
            "default": 0.5
          },
          "date_from": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Date From",
            "description": "Filter documents from date (ISO format)"
          },
          "date_to": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Date To",
            "description": "Filter documents to date (ISO format)"
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "SearchRequest",
        "description": "Request model for document search."
      },
      "app__schemas__search__SearchResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Indicates if the request was successful",
            "default": true
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Optional message or description"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Response timestamp"
          },
          "query": {
            "type": "string",
            "title": "Query",
            "description": "Original search query"
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/SearchResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Search results"
          },
          "total_found": {
            "type": "integer",
            "title": "Total Found",
            "description": "Total number of matching results"
          },
          "search_time_ms": {
            "type": "number",
            "title": "Search Time Ms",
            "description": "Search execution time in milliseconds"
          },
          "search_type": {
            "type": "string",
            "title": "Search Type",
            "description": "Type of search performed"
          },
          "filters_applied": {
            "type": "object",
            "title": "Filters Applied",
            "description": "Applied filters"
          }
        },
        "type": "object",
        "required": [
          "query",
          "results",
          "total_found",
          "search_time_ms",
          "search_type"
        ],
        "title": "SearchResponse",
        "description": "Response model for search operations."
      }
    },
    "securitySchemes": {
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT Bearer token authentication. All endpoints require a valid JWT token."
      }
    }
  },
  "tags": [
    {
      "name": "PDF Processing",
      "description": "üìÑ Advanced PDF extraction using PyMuPDF4LLM - Extract markdown, tables, and images from PDF documents with 14-stage processing pipeline"
    },
    {
      "name": "RAG",
      "description": "üß† **CONSOLIDATED** Retrieval-Augmented Generation - Single `/upload` endpoint with modes (quick/standard/deep) + categories (products/certificates/logos/specifications). Single `/search` endpoint with 6 strategies. Prompt enhancement preserved."
    },
    {
      "name": "AI Analysis",
      "description": "ü§ñ Multi-modal AI analysis - Llama 4 Scout Vision (69.4% MMMU, #1 OCR) for material recognition, entity extraction, and semantic understanding"
    },
    {
      "name": "Search",
      "description": "üîç **CONSOLIDATED** Advanced search - Single `/api/rag/search?strategy={strategy}` endpoint replaces 8+ separate endpoints. Strategies: semantic, vector, multi_vector, hybrid, material, image. 85%+ accuracy."
    },
    {
      "name": "Embeddings",
      "description": "üîó Multi-vector embedding generation - 6 embedding types (text 1536D, visual CLIP 512D, multimodal 2048D, color 256D, texture 256D, application 512D) for comprehensive material understanding"
    },
    {
      "name": "Chat",
      "description": "üí¨ AI chat interface - Contextual chat completions, conversation history, and intelligent material assistance"
    },
    {
      "name": "Products",
      "description": "üì¶ Product management - Two-stage AI classification (Claude Haiku 4.5 + Sonnet 4.5), product enrichment, and metadata extraction with 60% performance improvement"
    },
    {
      "name": "Admin",
      "description": "üë®‚Äçüíº Admin operations - Chunk quality dashboard, quality statistics, flagged chunks review, and metadata management for platform administrators"
    },
    {
      "name": "Anthropic Claude",
      "description": "üé® Anthropic Claude integration - Image validation and product enrichment using Claude Haiku 4.5 (fast classification) and Claude Sonnet 4.5 (deep enrichment)"
    },
    {
      "name": "Together AI",
      "description": "ü¶ô Together AI integration - Llama 4 Scout 17B Vision for advanced image analysis and material recognition"
    },
    {
      "name": "Images",
      "description": "üñºÔ∏è Image processing - Extract, analyze, and generate embeddings for images with CLIP and Llama Vision models"
    },
    {
      "name": "Health & Monitoring",
      "description": "üè• Service health and monitoring - Health checks, performance metrics, system statistics, and comprehensive monitoring endpoints"
    },
    {
      "name": "Legacy APIs",
      "description": "üîÑ Backward compatibility - Legacy endpoints maintained for existing integrations (deprecated, use new endpoints)"
    }
  ],
  "security": [
    {
      "BearerAuth": []
    }
  ]
}