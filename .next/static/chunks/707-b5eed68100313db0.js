(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[707],{4109:function(e,t,i){"use strict";i.d(t,{C:function(){return s}});var n=i(5893);i(7294);var a=i(2003),r=i(5156);let o=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function s(e){let{className:t,variant:i,...a}=e;return(0,n.jsx)("div",{className:(0,r.cn)(o({variant:i}),t),...a})}},8778:function(e,t,i){"use strict";i.d(t,{z:function(){return c}});var n=i(5893),a=i(7294),r=i(8426),o=i(2003),s=i(5156);let l=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:i,variant:a,size:o,asChild:c=!1,...u}=e,d=c?r.g7:"button";return(0,n.jsx)(d,{className:(0,s.cn)(l({variant:a,size:o,className:i})),ref:t,...u})});c.displayName="Button"},9346:function(e,t,i){"use strict";i.d(t,{Ol:function(){return s},SZ:function(){return c},Zb:function(){return o},aY:function(){return u},ll:function(){return l}});var n=i(5893),a=i(7294),r=i(5156);let o=a.forwardRef((e,t)=>{let{className:i,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",i),...a})});o.displayName="Card";let s=a.forwardRef((e,t)=>{let{className:i,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",i),...a})});s.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:i,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",i),...a})});l.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:i,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",i),...a})});c.displayName="CardDescription";let u=a.forwardRef((e,t)=>{let{className:i,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",i),...a})});u.displayName="CardContent",a.forwardRef((e,t)=>{let{className:i,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",i),...a})}).displayName="CardFooter"},8860:function(e,t,i){"use strict";i.d(t,{I:function(){return o}});var n=i(5893),a=i(7294),r=i(5156);let o=a.forwardRef((e,t)=>{let{className:i,type:a,...o}=e;return(0,n.jsx)("input",{type:a,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",i),ref:t,...o})});o.displayName="Input"},8186:function(e,t,i){"use strict";i.d(t,{e:function(){return n}});class n{static getInstance(){let e=this.name;if(!n.instances.has(e)){let t=Reflect.construct(this,[]);n.instances.set(e,t)}return n.instances.get(e)}static resetInstance(e){e?n.instances.delete(e):n.instances.clear()}static hasInstance(e){return n.instances.has(e)}static getActiveInstances(){return Array.from(n.instances.keys())}destroy(){this.cleanup();let e=this.constructor.name;n.instances.delete(e)}constructor(){}}n.instances=new Map},8977:function(e,t,i){"use strict";i.d(t,{n:function(){return em}});var n=i(8186),a=i(3164);let r=a.Ry({prompt:a.Z_().min(1,"Prompt is required"),negative_prompt:a.Z_().optional(),width:a.Rx().int().min(64).max(2048).optional(),height:a.Rx().int().min(64).max(2048).optional(),num_inference_steps:a.Rx().int().min(1).max(100).optional(),guidance_scale:a.Rx().min(0).max(20).optional(),seed:a.Rx().int().optional()}),o=a.Ry({image:a.Z_().url("Image URL is required"),prompt:a.Z_().min(1,"Prompt is required"),room_type:a.Km(["Living room","Dining room","Bedroom","Bathroom","Kitchen","Reading room","Home office"]).optional(),style:a.Km(["Modern","Minimalist","Contemporary","Transitional","Traditional","Rustic","Industrial"]).optional(),num_inference_steps:a.Rx().int().min(10).max(50).default(20),guidance_scale:a.Rx().min(1).max(20).default(7),seed:a.Rx().int().optional()}),s=a.Ry({image:a.Z_().url("Image URL is required"),prompt:a.Z_().min(1,"Prompt is required"),negative_prompt:a.Z_().optional(),strength:a.Rx().min(0).max(1).default(.8),num_inference_steps:a.Rx().int().min(10).max(50).default(20),guidance_scale:a.Rx().min(1).max(20).default(7.5),seed:a.Rx().int().optional()}),l=a.Ry({image:a.Z_().url("Image URL is required"),prompt:a.Z_().min(1,"Prompt is required"),negative_prompt:a.Z_().optional(),room_type:a.Z_().optional(),design_style:a.Z_().optional(),color_scheme:a.Z_().optional(),num_inference_steps:a.Rx().int().min(10).max(50).default(20),guidance_scale:a.Rx().min(1).max(20).default(7.5),strength:a.Rx().min(0).max(1).default(.8),seed:a.Rx().int().optional()}),c=a.Ry({image:a.Z_().url("Image URL is required"),prompt:a.Z_().min(1,"Prompt is required"),negative_prompt:a.Z_().optional(),room_type:a.Km(["living_room","bedroom","kitchen","bathroom","dining_room","office","outdoor"]).optional(),design_style:a.Km(["modern","traditional","minimalist","rustic","industrial","scandinavian","bohemian"]).optional(),num_inference_steps:a.Rx().int().min(10).max(50).default(25),guidance_scale:a.Rx().min(1).max(20).default(7.5),strength:a.Rx().min(0).max(1).default(.75),seed:a.Rx().int().optional()}),u=a.Ry({output:a.IX(a.Z_().url()).optional(),error:a.Z_().optional()}),d={name:"replicate",type:"replicate",baseUrl:"https://api.replicate.com/v1",apiKey:"",timeout:3e5,retryAttempts:3,rateLimit:{requestsPerMinute:60,burstLimit:10},environment:"development",models:{"erayyavuz/interior-ai":{version:"latest",inputSchema:o,outputSchema:u,defaultParams:{num_inference_steps:20,guidance_scale:7},description:"AI-powered interior design transformation",category:"interior-design"},"jschoormans/comfyui-interior-remodel":{version:"latest",inputSchema:s,outputSchema:u,defaultParams:{strength:.8,num_inference_steps:20,guidance_scale:7.5},description:"ComfyUI-based interior remodeling",category:"interior-design"},"jschoormans/interior-v2":{version:"latest",inputSchema:l,outputSchema:u,defaultParams:{num_inference_steps:20,guidance_scale:7.5,strength:.8},description:"Advanced interior design transformation v2",category:"interior-design"},"julian-at/interiorly-gen1-dev":{version:"latest",inputSchema:c,outputSchema:u,defaultParams:{num_inference_steps:25,guidance_scale:7.5,strength:.75},description:"Interiorly generation model v1 development",category:"interior-design"},"stability-ai/stable-diffusion":{version:"latest",inputSchema:r,outputSchema:u,defaultParams:{width:512,height:512,num_inference_steps:20,guidance_scale:7.5},description:"Stable Diffusion text-to-image generation",category:"text-to-image"},"runwayml/stable-diffusion-v1-5":{version:"latest",inputSchema:r,outputSchema:u,defaultParams:{width:512,height:512,num_inference_steps:20,guidance_scale:7.5},description:"Stable Diffusion v1.5 text-to-image generation",category:"text-to-image"},"threestudio-project/threestudio":{version:"latest",inputSchema:a.Ry({prompt:a.Z_().min(1,"Prompt is required"),negative_prompt:a.Z_().optional(),guidance_scale:a.Rx().min(1).max(20).default(7.5),num_inference_steps:a.Rx().int().min(10).max(100).default(50),seed:a.Rx().int().optional()}),outputSchema:a.Ry({output:a.Ry({mesh:a.Z_().url().optional(),video:a.Z_().url().optional(),images:a.IX(a.Z_().url()).optional()}).optional(),error:a.Z_().optional()}),defaultParams:{guidance_scale:7.5,num_inference_steps:50},description:"3D object generation from text",category:"3d-generation"},"adirik/interior-design":{version:"latest",inputSchema:a.Ry({image:a.Z_().url("Image URL is required"),prompt:a.Z_().min(1,"Prompt is required"),negative_prompt:a.Z_().optional(),num_inference_steps:a.Rx().int().min(10).max(50).default(20),guidance_scale:a.Rx().min(1).max(20).default(7.5),strength:a.Rx().min(0).max(1).default(.8),seed:a.Rx().int().optional()}),outputSchema:u,defaultParams:{num_inference_steps:20,guidance_scale:7.5,strength:.8},description:"Interior design AI transformation",category:"interior-design",status:"failing"},"davisbrown/designer-architecture":{version:"latest",inputSchema:a.Ry({prompt:a.Z_().min(1,"Prompt is required"),negative_prompt:a.Z_().optional(),width:a.Rx().int().min(64).max(2048).default(512),height:a.Rx().int().min(64).max(2048).default(512),num_inference_steps:a.Rx().int().min(10).max(50).default(20),guidance_scale:a.Rx().min(1).max(20).default(7.5),seed:a.Rx().int().optional()}),outputSchema:u,defaultParams:{width:512,height:512,num_inference_steps:20,guidance_scale:7.5},description:"Designer architecture generation",category:"architecture",status:"working"},"rocketdigitalai/interior-design-sdxl":{version:"latest",inputSchema:a.Ry({image:a.Z_().url("Image URL is required"),prompt:a.Z_().min(1,"Prompt is required"),negative_prompt:a.Z_().optional(),num_inference_steps:a.Rx().int().min(10).max(50).default(20),guidance_scale:a.Rx().min(1).max(20).default(7.5),strength:a.Rx().min(0).max(1).default(.8),seed:a.Rx().int().optional()}),outputSchema:u,defaultParams:{num_inference_steps:20,guidance_scale:7.5,strength:.8},description:"Interior design with SDXL",category:"interior-design",status:"failing"}}};var m=i(244);let g=a.Ry({error:a.Z_(),details:a.Z_().optional(),hint:a.Z_().optional(),code:a.Z_().optional()}),p=a.Ry({functionName:a.Z_(),data:a.Ry({prompt:a.Z_().min(1,"Prompt is required"),models:a.IX(a.Z_()).min(1,"At least one model is required"),user_id:a.Z_().optional(),image_url:a.Z_().url("Please enter a valid URL").optional(),room_type:a.Z_().optional(),style:a.Z_().optional(),num_inference_steps:a.Rx().optional(),guidance_scale:a.Rx().optional(),strength:a.Rx().optional(),seed:a.Rx().optional(),negative_prompt:a.Z_().optional(),width:a.Rx().optional(),height:a.Rx().optional()})}),h=a.G0([a.Ry({success:a.i0(!0),images:a.IX(a.Z_().url()),metadata:a.Ry({model:a.Z_(),prompt:a.Z_(),parameters:a.IM(a.Z_(),a.Yj()),generation_time:a.Rx().optional()})}),a.Ry({success:a.i0(!1),error:a.Z_(),details:a.Z_().optional()})]),f=a.Ry({query:a.Z_().min(1,"Query is required"),collection_name:a.Z_().optional(),limit:a.Rx().optional(),threshold:a.Rx().optional(),include_metadata:a.O7().optional(),filters:a.IM(a.Z_(),a.Yj()).optional()}),y=a.G0([a.Ry({success:a.i0(!0),results:a.IX(a.Ry({content:a.Z_(),metadata:a.IM(a.Z_(),a.Yj()),score:a.Rx(),id:a.Z_()})),total_results:a.Rx(),query_metadata:a.Ry({query:a.Z_(),collection:a.Z_(),processing_time:a.Rx()})}),a.Ry({success:a.i0(!1),error:a.Z_(),details:a.Z_().optional()})]),_=a.Ry({url:a.Z_().url("Please enter a valid URL"),extract_images:a.O7().optional(),extract_text:a.O7().optional(),max_images:a.Rx().optional(),image_min_size:a.Rx().optional(),timeout:a.Rx().optional()}),R=a.G0([a.Ry({success:a.i0(!0),data:a.Ry({url:a.Z_(),title:a.Z_().optional(),description:a.Z_().optional(),images:a.IX(a.Ry({url:a.Z_(),alt:a.Z_().optional(),width:a.Rx().optional(),height:a.Rx().optional()})),text_content:a.Z_().optional(),metadata:a.IM(a.Z_(),a.Yj())}),processing_time:a.Rx()}),a.Ry({success:a.i0(!1),error:a.Z_(),details:a.Z_().optional()})]),x=a.Ry({image_url:a.Z_().url("Please enter a valid image URL"),language:a.Z_().optional(),output_format:a.Z_().optional(),preprocessing:a.Ry({enhance_contrast:a.O7().optional(),denoise:a.O7().optional(),deskew:a.O7().optional()}).optional()}),b={name:"supabase",type:"supabase",baseUrl:"https://bgbavxtjlbvgplozizxu.supabase.co",projectUrl:"https://bgbavxtjlbvgplozizxu.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJnYmF2eHRqbGJ2Z3Bsb3ppenh1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE5MDYwMzEsImV4cCI6MjA2NzQ4MjAzMX0.xswCBesG3eoYjKY5VNkUNhxc0tG6Ju2IzGI0Yd-DWMg",timeout:6e4,retryAttempts:3,rateLimit:{requestsPerMinute:100,burstLimit:20},environment:"development",functions:{"crewai-3d-generation":{inputSchema:p,outputSchema:h,timeout:3e5},"enhanced-rag-search":{inputSchema:f,outputSchema:y,timeout:3e4},"material-scraper":{inputSchema:_,outputSchema:R,timeout:6e4},"ocr-processing":{inputSchema:x,outputSchema:a.G0([a.Ry({success:a.i0(!0),text:a.Z_(),confidence:a.Rx().min(0).max(100),language:a.Z_(),processing_time:a.Rx(),metadata:a.Ry({image_dimensions:a.Ry({width:a.Rx(),height:a.Rx()}),preprocessing_applied:a.IX(a.Z_())})}),a.Ry({success:a.i0(!1),error:a.Z_(),details:a.Z_().optional()})]),timeout:45e3},"svbrdf-extractor":{inputSchema:a.Ry({image_url:a.Z_().url("Please enter a valid image URL"),output_format:a.Z_().optional(),resolution:a.Rx().optional(),enhance_quality:a.O7().optional()}),outputSchema:a.G0([a.Ry({success:a.i0(!0),maps:a.Ry({diffuse:a.Z_().url(),normal:a.Z_().url(),roughness:a.Z_().url(),metallic:a.Z_().url(),height:a.Z_().url().optional(),ambient_occlusion:a.Z_().url().optional()}),metadata:a.Ry({resolution:a.Rx(),format:a.Z_(),processing_time:a.Rx()})}),a.Ry({success:a.i0(!1),error:a.Z_(),details:a.Z_().optional()})]),timeout:12e4},"nerf-processor":{inputSchema:a.Ry({images:a.IX(a.Z_().url()).min(1,"At least 1 image required"),output_format:a.Z_().optional(),quality:a.Z_().optional()}),outputSchema:a.G0([a.Ry({success:a.i0(!0),model_url:a.Z_().url(),preview_images:a.IX(a.Z_().url()),metadata:a.Ry({vertex_count:a.Rx(),face_count:a.Rx(),processing_time:a.Rx()})}),g]),timeout:6e5},"spaceformer-analysis":{inputSchema:a.Ry({image_url:a.Z_().url("Please enter a valid image URL"),analysis_type:a.Z_().optional(),include_suggestions:a.O7().optional()}),outputSchema:a.G0([a.Ry({success:a.i0(!0),analysis:a.Ry({layout:a.Ry({room_type:a.Z_(),dimensions:a.Ry({width:a.Rx(),height:a.Rx(),depth:a.Rx()}).optional(),features:a.IX(a.Z_())}),furniture:a.IX(a.Ry({type:a.Z_(),position:a.Ry({x:a.Rx(),y:a.Rx()}),confidence:a.Rx()})),style:a.Ry({primary_style:a.Z_(),color_palette:a.IX(a.Z_()),materials:a.IX(a.Z_())}),suggestions:a.IX(a.Z_()).optional()})}),g]),timeout:9e4}}};class v{static getFunctionConfig(e){return b.functions[e]||null}static validateFunctionInput(e,t){let i=this.getFunctionConfig(e);if(!i)return{success:!1,error:"Function ".concat(e," not found")};try{let e=i.inputSchema.parse(t);return{success:!0,data:e}}catch(e){if(e instanceof m.j)return{success:!1,error:"Validation error: ".concat(e.issues.map(e=>"".concat(e.path.join("."),": ").concat(e.message)).join(", "))};return{success:!1,error:"Unknown validation error"}}}static getFunctionTimeout(e){let t=this.getFunctionConfig(e);return(null==t?void 0:t.timeout)||b.timeout}static getAvailableFunctions(){return Object.keys(b.functions)}static buildFunctionUrl(e){let t=b.projectUrl.replace(/\/$/,"");return"".concat(t,"/functions/v1/").concat(e)}static getAuthHeaders(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?b.serviceRoleKey:b.anonKey;return{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}}let I=a.Ry({output:a.IX(a.Z_().url()).optional(),error:a.Z_().optional()}),w={name:"Hugging Face Inference API",type:"huggingface",baseUrl:"https://api-inference.huggingface.co",apiKey:void 0,timeout:6e4,retryAttempts:2,rateLimit:{requestsPerMinute:100,burstLimit:10},environment:"production",models:{"stabilityai/stable-diffusion-xl-base-1.0":{inputSchema:a.Ry({inputs:a.Z_().min(1,"Prompt is required"),parameters:a.Ry({negative_prompt:a.Z_().optional(),num_inference_steps:a.Rx().int().min(1).max(50).default(20),guidance_scale:a.Rx().min(1).max(20).default(7.5),width:a.Rx().int().min(64).max(1024).default(1024),height:a.Rx().int().min(64).max(1024).default(1024),seed:a.Rx().int().optional()}).optional()}),outputSchema:I,defaultParams:{parameters:{num_inference_steps:20,guidance_scale:7.5,width:1024,height:1024}},description:"Stable Diffusion XL base model for high-quality image generation",category:"text-to-image",status:"working"},"black-forest-labs/FLUX.1-schnell":{inputSchema:a.Ry({inputs:a.Z_().min(1,"Prompt is required"),parameters:a.Ry({num_inference_steps:a.Rx().int().min(1).max(4).default(4),guidance_scale:a.Rx().min(0).max(10).default(0),width:a.Rx().int().min(256).max(1440).default(1024),height:a.Rx().int().min(256).max(1440).default(1024),seed:a.Rx().int().optional()}).optional()}),outputSchema:I,defaultParams:{parameters:{num_inference_steps:4,guidance_scale:0,width:1024,height:1024}},description:"FLUX.1 Schnell - Fast high-quality image generation",category:"text-to-image",status:"working"},"stabilityai/stable-diffusion-2-1":{inputSchema:a.Ry({inputs:a.Z_().min(1,"Prompt is required"),parameters:a.Ry({negative_prompt:a.Z_().optional(),num_inference_steps:a.Rx().int().min(1).max(50).default(50),guidance_scale:a.Rx().min(1).max(20).default(7.5),width:a.Rx().int().min(64).max(768).default(768),height:a.Rx().int().min(64).max(768).default(768),seed:a.Rx().int().optional()}).optional()}),outputSchema:I,defaultParams:{parameters:{num_inference_steps:50,guidance_scale:7.5,width:768,height:768}},description:"Stable Diffusion 2.1 for versatile image generation",category:"text-to-image",status:"working"}}},C=a.Ry({input:a.G0([a.Z_().min(1,"Input text is required"),a.IX(a.Z_().min(1)).min(1,"At least one input text is required")]),model:a.Z_().min(1,"Model is required"),encoding_format:a.Km(["float","base64"]).optional().default("float"),dimensions:a.Rx().int().min(1).optional(),user:a.Z_().optional()}),E=a.Ry({object:a.i0("list"),data:a.IX(a.Ry({object:a.i0("embedding"),index:a.Rx().int(),embedding:a.IX(a.Rx())})),model:a.Z_(),usage:a.Ry({prompt_tokens:a.Rx().int(),total_tokens:a.Rx().int()})}),A={name:"OpenAI API",type:"openai",baseUrl:"https://api.openai.com/v1",apiKey:void 0,timeout:3e4,retryAttempts:3,rateLimit:{requestsPerMinute:3e3,burstLimit:100},environment:"production",models:{"text-embedding-3-small":{maxTokens:8191,inputSchema:C,outputSchema:E,costPerToken:2e-5,defaultParams:{model:"text-embedding-3-small",encoding_format:"float",dimensions:512},description:"OpenAI text-embedding-3-small model with 512 dimensions",category:"text-embedding",status:"working",dimensions:512},"text-embedding-3-large":{maxTokens:8191,inputSchema:C,outputSchema:E,costPerToken:13e-5,defaultParams:{model:"text-embedding-3-large",encoding_format:"float",dimensions:768},description:"OpenAI text-embedding-3-large model with 768 dimensions - high performance",category:"text-embedding",status:"working",dimensions:768},"text-embedding-3-large-full":{maxTokens:8191,inputSchema:C,outputSchema:E,costPerToken:13e-5,defaultParams:{model:"text-embedding-3-large",encoding_format:"float",dimensions:3072},description:"OpenAI text-embedding-3-large model with full 3072 dimensions - maximum performance",category:"text-embedding",status:"working",dimensions:3072},"text-embedding-ada-002":{maxTokens:8191,inputSchema:C,outputSchema:E,costPerToken:1e-4,defaultParams:{model:"text-embedding-ada-002",encoding_format:"float"},description:"OpenAI text-embedding-ada-002 model (legacy) - 1536 dimensions",category:"text-embedding",status:"working",dimensions:1536}}};class S extends n.e{initialize(){this.registerApi(d),this.registerApi(b),this.registerApi(w),this.registerApi(A)}cleanup(){this.configs.clear(),console.log("\uD83E\uDDF9 API Registry cleaned up")}detectEnvironment(){return"localhost"===window.location.hostname?"development":"production"}registerApi(e){this.configs.set(e.name,e)}getApiConfig(e){return this.configs.get(e)||null}getApiConfigByType(e){for(let i of Array.from(this.configs.values())){var t;if((null===(t=i.type)||void 0===t?void 0:t.toLowerCase().trim())===(null==e?void 0:e.toLowerCase().trim()))return i}console.log('❌ DEBUG: No config found for type "'.concat(e,'"')),console.log("❌ DEBUG: Available types:",Array.from(this.configs.values()).map(e=>'"'.concat(e.type,'"')));let i=Array.from(this.configs.values()).map(e=>{var t;return null===(t=e.type)||void 0===t?void 0:t.toLowerCase().trim()}),n=null==e?void 0:e.toLowerCase().trim(),a=i.filter(e=>e&&e.includes(n));return a.length>0&&console.log("\uD83D\uDCA1 DEBUG: Did you mean one of these types?",a),null}getAllConfigs(){return Array.from(this.configs.values())}getConfigsByType(e){return Array.from(this.configs.values()).filter(t=>t.type===e)}validateConfig(e){try{if(!e.name||!e.baseUrl)return!1;return e.environment!==this.environment&&console.warn("Config ".concat(e.name," is for ").concat(e.environment," but current environment is ").concat(this.environment)),!0}catch(t){return console.error("Validation failed for config ".concat(e.name,":"),t),!1}}getEnvironment(){return this.environment}constructor(){super(),this.configs=new Map,this.environment=this.detectEnvironment(),this.initialize()}}let Z=S.getInstance();var T=i(1358),P=i(1864);let O=a.Km(["development","staging","production"]),k=a.Ry({environment:O,version:a.Z_().min(1),debug:a.O7(),logLevel:a.Km(["error","warn","info","debug"])}),M=a.Ry({chunkSize:a.Rx().min(100).max(1e4),chunkOverlap:a.Rx().min(0).max(1e3),maxChunks:a.Rx().min(1).max(1e3),preserveFormatting:a.O7(),splitStrategy:a.Km(["sentence","paragraph","token"])}),N=a.Ry({provider:a.Km(["openai","huggingface","local"]),model:a.Z_().min(1),dimensions:a.Rx().min(1).max(4096),batchSize:a.Rx().min(1).max(100),timeout:a.Rx().min(1e3).max(3e5),retryAttempts:a.Rx().min(0).max(10)}),D=a.Ry({transformationRules:a.IX(a.Z_()),outputFormat:a.Km(["json","markdown","xml"]),validateOutput:a.O7(),preserveMetadata:a.O7()}),U=a.Ry({enableValidation:a.O7(),validationRules:a.IX(a.Z_()),strictMode:a.O7(),errorHandling:a.Km(["throw","log","ignore"])}),L=a.Ry({batchSize:a.Rx().min(1).max(1e3),maxConcurrency:a.Rx().min(1).max(100),queueTimeout:a.Rx().min(1e3).max(36e5),retryPolicy:a.Ry({maxRetries:a.Rx().min(0).max(10),backoffMultiplier:a.Rx().min(1).max(10),initialDelay:a.Rx().min(100).max(6e4)})}),j=a.Ry({caching:a.Ry({enabled:a.O7(),ttl:a.Rx().min(1e3).max(864e5),maxSize:a.Rx().min(1).max(1e4),strategy:a.Km(["lru","fifo","lfu"])}),rateLimit:a.Ry({enabled:a.O7(),requestsPerMinute:a.Rx().min(1).max(1e4),burstLimit:a.Rx().min(1).max(1e3)}),monitoring:a.Ry({enabled:a.O7(),metricsInterval:a.Rx().min(1e3).max(3e5),alertThresholds:a.Ry({errorRate:a.Rx().min(0).max(1),responseTime:a.Rx().min(1).max(6e4),memoryUsage:a.Rx().min(0).max(1)})})}),q=a.Ry({apis:a.Ry({timeout:a.Rx().min(1e3).max(3e5),retryAttempts:a.Rx().min(0).max(10),circuitBreaker:a.Ry({enabled:a.O7(),failureThreshold:a.Rx().min(1).max(100),resetTimeout:a.Rx().min(1e3).max(3e5)})}),databases:a.Ry({connectionPool:a.Ry({min:a.Rx().min(1).max(100),max:a.Rx().min(1).max(1e3),acquireTimeout:a.Rx().min(1e3).max(6e4),idleTimeout:a.Rx().min(1e3).max(36e5)}),queryTimeout:a.Rx().min(1e3).max(3e5)}),storage:a.Ry({provider:a.Km(["local","s3","gcs","azure"]),bucket:a.Z_().optional(),region:a.Z_().optional(),encryption:a.O7()})}),F=a.Ry({documentChunking:M,embeddingGeneration:N,mivaaToRagTransformer:D,validationIntegration:U,batchProcessing:L}),B=a.Ry({enabled:a.O7(),watchPaths:a.IX(a.Z_()),debounceMs:a.Rx().min(100).max(1e4)}),z=k.extend({services:F,performance:j,externalDependencies:q,hotReload:B});a.Ry({isValid:a.O7(),errors:a.IX(a.Z_()),warnings:a.IX(a.Z_())});let K=a.Ry({NODE_ENV:a.Z_().default("development"),LOG_LEVEL:a.Z_().default("info"),DEBUG:a.Z_().default("false"),OPENAI_API_KEY:a.Z_().optional(),HUGGINGFACE_API_KEY:a.Z_().optional(),DATABASE_URL:a.Z_().optional(),REDIS_URL:a.Z_().optional(),STORAGE_PROVIDER:a.Z_().default("local"),AWS_REGION:a.Z_().optional(),AWS_S3_BUCKET:a.Z_().optional(),CACHE_TTL:a.Z_().default("3600000"),RATE_LIMIT_RPM:a.Z_().default("1000"),CHUNK_SIZE:a.Z_().default("1000"),EMBEDDING_BATCH_SIZE:a.Z_().default("10"),MAX_CONCURRENCY:a.Z_().default("5")}),G={environment:"development",version:"1.0.0-dev",debug:!0,logLevel:"debug",services:{documentChunking:{chunkSize:1e3,chunkOverlap:200,maxChunks:100,preserveFormatting:!0,splitStrategy:"paragraph"},embeddingGeneration:{provider:"openai",model:"text-embedding-ada-002",dimensions:1536,batchSize:5,timeout:3e4,retryAttempts:3},mivaaToRagTransformer:{transformationRules:["basic-cleanup","metadata-extraction"],outputFormat:"json",validateOutput:!0,preserveMetadata:!0},validationIntegration:{enableValidation:!0,validationRules:["schema-validation","content-validation"],strictMode:!1,errorHandling:"log"},batchProcessing:{batchSize:10,maxConcurrency:3,queueTimeout:6e4,retryPolicy:{maxRetries:3,backoffMultiplier:2,initialDelay:1e3}}},performance:{caching:{enabled:!0,ttl:3e5,maxSize:100,strategy:"lru"},rateLimit:{enabled:!1,requestsPerMinute:1e3,burstLimit:100},monitoring:{enabled:!0,metricsInterval:3e4,alertThresholds:{errorRate:.1,responseTime:5e3,memoryUsage:.8}}},externalDependencies:{apis:{timeout:3e4,retryAttempts:3,circuitBreaker:{enabled:!1,failureThreshold:5,resetTimeout:6e4}},databases:{connectionPool:{min:2,max:10,acquireTimeout:3e4,idleTimeout:3e5},queryTimeout:3e4},storage:{provider:"local",encryption:!1}},hotReload:{enabled:!0,watchPaths:["src/config/**/*.ts","src/config/**/*.json",".env.development"],debounceMs:1e3}};var X=i(3454);let H={environment:"production",version:"1.0.0",debug:!1,logLevel:"warn",services:{documentChunking:{chunkSize:2e3,chunkOverlap:100,maxChunks:500,preserveFormatting:!0,splitStrategy:"sentence"},embeddingGeneration:{provider:"openai",model:"text-embedding-ada-002",dimensions:1536,batchSize:20,timeout:6e4,retryAttempts:5},mivaaToRagTransformer:{transformationRules:["basic-cleanup","metadata-extraction","content-optimization","security-sanitization"],outputFormat:"json",validateOutput:!0,preserveMetadata:!0},validationIntegration:{enableValidation:!0,validationRules:["schema-validation","content-validation","security-validation","performance-validation"],strictMode:!0,errorHandling:"throw"},batchProcessing:{batchSize:50,maxConcurrency:10,queueTimeout:3e5,retryPolicy:{maxRetries:5,backoffMultiplier:2,initialDelay:2e3}}},performance:{caching:{enabled:!0,ttl:36e5,maxSize:1e3,strategy:"lru"},rateLimit:{enabled:!0,requestsPerMinute:500,burstLimit:50},monitoring:{enabled:!0,metricsInterval:6e4,alertThresholds:{errorRate:.05,responseTime:2e3,memoryUsage:.7}}},externalDependencies:{apis:{timeout:6e4,retryAttempts:5,circuitBreaker:{enabled:!0,failureThreshold:10,resetTimeout:3e5}},databases:{connectionPool:{min:5,max:50,acquireTimeout:6e4,idleTimeout:6e5},queryTimeout:6e4},storage:{provider:"s3",bucket:X.env.AWS_S3_BUCKET||"default-bucket",region:X.env.AWS_REGION||"us-east-1",encryption:!0}},hotReload:{enabled:!1,watchPaths:[],debounceMs:100}};var V=i(3454);class W{static getInstance(){return W.instance||(W.instance=new W),W.instance}detectEnvironment(){return"production"}loadEnvironmentVariables(){try{let e=P.join(V.cwd(),".env");return T.existsSync(e)&&T.readFileSync(e,"utf-8").split("\n").forEach(e=>{let t=e.trim();if(t&&!t.startsWith("#")){let[e,...i]=t.split("=");if(e&&i.length>0){let t=i.join("=").replace(/^["']|["']$/g,"");V.env[e.trim()]=t}}}),K.parse(V.env)}catch(e){return console.warn("Environment variable validation failed:",e),V.env}}applyEnvironmentOverrides(e,t){let i={...e};return t.LOG_LEVEL&&(i.logLevel=t.LOG_LEVEL),t.DEBUG&&(i.debug="true"===t.DEBUG.toLowerCase()),t.CHUNK_SIZE&&(i.services.documentChunking.chunkSize=parseInt(t.CHUNK_SIZE,10)),t.EMBEDDING_BATCH_SIZE&&(i.services.embeddingGeneration.batchSize=parseInt(t.EMBEDDING_BATCH_SIZE,10)),t.MAX_CONCURRENCY&&(i.services.batchProcessing.maxConcurrency=parseInt(t.MAX_CONCURRENCY,10)),t.CACHE_TTL&&(i.performance.caching.ttl=parseInt(t.CACHE_TTL,10)),t.RATE_LIMIT_RPM&&(i.performance.rateLimit.requestsPerMinute=parseInt(t.RATE_LIMIT_RPM,10)),t.STORAGE_PROVIDER&&(i.externalDependencies.storage.provider=t.STORAGE_PROVIDER),t.AWS_S3_BUCKET&&(i.externalDependencies.storage.bucket=t.AWS_S3_BUCKET),t.AWS_REGION&&(i.externalDependencies.storage.region=t.AWS_REGION),i}loadBaseConfiguration(e){switch(e){case"production":return{...H};case"staging":return{...H,environment:"staging",debug:!0,logLevel:"info",performance:{...H.performance,rateLimit:{...H.performance.rateLimit,requestsPerMinute:1e3}}};default:return{...G}}}validate(e){try{return z.parse(e),{isValid:!0,errors:[],warnings:[]}}catch(e){if(e instanceof m.j)return{isValid:!1,errors:e.issues.map(e=>"".concat(e.path.join("."),": ").concat(e.message)),warnings:[]};return{isValid:!1,errors:[e instanceof Error?e.message:"Unknown validation error"],warnings:[]}}}async create(e){try{let t=e||this.detectEnvironment(),i=this.loadEnvironmentVariables(),n=this.loadBaseConfiguration(t);n=this.applyEnvironmentOverrides(n,i);let a=this.validate(n);if(!a.isValid)throw Error("Configuration validation failed: ".concat(a.errors.join(", ")));return a.warnings.length>0&&console.warn("Configuration warnings:",a.warnings),this.currentConfig=n,n.hotReload.enabled&&this.setupHotReload(n),console.log("Configuration loaded successfully for environment: ".concat(t)),n}catch(e){throw console.error("Failed to create configuration:",e),e}}setupHotReload(e){if(this.watchers.forEach(e=>e.close()),this.watchers=[],!e.hotReload.enabled||0===e.hotReload.watchPaths.length)return;let t=null,i=()=>{t&&clearTimeout(t),t=setTimeout(async()=>{try{console.log("Configuration files changed, reloading..."),await this.reload(),console.log("Configuration reloaded successfully")}catch(e){console.error("Failed to reload configuration:",e)}},e.hotReload.debounceMs)};e.hotReload.watchPaths.forEach(e=>{try{let t=P.resolve(e);if(T.existsSync(t)){let n=T.watch(t,{recursive:!0},(e,t)=>{t&&(t.endsWith(".ts")||t.endsWith(".json")||t.endsWith(".env"))&&(console.log("Configuration file changed: ".concat(t)),i())});this.watchers.push(n),console.log("Watching for configuration changes: ".concat(e))}}catch(t){console.warn("Failed to watch path ".concat(e,":"),t)}})}async reload(){if(!this.currentConfig)throw Error("No configuration to reload");let e=this.currentConfig.environment;await this.create(e)}getCurrentConfig(){return this.currentConfig}getConfigSummary(){return this.currentConfig?{environment:this.currentConfig.environment,version:this.currentConfig.version,debug:this.currentConfig.debug,logLevel:this.currentConfig.logLevel,services:Object.keys(this.currentConfig.services),hotReloadEnabled:this.currentConfig.hotReload.enabled,cachingEnabled:this.currentConfig.performance.caching.enabled,rateLimitEnabled:this.currentConfig.performance.rateLimit.enabled,monitoringEnabled:this.currentConfig.performance.monitoring.enabled}:{status:"No configuration loaded"}}cleanup(){this.watchers.forEach(e=>e.close()),this.watchers=[]}constructor(){this.currentConfig=null,this.watchers=[]}}let Y=W.getInstance();var J=i(3454);let Q=null,$=async()=>{try{return Q=await Y.create(),ee(),console.log("✅ Complete configuration system initialized successfully"),console.log("\uD83D\uDCCA Centralized config summary:",Y.getConfigSummary()),console.log("\uD83D\uDD0C API config summary:",et.getConfigSummary()),Q}catch(e){throw console.error("❌ Failed to initialize configuration system:",e),e}};function ee(){Z.registerApi(d),Z.registerApi(b),Z.registerApi(w)}class et{static getApiConfig(e){return Z.getApiConfig(e)}static getApiConfigByType(e){let t=Z.getApiConfigByType(e);if(!t)return null;{let i=this.validateConfigurationFields(t);i.isValid||console.warn("Configuration for ".concat(e," is missing required fields: ").concat(i.missingFields.join(", ")," - will be provided at runtime"))}return t}static getApisByType(e){return Z.getConfigsByType(e)}static validateEnvironment(){let e=[];return Z.getAllConfigs().forEach(t=>{t.type,"supabase"!==t.type||(t.projectUrl||e.push("NEXT_PUBLIC_SUPABASE_URL"),t.anonKey||e.push("NEXT_PUBLIC_SUPABASE_ANON_KEY")),t.type}),{valid:0===e.length,missing:Array.from(new Set(e))}}static getConfigSummary(){let e=Z.getAllConfigs(),t={};return e.forEach(e=>{t[e.type]=(t[e.type]||0)+1}),{totalConfigs:e.length,configsByType:t,environment:Z.getEnvironment(),validation:this.validateEnvironment()}}static validateConfigurationFields(e){let t=[],i=[];switch(e.name||(t.push("Missing configuration name"),i.push("name")),e.type||(t.push("Missing configuration type"),i.push("type")),e.type){case"replicate":break;case"supabase":e.projectUrl||(t.push("Missing Supabase project URL - will be provided at runtime"),i.push("projectUrl")),e.anonKey||(t.push("Missing Supabase anonymous key - will be provided at runtime"),i.push("anonKey"))}return{isValid:0===t.length,errors:t,missingFields:i}}static getSafeApiConfigByType(e){try{return this.getApiConfigByType(e)}catch(e){return null}}static initialize(){ee(),this.validateEnvironment()}}"true"!==J.env.DISABLE_AUTO_INIT&&(et.initialize(),$().catch(e=>{console.error("Failed to auto-initialize centralized configuration:",e),console.log("Legacy API configuration system is still available")}));class ei{handleError(e){let t={code:"UNKNOWN_ERROR",message:"An unknown error occurred",retryable:!1,originalError:e};return e instanceof Error&&(t.message=e.message,t.code=e.name||"ERROR"),this.enhanceError(t,e)}enhanceError(e,t){return e}createResponse(e,t,i){return{success:!0,data:e,metadata:{apiType:this.apiType,modelId:this.modelId||void 0,timestamp:new Date().toISOString(),requestId:i,duration:Date.now()-t}}}createErrorResponse(e,t,i){return{success:!1,error:e,metadata:{apiType:this.apiType,modelId:this.modelId||void 0,timestamp:new Date().toISOString(),requestId:i,duration:Date.now()-t}}}constructor(e,t){this.apiType=e,this.modelId=t;let i=et.getApiConfigByType(e);if(!i)throw Error("API configuration not found for type: ".concat(e));this.config=i,this.requestIdGenerator=()=>"".concat(e,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}}let en={maxAttempts:3,baseDelay:1e3,maxDelay:1e4,backoffMultiplier:2,retryableErrors:["NETWORK_ERROR","TIMEOUT","RATE_LIMIT","SERVER_ERROR"]};async function ea(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={...en,...i};for(let i=1;i<=n.maxAttempts;i++)try{return await e()}catch(r){if(t=r,i===n.maxAttempts)break;let e=r instanceof Error?r.name:"UNKNOWN_ERROR";if(!n.retryableErrors.includes(e))break;let a=Math.min(n.baseDelay*Math.pow(n.backoffMultiplier,i-1),n.maxDelay);await new Promise(e=>setTimeout(e,a))}throw t}class er{static registerClient(e,t){this.clients.set(e,t)}static getClient(e,t){let i=t?"".concat(e,":").concat(t):e;return this.clients.get(i)||null}static getAllClients(){return new Map(this.clients)}static clearClients(){this.clients.clear()}}er.clients=new Map;class eo extends ei{async execute(e){let t=this.requestIdGenerator(),i=Date.now();try{let n=this.validateParams(e),a=this.getModelConfig();if(!a)throw Error("Model configuration not found: ".concat(this.modelId));let r=await ea(()=>this.makeReplicateRequest(a.version,n),{maxAttempts:this.replicateConfig.retryAttempts||3,retryableErrors:["RATE_LIMIT","NETWORK_ERROR","SERVER_ERROR"]});return this.createResponse(r,i,t)}catch(n){let e=this.handleError(n);return this.createErrorResponse(e,i,t)}}validateParams(e){if(!this.modelId)throw Error("Model ID is required for parameter validation");let t=this.getModelConfig();if(!t)throw Error("Model configuration not found: ".concat(this.modelId));try{return t.inputSchema.parse(e)}catch(e){if(e instanceof m.j){let t=e.issues.map(e=>"".concat(e.path.join("."),": ").concat(e.message)).join(", ");throw Error("Parameter validation failed: ".concat(t))}throw e}}async healthCheck(){try{return(await fetch("".concat(this.baseUrl,"/models"),{method:"GET",headers:this.getHeaders()})).ok}catch(e){return!1}}enhanceError(e,t){if(t instanceof Response)switch(e.apiSpecific={statusCode:t.status,headers:Object.fromEntries(t.headers.entries())},t.status){case 401:e.code="AUTHENTICATION_ERROR",e.message="Invalid Replicate API token",e.retryable=!1;break;case 402:e.code="BILLING_ERROR",e.message="Insufficient credits or billing issue",e.retryable=!1;break;case 429:e.code="RATE_LIMIT",e.message="Rate limit exceeded",e.retryable=!0;break;case 422:e.code="VALIDATION_ERROR",e.message="Invalid input parameters",e.retryable=!1;break;case 500:case 502:case 503:case 504:e.code="SERVER_ERROR",e.message="Replicate server error",e.retryable=!0}return t instanceof TypeError&&t.message.includes("fetch")&&(e.code="NETWORK_ERROR",e.message="Network connection failed",e.retryable=!0),e}getModelConfig(){return this.modelId?this.replicateConfig.models[this.modelId]:null}getHeaders(){let e={"Content-Type":"application/json"};return this.replicateConfig.apiKey&&(e.Authorization="Token ".concat(this.replicateConfig.apiKey)),e}async makeReplicateRequest(e,t){let i="".concat(this.baseUrl,"/predictions"),n=await fetch(i,{method:"POST",headers:this.getHeaders(),body:JSON.stringify({version:e,input:t})});if(!n.ok){let e=null;try{e=await n.json()}catch(e){}let t=Error((null==e?void 0:e.detail)||n.statusText);throw t.response=n,t.data=e,t}let a=await n.json();return"starting"===a.status||"processing"===a.status?this.pollForCompletion(a):a}async pollForCompletion(e){for(let t=0;t<60;t++){await new Promise(e=>setTimeout(e,5e3));let t=await fetch(e.urls.get,{headers:this.getHeaders()});if(!t.ok)throw Error("Failed to poll prediction status: ".concat(t.statusText));let i=await t.json();if("succeeded"===i.status||"failed"===i.status||"canceled"===i.status)return i}throw Error("Prediction timed out")}constructor(e){super("replicate",e),this.baseUrl="https://api.replicate.com/v1";let t=et.getApiConfig("replicate");if(!t)throw Error("Replicate configuration not found");this.replicateConfig=t}}class es extends ei{async execute(e){let t=this.validateParams(e);return this.makeApiCall(t)}async healthCheck(){try{return(await fetch(this.huggingFaceConfig.baseUrl,{method:"HEAD",signal:AbortSignal.timeout(5e3)})).ok}catch(e){return!1}}validateParams(e){if(!this.currentModelId)throw Error("Model ID is required for Hugging Face API validation");let t=this.huggingFaceConfig.models[this.currentModelId];if(!t)throw Error("Model ".concat(this.currentModelId," not found in Hugging Face configuration"));return t.inputSchema.parse(e)}async makeApiCall(e){if(!this.currentModelId)throw Error("Model ID is required for Hugging Face API calls");let t=this.huggingFaceConfig.models[this.currentModelId];if(!t)throw Error("Model ".concat(this.currentModelId," not found in configuration"));let i=t.inputSchema.parse(e),n="/models/".concat(this.currentModelId),a="".concat(this.huggingFaceConfig.baseUrl).concat(n),r={"Content-Type":"application/json"};this.huggingFaceConfig.apiKey&&(r.Authorization="Bearer ".concat(this.huggingFaceConfig.apiKey));let o=await ea(async()=>{let e=await fetch(a,{method:"POST",headers:r,body:JSON.stringify(i),signal:AbortSignal.timeout(this.huggingFaceConfig.timeout||6e4)});if(!e.ok){let t="HTTP ".concat(e.status,": ").concat(e.statusText);try{let i=await e.json();i.error&&(t=i.error)}catch(e){}switch(e.status){case 401:throw Error("Hugging Face API authentication failed: ".concat(t));case 429:throw Error("Hugging Face API rate limit exceeded: ".concat(t));case 503:throw Error("Hugging Face model is loading, please retry: ".concat(t));default:throw Error("Hugging Face API error: ".concat(t))}}let t=e.headers.get("content-type");if(null==t?void 0:t.includes("application/json"))return await e.json();if(null==t||!t.includes("image/"))return{output:[await e.text()]};{let t=await e.blob();return{output:[await this.blobToBase64(t)]}}},{maxAttempts:this.huggingFaceConfig.retryAttempts||2,baseDelay:1e3,maxDelay:5e3});return{success:!0,data:t.outputSchema.parse(o),metadata:{apiType:"huggingface",modelId:this.currentModelId,timestamp:new Date().toISOString(),requestId:"hf-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}}}async blobToBase64(e){return new Promise((t,i)=>{let n=new FileReader;n.onload=()=>{"string"==typeof n.result?t(n.result):i(Error("Failed to convert blob to base64"))},n.onerror=()=>i(Error("Failed to read blob")),n.readAsDataURL(e)})}getAvailableModels(){return Object.keys(this.huggingFaceConfig.models)}getModelConfig(e){return this.huggingFaceConfig.models[e]}isModelAvailable(e){let t=this.huggingFaceConfig.models[e];return(null==t?void 0:t.status)==="working"}constructor(e){super("huggingface",e),this.huggingFaceConfig=w,this.currentModelId=e||void 0}}var el=i(3454);class ec extends ei{validateParams(e){if(!e||"object"!=typeof e)throw Error("Parameters must be an object");if(!e.functionName||"string"!=typeof e.functionName)throw Error("Function name is required and must be a string");let t=v.getFunctionConfig(e.functionName);if(!t)throw Error("Function ".concat(e.functionName," not found in Supabase configuration"));if(e.data)try{t.inputSchema.parse(e.data)}catch(e){if(e instanceof m.j){let t=e.issues.filter(e=>e.message.includes("required")||e.message.includes("valid")).map(e=>e.message);if(t.length>0)throw Error("Please check: ".concat(t.join(", ")))}}return{functionName:e.functionName,data:e.data}}async execute(e){return this.makeRequest(e)}async healthCheck(){try{return(await fetch("".concat(this.supabaseUrl,"/functions/v1/health"),{method:"GET",headers:{Authorization:"Bearer ".concat(this.supabaseKey)}})).ok}catch(e){return!1}}async makeRequest(e){this.validateParams(e);let t=v.getFunctionConfig(e.functionName),i=b.retryAttempts||3,n=(null==t?void 0:t.timeout)||b.timeout;return ea(async()=>{var t,i;let a=v.buildFunctionUrl(e.functionName),r=this.buildRequestOptions(e,n);console.log("=== REQUEST OPTIONS DEBUG ==="),console.log("URL:",a),console.log("Request body being sent:",r.body),console.log("Request headers:",r.headers),console.log("=== REQUEST OPTIONS DEBUG END ===");try{let i=await fetch(a,r),n=null===(t=r.signal)||void 0===t?void 0:t._timeoutId;n&&clearTimeout(n),i.ok||await this.handleErrorResponse(i);let o=await i.json();return{success:!0,data:o,metadata:{apiType:"supabase",modelId:e.functionName,timestamp:new Date().toISOString(),requestId:"supabase-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),statusCode:i.status}}}catch(t){let e=null===(i=r.signal)||void 0===i?void 0:i._timeoutId;throw e&&clearTimeout(e),t}},{maxAttempts:i})}buildRequestOptions(e,t){let i=v.getAuthHeaders(!1),n=new AbortController,a=setTimeout(()=>n.abort(),t);return n.signal._timeoutId=a,{method:"POST",headers:i,body:JSON.stringify(e.data||{}),signal:n.signal}}async handleErrorResponse(e){let t=await e.text(),i="Supabase Edge Function error: ".concat(e.status," ").concat(e.statusText);try{let e=JSON.parse(t);e.error&&(i+=" - ".concat(e.error)),e.details&&(i+=" (".concat(e.details,")"))}catch(e){t&&(i+=" - ".concat(t))}throw 401===e.status?i+=" - Check your Supabase API key and permissions":403===e.status?i+=" - Insufficient permissions for this Edge Function":404===e.status?i+=" - Edge Function not found or not deployed":422===e.status?i+=" - Invalid request data or function validation failed":429===e.status?i+=" - Rate limit exceeded, please try again later":e.status>=500&&(i+=" - Supabase server error, please try again later"),Error(i)}constructor(e,t){super("supabase",t);let i=e.split("|");if(2===i.length?(this.supabaseUrl=i[0]||"",this.supabaseKey=i[1]||""):(this.supabaseUrl=el.env.NEXT_PUBLIC_SUPABASE_URL||b.projectUrl,this.supabaseKey=e),!this.supabaseUrl||!this.supabaseKey)throw Error("Supabase URL and key are required")}}class eu{static getInstance(){return eu.instance||(eu.instance=new eu),eu.instance}initializeClients(){let e=S.getInstance(),t=e.getApiConfigByType("replicate");t&&t.models&&Object.keys(t.models).forEach(e=>{t.models[e]&&this.registerClient("replicate",e,new eo(e))});let i=e.getApiConfigByType("huggingface");i&&i.models&&Object.keys(i.models).forEach(e=>{i.models[e]&&this.registerClient("huggingface",e,new es(e))});let n=e.getApiConfigByType("supabase");n&&n.functions&&Object.keys(n.functions).forEach(e=>{if(n.functions[e]){let t=n.serviceRoleKey||n.anonKey;this.registerClient("supabase",e,new ec(t,e))}})}registerClient(e,t,i){let n="".concat(e,":").concat(t);this.clients.set(n,i)}getClient(e,t){let i="".concat(e,":").concat(t);return this.clients.get(i)||(console.warn("No client registered for ".concat(e,":").concat(t)),null)}getAvailableModels(e){let t=S.getInstance();switch(e){case"replicate":let i=t.getApiConfigByType("replicate");return i?Object.keys(i.models):[];case"huggingface":let n=t.getApiConfigByType("huggingface");return n?Object.keys(n.models):[];case"supabase":let a=t.getApiConfigByType("supabase");return a?Object.keys(a.functions):[];default:return[]}}getModelConfig(e,t){let i=S.getInstance();switch(e){case"replicate":let n=i.getApiConfigByType("replicate");return(null==n?void 0:n.models[t])||null;case"huggingface":let a=i.getApiConfigByType("huggingface");return(null==a?void 0:a.models[t])||null;case"supabase":let r=i.getApiConfigByType("supabase");return(null==r?void 0:r.functions[t])||null;default:return null}}validateParameters(e,t,i){let n=this.getModelConfig(e,t);if(!n)return!1;try{if(n.inputSchema)return n.inputSchema.parse(i),!0;return null!=i}catch(i){return console.warn("Parameter validation failed for ".concat(e,":").concat(t,":"),i),!1}}async executeApiCall(e,t,i){let n=this.getClient(e,t);if(!n)return{success:!1,error:{code:"CLIENT_NOT_FOUND",message:"No client registered for ".concat(e,":").concat(t),details:{apiType:e,modelId:t},retryable:!1},metadata:{apiType:e,modelId:t,timestamp:new Date().toISOString(),requestId:"req_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}};try{if(!this.validateParameters(e,t,i))return{success:!1,error:{code:"INVALID_PARAMETERS",message:"Parameter validation failed",details:{apiType:e,modelId:t,params:i},retryable:!1},metadata:{apiType:e,modelId:t,timestamp:new Date().toISOString(),requestId:"req_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}};let a=n.validateParams(i);return await n.execute(a)}catch(i){return{success:!1,error:{code:"EXECUTION_ERROR",message:i instanceof Error?i.message:"Unknown error occurred",details:{apiType:e,modelId:t,originalError:i},retryable:!0},metadata:{apiType:e,modelId:t,timestamp:new Date().toISOString(),requestId:"req_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}}}}clearClients(){this.clients.clear()}refreshClients(){this.clearClients(),this.initializeClients()}getRegisteredClients(){return Array.from(this.clients.keys())}constructor(){this.clients=new Map,this.initializeClients()}}let ed=eu.getInstance();class em{static getInstance(){return em.instance||(em.instance=new em),em.instance}async generateImage(e,t){let i=this.getApiTypeFromModelId(e);return await ed.executeApiCall(i,e,t)}async transformImage(e,t){let i=this.getApiTypeFromModelId(e);return await ed.executeApiCall(i,e,t)}async generateText(e,t){let i=this.getApiTypeFromModelId(e);return await ed.executeApiCall(i,e,t)}async executeSupabaseFunction(e,t){return await ed.executeApiCall("supabase",e,{functionName:e,data:t})}getAvailableModels(e){return ed.getAvailableModels(e)}getAllAvailableModels(){return{replicate:this.getAvailableModels("replicate"),huggingface:this.getAvailableModels("huggingface"),supabase:this.getAvailableModels("supabase")}}getModelConfig(e,t){return ed.getModelConfig(e,t)}validateParameters(e,t,i){return ed.validateParameters(e,t,i)}getRegisteredClients(){return ed.getRegisteredClients()}refreshClients(){ed.refreshClients()}getApiTypeFromModelId(e){for(let[t,i]of Object.entries(this.getAllAvailableModels()))if(i.includes(e))return t;return e.includes("/")?"replicate":e.startsWith("hf-")?"huggingface":"supabase"}constructor(){}}em.getInstance()},1358:function(){}}]);