"use strict";exports.id=361,exports.ids=[361],exports.modules={1323:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},1462:(e,t,a)=>{a.d(t,{Z:()=>u});var r=a(6689);let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),o=e=>{let t=s(e);return t.charAt(0).toUpperCase()+t.slice(1)},n=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:s="",children:o,iconNode:l,...u},g)=>(0,r.createElement)("svg",{ref:g,...d,width:t,height:t,stroke:e,strokeWidth:i?24*Number(a)/Number(t):a,className:n("lucide",s),...!o&&!c(u)&&{"aria-hidden":"true"},...u},[...l.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(o)?o:[o]])),u=(e,t)=>{let a=(0,r.forwardRef)(({className:a,...s},c)=>(0,r.createElement)(l,{ref:c,iconNode:t,className:n(`lucide-${i(o(e))}`,`lucide-${e}`,a),...s}));return a.displayName=o(e),a}},1194:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(1462).Z)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},9053:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(1462).Z)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]])},8154:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(1462).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},3278:(e,t,a)=>{a.d(t,{K:()=>c});var r=a(585);class i extends Error{constructor(e,t=500,a=!0,r){super(e),this.name=this.constructor.name,this.statusCode=t,this.isOperational=a,this.context=r,Error.captureStackTrace(this,this.constructor)}}class s extends i{constructor(e,t){super(e,400,!0,t)}}class o extends i{constructor(e="Service temporarily unavailable",t){super(e,503,!0,t)}}class n{static handleError(e,t){if(e instanceof i)return t?new i(e.message,e.statusCode,e.isOperational,{...e.context,...t}):e;if(e&&"object"==typeof e&&"response"in e){let a=e.response.status;return new i(e.response.data?.message||e.message||"HTTP request failed",a,!0,{...t,httpStatus:a,responseData:e.response.data})}return e&&"object"==typeof e&&"request"in e?new o("Network error - service unavailable",{...t,errorCode:e.code,errorType:"network"}):e&&"object"==typeof e&&"name"in e&&"ZodError"===e.name&&"errors"in e?new s("Validation failed",{...t,validationErrors:e.errors}):new i(e.message||"An unexpected error occurred",500,!1,{...t,originalError:e.name,stack:e.stack})}static logError(e){let t={message:e.message,statusCode:e.statusCode,context:e.context,stack:e.stack,timestamp:new Date().toISOString()};e.statusCode>=500?console.error("[ERROR]",t):e.statusCode>=400?console.warn("[WARN]",t):console.info("[INFO]",t)}static isOperationalError(e){return e instanceof i&&e.isOperational}static createErrorResponse(e){return{error:{message:e.message,code:e.name,statusCode:e.statusCode,...!1}}}static wrapAsync(e){return async(...t)=>{try{return await e(...t)}catch(t){let e=n.handleError(t);throw n.logError(e),e}}}}class c{static async search(e){try{let{data:{user:t}}=await r.supabase.auth.getUser(),{data:a,error:i}=await r.supabase.functions.invoke("enhanced-rag-search",{body:{...e,userId:t?.id}});if(i)throw i;return a}catch(t){throw n.createValidationError("Enhanced RAG search failed",{query:e.query,searchType:e.searchType,originalError:t.message})}}static async getMaterialKnowledge(e){try{let{data:t,error:a}=await r.supabase.from("material_knowledge_extraction").select("*").eq("material_id",e).eq("validation_status","approved").order("confidence_score",{ascending:!1});if(a)throw a;return t.map(e=>({id:e.id,materialId:e.material_id,extractionType:e.extraction_type,extractedKnowledge:e.extracted_knowledge,confidence:e.confidence_score,extractionContext:e.extraction_context||{},sourceFields:e.source_fields||[],validationStatus:e.validation_status,validatedBy:e.validated_by,validationNotes:e.validation_notes,createdAt:e.created_at,updatedAt:e.updated_at}))}catch(t){throw n.createValidationError("Material knowledge fetch failed",{materialId:e,originalError:t.message})}}static async addKnowledgeEntry(e){try{let{data:{user:t}}=await r.supabase.auth.getUser();if(!t)throw Error("User not authenticated");let{data:a,error:i}=await r.supabase.functions.invoke("analyze-knowledge-content",{body:{title:e.title,content:e.content,contentType:e.contentType}});i&&console.warn("Knowledge analysis failed, proceeding without ML enhancement:",i);let{data:s,error:o}=await r.supabase.from("enhanced_knowledge_base").insert({title:e.title,content:e.content,content_type:e.contentType||"article",source_url:e.sourceUrl,pdf_url:e.pdfUrl,material_ids:e.materialIds||[],material_categories:e.materialCategories||[],semantic_tags:e.semanticTags||[],language:e.language||"en",reading_level:e.readingLevel,technical_complexity:e.technicalComplexity,openai_embedding:a?.openai_embedding,huggingface_embedding:a?.huggingface_embedding,custom_embedding:a?.custom_embedding,confidence_scores:a?.confidence_scores,search_keywords:a?.search_keywords,created_by:t.id,last_modified_by:t.id,status:"draft"}).select().single();if(o)throw o;return s}catch(t){throw n.createValidationError("Knowledge entry addition failed",{entryTitle:e.title,originalError:t.message})}}static async getKnowledgeRelationships(e){try{let{data:t,error:a}=await r.supabase.from("knowledge_relationships").select("*").or(`source_id.eq.${e},target_id.eq.${e}`).eq("validation_status","approved").order("confidence_score",{ascending:!1});if(a)throw a;return t.map(e=>({id:e.id,sourceId:e.source_id,targetId:e.target_id,relationshipType:e.relationship_type,confidence:e.confidence_score,relationshipStrength:e.relationship_strength,relationshipContext:e.relationship_context,bidirectional:e.bidirectional,sourceType:e.source_type,validationStatus:e.validation_status,validatedBy:e.validated_by,createdAt:e.created_at,updatedAt:e.updated_at}))}catch(t){throw n.createValidationError("Knowledge relationships fetch failed",{entryId:e,originalError:t.message})}}static async getQueryHistory(e=20){try{let{data:{user:t}}=await r.supabase.auth.getUser();if(!t)throw Error("User not authenticated");let{data:a,error:i}=await r.supabase.from("query_intelligence").select("*").eq("user_id",t.id).order("created_at",{ascending:!1}).limit(e);if(i)throw i;return a.map(e=>({id:e.id,userId:e.user_id,originalQuery:e.original_query,processedQuery:e.processed_query,queryIntent:e.query_intent,queryType:e.query_type,entitiesDetected:e.entities_detected||{},userContext:e.user_context||{},sessionContext:e.session_context||{},projectContext:e.project_context||{},resultsReturned:e.results_returned,userSatisfaction:e.user_satisfaction,clickedResults:e.clicked_results||[],createdAt:e.created_at}))}catch(e){throw n.createValidationError("Query history fetch failed",{originalError:e.message})}}static async provideFeedback(e,t){try{let{data:{user:a}}=await r.supabase.auth.getUser();if(!a)throw Error("User not authenticated");let{error:i}=await r.supabase.from("query_intelligence").update({user_satisfaction:t.satisfaction,clicked_results:t.clickedResults}).eq("id",e).eq("user_id",a.id);if(i)throw i;return(t.followUpQuery||t.notes)&&await r.supabase.from("search_analytics").insert({user_id:a.id,query_text:t.followUpQuery||"feedback",satisfaction_rating:t.satisfaction}),{success:!0}}catch(e){throw n.createValidationError("Feedback submission failed",{satisfaction:t.satisfaction,originalError:e.message})}}static async getSearchAnalytics(e="30 days"){try{let{data:{user:t}}=await r.supabase.auth.getUser();if(!t)throw Error("User not authenticated");let a=new Date;a.setDate(a.getDate()-parseInt(e.split(" ")[0]));let{data:i,error:s}=await r.supabase.from("search_analytics").select("*").eq("user_id",t.id).gte("created_at",a.toISOString()).order("created_at",{ascending:!1});if(s)throw s;let o=i.length,n=i.filter(e=>e.satisfaction_rating).reduce((e,t)=>e+t.satisfaction_rating,0)/i.filter(e=>e.satisfaction_rating).length||0,c=i.reduce((e,t)=>e+(t.response_time_ms||0),0)/i.length||0,d=i.reduce((e,t)=>(e[t.query_text]=(e[t.query_text]||0)+1,e),{});return{totalSearches:o,avgSatisfaction:Math.round(100*n)/100,avgResponseTime:Math.round(c),topQueries:Object.entries(d).sort(([,e],[,t])=>t-e).slice(0,10).map(([e,t])=>({query:e,count:t})),searchHistory:i.slice(0,50)}}catch(e){throw n.createValidationError("Search analytics fetch failed",{originalError:e.message})}}static async extractMaterialKnowledge(e,t=!1){try{let{data:{user:a}}=await r.supabase.auth.getUser();if(!a)throw Error("User not authenticated");if(!t){let{data:t}=await r.supabase.from("material_knowledge_extraction").select("id").eq("material_id",e).gte("created_at",new Date(Date.now()-6048e5).toISOString()).limit(1);if(t&&t.length>0)return console.log("Material knowledge already extracted recently"),{success:!0,message:"Knowledge already extracted recently"}}let{data:i,error:s}=await r.supabase.functions.invoke("extract-material-knowledge",{body:{materialId:e,userId:a.id,forceReextraction:t}});if(s)throw s;return i}catch(t){throw n.createValidationError("Material knowledge extraction failed",{materialId:e,originalError:t.message})}}static async validateKnowledge(e,t,a){try{let{data:{user:i}}=await r.supabase.auth.getUser();if(!i)throw Error("User not authenticated");let{error:s}=await r.supabase.from("material_knowledge_extraction").update({validation_status:t?"approved":"rejected",validated_by:i.id,validation_notes:a}).eq("id",e);if(s)throw s;return{success:!0}}catch(e){throw n.createValidationError("Knowledge validation failed",{originalError:e.message})}}}},5244:(e,t)=>{var a;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(a||(a={}))}};